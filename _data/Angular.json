{"Data":{"Angular-Issues":{"Issues":[{"Id":"2362914840","IsPullRequest":false,"CreatedAt":"2024-06-19T18:41:51","Actor":"jmtt89","Number":"56523","RawContent":null,"Title":"ESBuild (build-angular:application) with ng build --base-href not working as expected","State":"closed","Body":"### Which @angular/* package(s) are the source of the bug?\n\nDon't known / other\n\n### Is this a regression?\n\nYes\n\n### Description\n\nwhen use @angular-devkit/build-angular:application with cli argumemt \"base-href\" the generated index.html not include the path on scripts / styles links\n\n### Please provide a link to a minimal reproduction of the bug\n\n_No response_\n\n### Please provide the exception or error you saw\n\n_No response_\n\n### Please provide the environment you discovered this bug in (run `ng version`)\n\n```true\n_                      _                 ____ _     ___\r\n    / \\   _ __   __ _ _   _| | __ _ _ __     / ___| |   |_ _|\r\n   / ‚ñ≥ \\ | '_ \\ / _` | | | | |/ _` | '__|   | |   | |    | |\r\n  / ___ \\| | | | (_| | |_| | | (_| | |      | |___| |___ | |\r\n /_/   \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_|       \\____|_____|___|\r\n                |___/\r\n    \r\n\r\nAngular CLI: 17.3.8\r\nNode: 20.11.1\r\nPackage Manager: npm 10.2.4\r\nOS: linux x64\r\n\r\nAngular: 17.3.11\r\n... animations, common, compiler, compiler-cli, core, forms\r\n... platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1703.8\r\n@angular-devkit/build-angular   17.3.8\r\n@angular-devkit/core            17.3.8\r\n@angular-devkit/schematics      17.3.8\r\n@angular/cli                    17.3.8\r\n@schematics/angular             17.3.8\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.7\n```\n\n\n### Anything else?\n\ngenerate the app\r\n\r\n```bash\r\n$> ng new demo-angular\r\n? Which stylesheet format would you like to use? Sass (SCSS)     [ https://sass-lang.com/documentation/syntax#scss                ]\r\n? Do you want to enable Server-Side Rendering (SSR) and Static Site Generation (SSG/Prerendering)? No\r\nCREATE demo-angular/README.md (1065 bytes)\r\nCREATE demo-angular/.editorconfig (274 bytes)\r\nCREATE demo-angular/.gitignore (587 bytes)\r\nCREATE demo-angular/angular.json (2796 bytes)\r\nCREATE demo-angular/package.json (1043 bytes)\r\nCREATE demo-angular/tsconfig.json (857 bytes)\r\nCREATE demo-angular/tsconfig.app.json (263 bytes)\r\nCREATE demo-angular/tsconfig.spec.json (273 bytes)\r\nCREATE demo-angular/.vscode/extensions.json (130 bytes)\r\nCREATE demo-angular/.vscode/launch.json (470 bytes)\r\nCREATE demo-angular/.vscode/tasks.json (938 bytes)\r\nCREATE demo-angular/src/main.ts (250 bytes)\r\nCREATE demo-angular/src/favicon.ico (15086 bytes)\r\nCREATE demo-angular/src/index.html (297 bytes)\r\nCREATE demo-angular/src/styles.scss (80 bytes)\r\nCREATE demo-angular/src/app/app.component.scss (0 bytes)\r\nCREATE demo-angular/src/app/app.component.html (19903 bytes)\r\nCREATE demo-angular/src/app/app.component.spec.ts (934 bytes)\r\nCREATE demo-angular/src/app/app.component.ts (309 bytes)\r\nCREATE demo-angular/src/app/app.config.ts (227 bytes)\r\nCREATE demo-angular/src/app/app.routes.ts (77 bytes)\r\nCREATE demo-angular/src/assets/.gitkeep (0 bytes)\r\n‚†¥ Installing packages (npm)...                                                                                          ‚†¶ Installing packages (npm)...                                                                                      ‚úî Packages installed successfully.\r\n    Successfully initialized git.\r\n```\r\n\r\n\r\nexecuted command\r\n```bash\r\n$> ng build --base-href=/demo/\r\nInitial chunk files   | Names         |  Raw size | Estimated transfer size\r\nmain-DJOLY6CB.js      | main          | 193.28 kB |                52.55 kB\r\npolyfills-6EAL64PA.js | polyfills     |  33.43 kB |                10.87 kB\r\nstyles-5INURTSO.css   | styles        |   0 bytes |                 0 bytes\r\n\r\n                      | Initial total | 226.71 kB |                63.42 kB\r\n\r\nOutput location: ..../demo-angular/dist/demo-angular\r\n\r\nApplication bundle generation complete. [16.613 seconds]\r\n```\r\n\r\ngenerated index.html\r\n\r\n```html\r\n<!doctype html>\r\n<html lang=\"en\" data-critters-container>\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <title>DemoAngular</title>\r\n  <base href=\"/demo/\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n  <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\">\r\n<link rel=\"stylesheet\" href=\"styles-5INURTSO.css\"></head>\r\n<body>\r\n  <app-root></app-root>\r\n<script src=\"polyfills-6EAL64PA.js\" type=\"module\"></script><script src=\"main-DJOLY6CB.js\" type=\"module\"></script></body>\r\n</html>\r\n```\r\n\r\nin index.html the `<base href=\"/demo/\">` is correctly setted but the script and style does not include in the path...","Url":"https://github.com/angular/angular/issues/56523","RelatedDescription":"Closed issue \"ESBuild (build-angular:application) with ng build --base-href not working as expected\" (#56523)"},{"Id":"2362919002","IsPullRequest":true,"CreatedAt":"2024-06-19T18:13:56","Actor":"cexbrayat","Number":"56524","RawContent":null,"Title":"fix(core): properly remove imports in the afterRender phase migration","State":"open","Body":"## PR Checklist\r\nPlease check if your PR fulfills the following requirements:\r\n\r\n- [x] The commit message follows our guidelines: https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit\r\n- [x] Tests for the changes have been added (for bug fixes / features)\r\n- [ ] Docs have been added / updated (for bug fixes / features)\r\n\r\n\r\n## PR Type\r\nWhat kind of change does this PR introduce?\r\n\r\n<!-- Please check the one that applies to this PR using \"x\". -->\r\n\r\n- [x] Bugfix\r\n- [ ] Feature\r\n- [ ] Code style update (formatting, local variables)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] CI related changes\r\n- [ ] Documentation content changes\r\n- [ ] angular.io application / infrastructure changes\r\n- [ ] Other... Please describe:\r\n\r\n\r\n## What is the current behavior?\r\n\r\nBefore this commit, the migration was removing the `AfterRenderPhase` enum from the imports but not the comma, resulting in invalid code:\r\n\r\nts\r\n```\r\nimport { , Directive, afterRender } from '@angular/core';\r\n```\r\n\r\n## What is the new behavior?\r\n\r\nThis commit fixes this by using `updateNamedImports` and `replaceNode` instead of `removeNode`.\r\n\r\nAfter:\r\n\r\nts\r\n```\r\nimport { Directive, afterRender } from '@angular/core';\r\n```\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No\r\n\r\n\r\n<!-- If this PR contains a breaking change, please describe the impact and migration path for existing applications below. -->\r\n\r\n\r\n## Other information\r\n","Url":"https://github.com/angular/angular/pull/56524","RelatedDescription":"Open PR \"fix(core): properly remove imports in the afterRender phase migration\" (#56524)"},{"Id":"2362881399","IsPullRequest":true,"CreatedAt":"2024-06-19T17:46:12","Actor":"cexbrayat","Number":"56522","RawContent":null,"Title":"fix(core): improve docs on afterRender hooks","State":"open","Body":"## PR Checklist\r\nPlease check if your PR fulfills the following requirements:\r\n\r\n- [x] The commit message follows our guidelines: https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit\r\n- [ ] Tests for the changes have been added (for bug fixes / features)\r\n- [x] Docs have been added / updated (for bug fixes / features)\r\n\r\n\r\n## PR Type\r\nWhat kind of change does this PR introduce?\r\n\r\n<!-- Please check the one that applies to this PR using \"x\". -->\r\n\r\n- [x] Bugfix\r\n- [ ] Feature\r\n- [ ] Code style update (formatting, local variables)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] CI related changes\r\n- [ ] Documentation content changes\r\n- [ ] angular.io application / infrastructure changes\r\n- [ ] Other... Please describe:\r\n\r\n\r\n## What is the current behavior?\r\n\r\nThe AfterPhaseRender deprecation warning has a typo.\r\n\r\n## What is the new behavior?\r\n\r\nThis commit fixes a typo in the `AfterRenderPhase` deprecation warning and improves the documentation of the options parameter of the afterRender hooks (which are now all named `options` instead of being called `opts` in some functions and `options` in others).\r\n\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No\r\n\r\n\r\n<!-- If this PR contains a breaking change, please describe the impact and migration path for existing applications below. -->\r\n\r\n\r\n## Other information\r\n","Url":"https://github.com/angular/angular/pull/56522","RelatedDescription":"Open PR \"fix(core): improve docs on afterRender hooks\" (#56522)"},{"Id":"2362861602","IsPullRequest":true,"CreatedAt":"2024-06-19T17:34:37","Actor":"engineerpavel","Number":"56521","RawContent":null,"Title":"Angular Style Guide: Sorting class members: section on sorting convention for class members","State":"closed","Body":"## PR Checklist\r\nPlease check if your PR fulfills the following requirements:\r\n\r\n- [x] The commit message follows our guidelines: https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit\r\n- [x] Tests for the changes have been added (for bug fixes / features)\r\n- [x] Docs have been added / updated (for bug fixes / features)\r\n\r\n\r\n## PR Type\r\n- [ ] Bugfix\r\n- [ ] Feature\r\n- [x] Code style update (formatting, local variables)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] CI related changes\r\n- [x] Documentation content changes\r\n- [ ] angular.io application / infrastructure changes\r\n- [ ] Other... Please describe:\r\n\r\n\r\n## What is the current behavior?\r\nIn the documentation, in the codestyle section, there is no information about the accepted agreement for sorting class members.\r\n\r\n## What is the new behavior?\r\nIn the codestyle section, information appears about the accepted convention for sorting class members\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No\r\n","Url":"https://github.com/angular/angular/pull/56521","RelatedDescription":"Closed or merged PR \"Angular Style Guide: Sorting class members: section on sorting convention for class members\" (#56521)"},{"Id":"2362670573","IsPullRequest":true,"CreatedAt":"2024-06-19T15:34:32","Actor":"devversion","Number":"56520","RawContent":null,"Title":"refactor(compiler-cli): support running JIT transforms as part of tsickle emit","State":"open","Body":"When running the JIT transforms in 1P w/ tsickle, tsickle will transform source files before our custom transforms can run. This is also impacting the Ivy transform and hence we use `ts.getOriginalNode` in various places to inspect the source AST for detecting Angular.\r\n\r\nFor the JIT transform we need to do a similar change so that the transform could run in 1P.","Url":"https://github.com/angular/angular/pull/56520","RelatedDescription":"Open PR \"refactor(compiler-cli): support running JIT transforms as part of tsickle emit\" (#56520)"},{"Id":"2362651362","IsPullRequest":false,"CreatedAt":"2024-06-19T15:24:51","Actor":"pfeileon","Number":"56519","RawContent":null,"Title":"Combination of redirecting under a primary route and route guarding a sibling route under a named outlet causes NG04013","State":"open","Body":"### Which @angular/* package(s) are the source of the bug?\r\n\r\nrouter\r\n\r\n### Is this a regression?\r\n\r\nNo\r\n\r\n### Description\r\n\r\nOn a route with two children with an empty path, one on a named outlet, the other with a child-redirect, the router seems to activate (and never deactivate?) the named outlet if a `canMatch` (or `canActivate`) guard returns false.\r\n\r\nThis causes the issue that after the initial navigation (\"/items/:id\") which successfully redirects (\"items/:id/main\"), every other parallel navigation throws the mentioned error.\r\n\r\nIf the guard returns true, everything works as expected.\r\n\r\nComponent/route hierarchy (I'm mixing component and route hierarchy for simplicity):\r\n```\r\nRootComponent\r\n  primary outlet> someLazyRoutes => moreLazyRoutes => ListComponent => routesWithIssues\r\n  named outlet> AsideComponent\r\n```\r\n\r\n```\r\nexport const routesWithIssues = [\r\n  {\r\n    path: ':id'\r\n    children: [\r\n      {\r\n        path: '',\r\n        loadComponent: () => ItemComponent,\r\n        // initial redirection works,\r\n        // navigating to or deep linking to other routes on the same level as \"main\" causes the error\r\n        children: [\r\n          // Removing this redirection route solves the issue (but has the side-effect that it doesn't redirect, obviously)\r\n          {path: '', pathMatch: 'full', redirectTo: 'main'},\r\n          ...otherTabbedChildRoutesIncludingMain\r\n        ]\r\n      },\r\n      {\r\n        path: '',\r\n        outlet: 'aside',\r\n        // If the guard returns true, no error occurrs.\r\n        // (Strange sidenote: only defining `canActivate` breaks routing completely without an error message,\r\n        // i.e. only the RootComponent is loaded)\r\n        canMatch: [() => false],\r\n        loadComponent: () => AsideComponent\r\n      },\r\n    ]\r\n  }\r\n] as Routes\r\n```\r\n\r\n### Please provide a link to a minimal reproduction of the bug\r\n\r\n_No response_\r\n\r\n### Please provide the exception or error you saw\r\n\r\n```true\r\nError: NG04013: Cannot activate an already activated outlet\r\n    at RouterOutlet.activateWith (router.mjs:2552:19)\r\n    at ActivateRoutes.activateRoutes (router.mjs:3146:40)\r\n    at router.mjs:3097:18\r\n    at Array.forEach (<anonymous>)\r\n    at ActivateRoutes.activateChildRoutes (router.mjs:3096:29)\r\n    at ActivateRoutes.activateRoutes (router.mjs:3113:22)\r\n    at router.mjs:3097:18\r\n    at Array.forEach (<anonymous>)\r\n    at ActivateRoutes.activateChildRoutes (router.mjs:3096:29)\r\n    at ActivateRoutes.activateRoutes (router.mjs:3117:22)\r\n```\r\n\r\n\r\n### Please provide the environment you discovered this bug in (run `ng version`)\r\n\r\n```true\r\nAngular CLI: 17.3.8\r\nNode: 20.14.0\r\nPackage Manager: npm 10.7.0\r\nOS: linux x64\r\n\r\nAngular: 17.3.10\r\n... animations, cdk, common, compiler, compiler-cli, core, forms\r\n... material, platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1703.8\r\n@angular-devkit/build-angular   17.3.8\r\n@angular-devkit/core            17.3.8\r\n@angular-devkit/schematics      17.3.8\r\n@angular/cli                    17.3.8\r\n@schematics/angular             17.3.8\r\nrxjs                            7.8.1\r\ntypescript                      5.3.3\r\nzone.js                         0.14.6\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\nI experimented with trying to deactivate the outlet imperatively, but it didn't work.","Url":"https://github.com/angular/angular/issues/56519","RelatedDescription":"Open issue \"Combination of redirecting under a primary route and route guarding a sibling route under a named outlet causes NG04013\" (#56519)"},{"Id":"2362525768","IsPullRequest":true,"CreatedAt":"2024-06-19T14:26:22","Actor":"CodeF0x","Number":"56518","RawContent":null,"Title":"Updated docs about HTTP testing","State":"open","Body":"## PR Checklist\r\nPlease check if your PR fulfills the following requirements:\r\n\r\n- [x] The commit message follows our guidelines: https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit\r\n- [ ] Tests for the changes have been added (for bug fixes / features)\r\n- [ ] Docs have been added / updated (for bug fixes / features)\r\n\r\n\r\n## PR Type\r\nWhat kind of change does this PR introduce?\r\n\r\n<!-- Please check the one that applies to this PR using \"x\". -->\r\n\r\n- [ ] Bugfix\r\n- [ ] Feature\r\n- [ ] Code style update (formatting, local variables)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] CI related changes\r\n- [x] Documentation content changes\r\n- [ ] angular.io application / infrastructure changes\r\n- [ ] Other... Please describe:\r\n\r\n\r\n## What is the current behavior?\r\n\r\nThe order of the http testing related providers is pretty important and doing it wrong made my tests fail.\r\n\r\n\r\n## What is the new behavior?\r\n\r\nAdded a small heads up to always keep the order in mind\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No\r\n\r\n\r\n<!-- If this PR contains a breaking change, please describe the impact and migration path for existing applications below. -->\r\n\r\n\r\n## Other information\r\n","Url":"https://github.com/angular/angular/pull/56518","RelatedDescription":"Open PR \"Updated docs about HTTP testing\" (#56518)"},{"Id":"2361031592","IsPullRequest":false,"CreatedAt":"2024-06-19T12:51:47","Actor":"mattiLeBlanc","Number":"56510","RawContent":null,"Title":"Provide a option to print an error report in the browser if Angular failed to launch due to a JS error ","State":"closed","Body":"### Which @angular/* package(s) are relevant/related to the feature request?\n\ncore\n\n### Description\n\nWe have build a solution for our customers that is used on many different devices, including TV's and their browsers, or smartboards.\r\nThe problem I am running into is that some of these devices do fail to setup the angular app and since it is a device with no development toolbars or any access into what caused the error, I am blind as to watch is causing the issue.\r\n\r\nI am using an App Error Handler, which can report errors to our slack channel, but that only works if the Angular app was launched correctly.\r\n\r\nI created a little mini project to try report an error in the browser if the JS fails to load, but that is not a complete reflection of our product. \r\nWith that I found that some TV's don't like Nullish_coalescing_assignment operator (??=) and I could use browserlistrc to force Safari >= 13 which get's rid of that operator.\r\nBut now I am facing another error which results in a white screen.\r\n\n\n### Proposed solution\n\n\r\nSolution: it would be great it Angular had some kind of try/catch mechanism which could report on errors that occur trying to load the angular app and it can be printed in the window. \r\nI know it will be crude, but at least it is better than a white screen.\r\nIt could show that the angular app failed to load because of this specific reason and show the stack trace if possible.\n\n### Alternatives considered\n\nMaybe the consensus is that this is not Angular's responsibility  and it should be dealt with by the developer.\r\nBut then it would be nice to maybe create a blog about this with pointers for others so we can deal with the nightmare of supporting a wide range of devices.","Url":"https://github.com/angular/angular/issues/56510","RelatedDescription":"Closed issue \"Provide a option to print an error report in the browser if Angular failed to launch due to a JS error \" (#56510)"},{"Id":"2362169879","IsPullRequest":false,"CreatedAt":"2024-06-19T12:20:37","Actor":"CP-Ram","Number":"56517","RawContent":null,"Title":"Standalone component with angular element not working with prod build","State":"closed","Body":"### Which @angular/* package(s) are the source of the bug?\n\nelements\n\n### Is this a regression?\n\nNo\n\n### Description\n\nwe have angular **v17** standalone app and **createCustomElement** doesn't loading and throw error in bundle js file with **prod** build.\r\n\r\n**Reproducing steps**\r\n\r\nCreate new angular v17 standalone project.\r\n\r\nadd  package `\"@angular/elements\": \"^17.3.0\",`\r\n\r\n**modify main.ts as below**\r\n\r\n```\r\nimport { bootstrapApplication, createApplication } from '@angular/platform-browser';\r\nimport { appConfig } from './app/app.config';\r\nimport { AppComponent } from './app/app.component';\r\nimport { createCustomElement } from '@angular/elements';\r\n\r\n// bootstrapApplication(AppComponent, appConfig)\r\n//   .catch((err) => console.error(err));\r\n\r\n\r\n(async () => {\r\n  const app = await createApplication(appConfig);\r\n    const webElement = createCustomElement(AppComponent, {injector: app.injector});\r\n    customElements.define('test-standalone-mfe', webElement);\r\n})();\r\n```\r\n```\r\n**package.json**\r\n{\r\n  \"name\": \"stwithwebcomponentest\",\r\n  \"version\": \"0.0.0\",\r\n  \"scripts\": {\r\n    \"ng\": \"ng\",\r\n    \"start\": \"ng serve\",\r\n    \"build\": \"ng build --output-hashing none --configuration production\",\r\n    \"package\": \"node bundle-mfe.js\",\r\n    \"bundle\":\"npm run build && npm run package\",\r\n    \"watch\": \"ng build --watch --configuration development\",\r\n    \"test\": \"ng test\"\r\n  },\r\n  \"private\": true,\r\n  \"dependencies\": {\r\n    \"@angular/animations\": \"^17.3.0\",\r\n    \"@angular/common\": \"^17.3.0\",\r\n    \"@angular/compiler\": \"^17.3.0\",\r\n    \"@angular/core\": \"^17.3.0\",\r\n    \"@angular/forms\": \"^17.3.0\",\r\n    \"@angular/platform-browser\": \"^17.3.0\",\r\n    \"@angular/platform-browser-dynamic\": \"^17.3.0\",\r\n    \"@angular/router\": \"^17.3.0\",\r\n    \"@angular/elements\": \"^17.3.0\",\r\n    \"rxjs\": \"~7.8.0\",\r\n    \"tslib\": \"^2.3.0\",\r\n    \"zone.js\": \"~0.14.3\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@angular-devkit/build-angular\": \"^17.3.8\",\r\n    \"@angular/cli\": \"^17.3.8\",\r\n    \"@angular/compiler-cli\": \"^17.3.0\",\r\n    \"@types/jasmine\": \"~5.1.0\",\r\n    \"jasmine-core\": \"~5.1.0\",\r\n    \"karma\": \"~6.4.0\",\r\n    \"concat\": \"^1.0.3\",\r\n    \"karma-chrome-launcher\": \"~3.2.0\",\r\n    \"karma-coverage\": \"~2.2.0\",\r\n    \"karma-jasmine\": \"~5.1.0\",\r\n    \"karma-jasmine-html-reporter\": \"~2.1.0\",\r\n    \"typescript\": \"~5.4.2\"\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Then bundle js files(main.js,polly.js) using ` npm run bundle` and import dist js file**  \r\n\r\n```\r\n<!doctype html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <title>Stwithwebcomponentest</title>\r\n  <base href=\"/\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n  <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\">\r\n  <script src=\"./dist/webcomponent-mfe.js\" type=\"module\"></script>\r\n</head>\r\n<body>\r\n<test-standalone-mfe></test-standalone-mfe>\r\n\r\n</body>\r\n</html>\r\n```\r\n\r\n**bundle-mfe.js**\r\n\r\n```\r\nconst concat = require('concat');\r\nconst fs = require('fs');\r\n(async function build() {\r\n  const files = [\r\n    './dist/stwithwebcomponentest/browser/polyfills.js',\r\n    './dist/stwithwebcomponentest/browser/main.js',\r\n  ]\r\n  await concat(files, 'dist/webcomponent-mfe.js');\r\n})()\r\n```\r\n\r\n\r\n\r\n\n\n### Please provide a link to a minimal reproduction of the bug\n\n_No response_\n\n### Please provide the exception or error you saw\n\n```true\nwebcomponent-mfe.js:5 Uncaught SyntaxError: Identifier 'bt' has already been declared (at webcomponent-mfe.js:5:3161)\n```\n\n\n### Please provide the environment you discovered this bug in (run `ng version`)\n\n```true\nAngular CLI: 17.3.8\r\nNode: 20.13.1\r\nPackage Manager: npm 10.5.2\r\nOS: win32 x64\n```\n\n\n### Anything else?\n\n_No response_","Url":"https://github.com/angular/angular/issues/56517","RelatedDescription":"Closed issue \"Standalone component with angular element not working with prod build\" (#56517)"},{"Id":"2362114953","IsPullRequest":false,"CreatedAt":"2024-06-19T11:30:24","Actor":"oleks12345","Number":"56516","RawContent":null,"Title":"@else if and signals narrowing","State":"closed","Body":"### Which @angular/* package(s) are the source of the bug?\r\n\r\ncore\r\n\r\n### Is this a regression?\r\n\r\nNo\r\n\r\n### Description\r\n\r\nHi, \r\nI've seen the discussion in #52103  but I'm not sure how to handle this case\r\n```\r\n@if(loading()) {\r\n    <message/> \r\n} @else if(item().steps as steps) { // this throws the error\r\n    <external-component-not-accepting-undefined [steps]=\"steps\" /> \r\n}\r\n```\r\n\r\n### Please provide a link to a minimal reproduction of the bug\r\n\r\n_No response_\r\n\r\n### Please provide the exception or error you saw\r\n\r\n_No response_\r\n\r\n### Please provide the environment you discovered this bug in (run `ng version`)\r\n\r\n_No response_\r\n\r\n### Anything else?\r\n\r\n_No response_","Url":"https://github.com/angular/angular/issues/56516","RelatedDescription":"Closed issue \"@else if and signals narrowing\" (#56516)"},{"Id":"2361896970","IsPullRequest":false,"CreatedAt":"2024-06-19T11:09:00","Actor":"jdiemke","Number":"56515","RawContent":null,"Title":"ng update does not migrate the asset folder to the new public folder","State":"closed","Body":"### Which @angular/* package(s) are relevant/related to the feature request?\n\nupgrade\n\n### Description\n\nSince Angular 18 the asset folder does not exist anymore. This is not documented in the migration guide and also not done automatically when using ng update.\n\n### Proposed solution\n\nAdd to migration guide or ask during ng update whether this should be done automatically.\n\n### Alternatives considered\n\ndo nothing.","Url":"https://github.com/angular/angular/issues/56515","RelatedDescription":"Closed issue \"ng update does not migrate the asset folder to the new public folder\" (#56515)"},{"Id":"2361275896","IsPullRequest":false,"CreatedAt":"2024-06-19T07:06:53","Actor":"asanoic","Number":"56513","RawContent":null,"Title":"ChangeDetection is not triggered after http put when using provideExperimentalZonelessChangeDetection on Angular 18","State":"closed","Body":"### Which @angular/* package(s) are the source of the bug?\r\n\r\ncore\r\n\r\n### Is this a regression?\r\n\r\nNo\r\n\r\n### Description\r\n\r\nmy code is pretty simple like\r\n```typescript\r\n  itemDetail = model<any>(XXXXComponent.EMPTY_DETAIL);\r\n  treeNodes = signal(new Map<string, any>(), { equal: () => false });\r\n  \r\n  public async saveClicked(): Promise<void> {\r\n    const result = await this.apiEntity.updateEntity(this.itemDetail()); // comment this line ui will change\r\n    this.treeNodes().get(this.itemDetail().id).name = this.itemDetail().name;\r\n    // this.cd.markForCheck();                                           // or add this line to force CD.\r\n  }\r\n```\r\n\r\nupdateEntity just a http put call:\r\n```typescript\r\n  async updateEntity(item: any): Promise<any> {\r\n    const { result } = await firstValueFrom(this.http.put<any>(`${environment.apiUrl}/item`, item));\r\n    return result;\r\n  }\r\n```\r\n\r\nmy target code is Firefox 70, because my browser does not support `Nullish coalescing operator`\r\n\r\n### Please provide a link to a minimal reproduction of the bug\r\n\r\nSORRY\r\n\r\n### Please provide the exception or error you saw\r\n\r\n```true\r\nNo exception\r\n```\r\n\r\n\r\n### Please provide the environment you discovered this bug in (run `ng version`)\r\n\r\n```true\r\nAngular CLI: 18.0.4\r\nNode: 22.3.0\r\nPackage Manager: npm 10.8.1\r\nOS: linux x64\r\n\r\nAngular: 18.0.3\r\n... animations, common, compiler, compiler-cli, core, forms\r\n... platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1800.4\r\n@angular-devkit/build-angular   18.0.4\r\n@angular-devkit/core            18.0.4\r\n@angular-devkit/schematics      18.0.4\r\n@angular/cli                    18.0.4\r\n@schematics/angular             18.0.4\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nwebpack                         5.92.0\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\n_No response_","Url":"https://github.com/angular/angular/issues/56513","RelatedDescription":"Closed issue \"ChangeDetection is not triggered after http put when using provideExperimentalZonelessChangeDetection on Angular 18\" (#56513)"},{"Id":"2361268480","IsPullRequest":true,"CreatedAt":"2024-06-19T04:53:14","Actor":"sasidharansd","Number":"56512","RawContent":null,"Title":"docs: fix page not found","State":"open","Body":"## PR Checklist\r\nPlease check if your PR fulfills the following requirements:\r\n\r\n- [ ] The commit message follows our guidelines: https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit\r\n- [ ] Tests for the changes have been added (for bug fixes / features)\r\n- [x] Docs have been added / updated (for bug fixes / features)\r\n\r\n\r\n## PR Type\r\nWhat kind of change does this PR introduce?\r\n\r\n<!-- Please check the one that applies to this PR using \"x\". -->\r\n\r\n- [ ] Bugfix\r\n- [ ] Feature\r\n- [ ] Code style update (formatting, local variables)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] CI related changes\r\n- [x] Documentation content changes\r\n- [ ] angular.io application / infrastructure changes\r\n- [ ] Other... Please describe:\r\n\r\n\r\n## What is the current behavior?\r\n<!-- Please describe the current behavior that you are modifying, or link to a relevant issue. -->\r\n\r\nIssue Number: #56511\r\n\r\n\r\n## What is the new behavior?\r\n\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No\r\n\r\n\r\n<!-- If this PR contains a breaking change, please describe the impact and migration path for existing applications below. -->\r\n\r\n\r\n## Other information\r\n","Url":"https://github.com/angular/angular/pull/56512","RelatedDescription":"Open PR \"docs: fix page not found\" (#56512)"},{"Id":"2361072278","IsPullRequest":false,"CreatedAt":"2024-06-19T02:13:26","Actor":"Alamin-Ahammed","Number":"56511","RawContent":null,"Title":"Page not found","State":"open","Body":"### Describe the problem that you experienced\n\nI was studying the tutorial, below the part \r\n\"Your first Angular app\r\nAdd dynamic values to templates\" at \"For more information about the topics covered in this lesson, visit:\" \r\n[Template syntax](https://angular.dev/guide/templates/interpolation)\r\n[Displaying values with interpolation](https://angular.dev/guide/templates/template-syntax)\r\nis saying page not found. I think the routing is wrong here. please fix it.\n\n### Enter the URL of the topic with the problem\n\nhttps://angular.dev/guide/templates/template-syntax\n\n### Describe what you were looking for in the documentation\n\n_No response_\n\n### Describe the actions that led you to experience the problem\n\n_No response_\n\n### Describe what you want to experience that would fix the problem\n\n_No response_\n\n### Add a screenshot if that helps illustrate the problem\n\n_No response_\n\n### If this problem caused an exception or error, please paste it here\n\n_No response_\n\n### If the problem is browser-specific, please specify the device, OS, browser, and version\n\n_No response_\n\n### Provide any additional information here in as much as detail as you can\n\n_No response_","Url":"https://github.com/angular/angular/issues/56511","RelatedDescription":"Open issue \"Page not found\" (#56511)"},{"Id":"2361007927","IsPullRequest":true,"CreatedAt":"2024-06-19T01:16:32","Actor":"AndrewKushnir","Number":"56509","RawContent":null,"Title":"fix(core): do not activate event replay when no events are registered","State":"open","Body":"This commit adds extra checks to handle a situation when an application has no events configured, but the Event Replay feature was enabled. This situation can happen when some routes in an application are mostly static, when other routes are more interactive.\r\n\r\nResolves https://github.com/angular/angular/issues/56423.\r\n\r\n## PR Type\r\nWhat kind of change does this PR introduce?\r\n\r\n- [x] Bugfix\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No","Url":"https://github.com/angular/angular/pull/56509","RelatedDescription":"Open PR \"fix(core): do not activate event replay when no events are registered\" (#56509)"},{"Id":"2360936604","IsPullRequest":true,"CreatedAt":"2024-06-19T00:00:09","Actor":"JeanMeche","Number":"56508","RawContent":null,"Title":"docs: fix code example for http headers","State":"open","Body":"","Url":"https://github.com/angular/angular/pull/56508","RelatedDescription":"Open PR \"docs: fix code example for http headers\" (#56508)"},{"Id":"2360924674","IsPullRequest":true,"CreatedAt":"2024-06-18T23:46:51","Actor":"dgp1130","Number":"56507","RawContent":null,"Title":"refactor(compiler): add `i18nPreserveWhitespaceForLegacyExtraction`","State":"open","Body":"This configures whether or not to preserve whitespace content when extracting messages from Angular templates in the legacy (View Engine) extraction pipeline.\r\n\r\nThe change to `i18n_parser.ts` is really a bug fix. The localization process requires that the nubmer of tokens in a message stays constant between i18n passes so it can reuse source spans. Therefore even empty text tokens need to be retained in order to maintain that invariant. However this bug fix does affect message IDs, and changing that could invalidate existing translations, therefore it is also gated by the same flag to maintain backwards compatibility.\r\n","Url":"https://github.com/angular/angular/pull/56507","RelatedDescription":"Open PR \"refactor(compiler): add `i18nPreserveWhitespaceForLegacyExtraction`\" (#56507)"},{"Id":"2360906136","IsPullRequest":true,"CreatedAt":"2024-06-18T23:27:10","Actor":"eneajaho","Number":"56506","RawContent":null,"Title":"wip - fix(language-service): added test cases","State":"open","Body":"just running new tests\r\n\r\nRelated https://github.com/angular/angular/issues/56476","Url":"https://github.com/angular/angular/pull/56506","RelatedDescription":"Open PR \"wip - fix(language-service): added test cases\" (#56506)"},{"Id":"2360898840","IsPullRequest":true,"CreatedAt":"2024-06-18T23:19:26","Actor":"jelbourn","Number":"56505","RawContent":null,"Title":"docs: add docs authoring guide","State":"open","Body":"This new contributor guide includes information for authoring Angular documentation.","Url":"https://github.com/angular/angular/pull/56505","RelatedDescription":"Open PR \"docs: add docs authoring guide\" (#56505)"},{"Id":"2360894747","IsPullRequest":false,"CreatedAt":"2024-06-18T23:14:45","Actor":"maximLyakhov","Number":"56504","RawContent":null,"Title":"Support VSCode intellisense for `@Attribute` / `HostAttributeToken` usage.","State":"open","Body":"### Which @angular/* package(s) are relevant/related to the feature request?\r\n\r\nlanguage-service\r\n\r\n### Description\r\n\r\n`@Attribute` decorator is already banned by [angular-eslint/no-attribute-decorator](https://github.com/angular-eslint/angular-eslint/blob/main/packages/eslint-plugin/docs/rules/no-attribute-decorator.md).\r\n\r\nInstead we have `HostAttributeToken` which lacks support for:\r\n\r\n- Passing generic primitive type (string | number | boolean) or primitive union ('some' | 'thing') (as in inputs)\r\n- Transform property (with use of *Attribute functions from `@angular/core`) (as in inputs)\r\n- Language service intellisense respecting allowed types (as in inputs)\r\n- Update docs to point to `one-time binding` capabilities.\r\n\r\n### Proposed solution\r\n\r\nCompleting bullets above would allow to close feature requests for one-time inputs: [#14033](https://github.com/angular/angular/issues/14033) [#55581](https://github.com/angular/angular/issues/55581) and the need of detaching the view from changeDetection runs as a workaround.\r\n\r\nSuch approach to `HostAttributeToken` usage would then make easy to switch to `inject` / `signal` / `non-reactive value` / `@Input` / `input` if a framework user would need it because of preserving typings during rewrite. \r\n\r\nLibrary developers and advanced users would benefit from it from performance and bundle size perspective.\r\n\r\n### Alternatives considered\r\n\r\nOnly alternative is typed `@Input` or `input()`.\r\nBut this approach creates unnecessary bindings for expected-as-one-time inputs with primitive values, in the end makes bundle bigger and client app work more every cd run, instead of making `language-service` to work a tiny bit more.","Url":"https://github.com/angular/angular/issues/56504","RelatedDescription":"Open issue \"Support VSCode intellisense for `@Attribute` / `HostAttributeToken` usage.\" (#56504)"},{"Id":"2360880957","IsPullRequest":true,"CreatedAt":"2024-06-18T23:00:51","Actor":"JeanMeche","Number":"56503","RawContent":null,"Title":"docs: add mention of preconnect links","State":"open","Body":"Text is copied from AIO.\r\n\r\nfixes #56502\r\n","Url":"https://github.com/angular/angular/pull/56503","RelatedDescription":"Open PR \"docs: add mention of preconnect links\" (#56503)"},{"Id":"2360869979","IsPullRequest":false,"CreatedAt":"2024-06-18T22:49:12","Actor":"kara","Number":"56502","RawContent":null,"Title":"angular.dev NgOptimizedImage docs not up-to-date","State":"open","Body":"### Describe the problem that you experienced\r\n\r\nCompare the content on preconnect links in angular.dev to angular.io:\r\nhttps://angular.dev/guide/image-optimization#add-resource-hints\r\nhttps://v17.angular.io/guide/image-directive#resource-hints\r\n\r\nThe angular.dev version still has the old info about the preconnect warning and doesn't mention the preconnect generation feature at all. \r\n","Url":"https://github.com/angular/angular/issues/56502","RelatedDescription":"Open issue \"angular.dev NgOptimizedImage docs not up-to-date\" (#56502)"},{"Id":"2360810816","IsPullRequest":true,"CreatedAt":"2024-06-18T22:01:15","Actor":"alxhub","Number":"56501","RawContent":null,"Title":"feat(core): rework effect scheduling","State":"open","Body":"The original effect design for Angular had one \"bucket\" of effects, which are scheduled on the microtask queue. This approach got us pretty far, but as developers have built more complex reactive systems, we've hit the limitations of this design.\r\n\r\nThis commit changes the nature of effects significantly. In particular, effects created in components have a completely new scheduling system, which executes them as a part of the change detection cycle. This results in behavior similar to that of nested effects in other reactive frameworks. The scheduling behavior here uses the \"mark for traversal\" flag (`HasChildViewsToRefresh`). This has really nice behavior:\r\n\r\n * if the component is dirty already, effects run following preorder hooks (ngOnInit, etc).\r\n * if the component isn't dirty, it doesn't get change detected only because of the dirty effect.\r\n\r\nThis is not a breaking change, since `effect()` is in developer preview (and it remains so).\r\n\r\nFixes #55311\r\nFixes #55808\r\nFixes #55644\r\n","Url":"https://github.com/angular/angular/pull/56501","RelatedDescription":"Open PR \"feat(core): rework effect scheduling\" (#56501)"},{"Id":"2360758225","IsPullRequest":true,"CreatedAt":"2024-06-18T21:31:23","Actor":"clydin","Number":"56499","RawContent":null,"Title":"build: remove unused root dependencies","State":"open","Body":"With the removal of AIO, several dependencies are now unused and can be removed.","Url":"https://github.com/angular/angular/pull/56499","RelatedDescription":"Open PR \"build: remove unused root dependencies\" (#56499)"},{"Id":"2360331536","IsPullRequest":true,"CreatedAt":"2024-06-18T19:26:07","Actor":"josephperrott","Number":"56496","RawContent":null,"Title":"Complete removal of aio subdirectory","State":"closed","Body":"See individual commits.","Url":"https://github.com/angular/angular/pull/56496","RelatedDescription":"Closed or merged PR \"Complete removal of aio subdirectory\" (#56496)"},{"Id":"2360466644","IsPullRequest":false,"CreatedAt":"2024-06-18T18:37:12","Actor":"ayadarwesh","Number":"56497","RawContent":null,"Title":"Page Not Found üôÉ - List of pipes ","State":"closed","Body":"### Describe the problem that you experienced\n\nthe note reference url in this page is not working:-\r\nsee the [pipes API documentation](https://angular.dev/api/common#pipes)\r\n\r\npage url:-\r\nhttps://angular.dev/api/common#pipes\r\n\r\n\n\n### Enter the URL of the topic with the problem\n\n_No response_\n\n### Describe what you were looking for in the documentation\n\n_No response_\n\n### Describe the actions that led you to experience the problem\n\n_No response_\n\n### Describe what you want to experience that would fix the problem\n\n_No response_\n\n### Add a screenshot if that helps illustrate the problem\n\n_No response_\n\n### If this problem caused an exception or error, please paste it here\n\n_No response_\n\n### If the problem is browser-specific, please specify the device, OS, browser, and version\n\n_No response_\n\n### Provide any additional information here in as much as detail as you can\n\n_No response_","Url":"https://github.com/angular/angular/issues/56497","RelatedDescription":"Closed issue \"Page Not Found üôÉ - List of pipes \" (#56497)"},{"Id":"2360176189","IsPullRequest":true,"CreatedAt":"2024-06-18T17:10:06","Actor":"josephperrott","Number":"56493","RawContent":null,"Title":"refactor(docs-infra): move windows-chromium-path to adev","State":"closed","Body":"Move windows-chromium-path help from aio to adev\r\n","Url":"https://github.com/angular/angular/pull/56493","RelatedDescription":"Closed or merged PR \"refactor(docs-infra): move windows-chromium-path to adev\" (#56493)"},{"Id":"2360257662","IsPullRequest":false,"CreatedAt":"2024-06-18T16:46:49","Actor":"rush1818","Number":"56495","RawContent":null,"Title":"Missing documentation for InjectionToken","State":"closed","Body":"### Describe the problem that you experienced\n\nangular.dev site is missing the examples for InjectionToken\n\n### Enter the URL of the topic with the problem\n\nhttps://angular.dev/api/core/InjectionToken?tab=usage-notes\n\n### Describe what you were looking for in the documentation\n\nThe examples from the earlier site should be displayed here: https://v17.angular.io/api/core/InjectionToken\n\n### Describe the actions that led you to experience the problem\n\n_No response_\n\n### Describe what you want to experience that would fix the problem\n\n_No response_\n\n### Add a screenshot if that helps illustrate the problem\n\n### Bug:\r\n\r\n![image](https://github.com/angular/angular/assets/17676675/210426a8-3a7a-4c75-9437-7c5120e1ee04)\r\n\r\n\r\n### Working examples in old site:\r\n\r\n![image](https://github.com/angular/angular/assets/17676675/e2f941b8-39b4-409d-9f48-cd4b40438eef)\r\n\n\n### If this problem caused an exception or error, please paste it here\n\n_No response_\n\n### If the problem is browser-specific, please specify the device, OS, browser, and version\n\n_No response_\n\n### Provide any additional information here in as much as detail as you can\n\n_No response_","Url":"https://github.com/angular/angular/issues/56495","RelatedDescription":"Closed issue \"Missing documentation for InjectionToken\" (#56495)"},{"Id":"2360223745","IsPullRequest":true,"CreatedAt":"2024-06-18T16:07:30","Actor":"atscott","Number":"56494","RawContent":null,"Title":"fix(router): Delay the view transition to ensure renders in microtask‚Ä¶","State":"open","Body":"‚Ä¶s complete\r\n\r\nThis commit delays makes two changes:\r\n\r\n* Use the `read` phase for `afterNextRender` hook. We really want to wait for any write hooks to complete before starting the animation\r\n* In addition, wait a macrotask before resolve (really, this makes the above change unnecessary but it's still conceptually the right thing). This ensures any follow-up rendering in the microtask queue is flushed before the animation starts.\r\n\r\nImportant note: This only affects the timing of the animation start, delaying it longer to allow additional rendering/change detections to flush. This promise already resolves in an `afterNextRender` hook and is only used directly by the browser's view transition machinery.\r\n","Url":"https://github.com/angular/angular/pull/56494","RelatedDescription":"Open PR \"fix(router): Delay the view transition to ensure renders in microtask‚Ä¶\" (#56494)"},{"Id":"2360105050","IsPullRequest":false,"CreatedAt":"2024-06-18T15:30:08","Actor":"alaindeurveilher","Number":"56492","RawContent":null,"Title":"Cannot run test with ChromeHeadless in Continuous Integration","State":"closed","Body":"### Which @angular/* package(s) are the source of the bug?\r\n\r\ncore\r\n\r\n### Is this a regression?\r\n\r\nNo\r\n\r\n### Description\r\n\r\nHello,\r\n\r\nI am trying to make my CICD work with GitLab CICD runner, but the test job fails.\r\n\r\nI followed the instructions on the documentation:\r\nhttps://angular.dev/guide/testing#testing-in-continuous-integration\r\n\r\nSo, in my .gitlab-ci.yml I configured my job as so:\r\n\r\n```yml\r\ntest:\r\n  image: artifactory.my-organisation/docker/node:20\r\n  before_script:\r\n    - yarn install\r\n  script:\r\n    - yarn test:cicd\r\n```\r\n\r\nwhere the test script is defined as so in the package.json:\r\n\r\n```json\r\n  \"scripts\": {\r\n    \"test\": \"yarn generate:libs:local && ng test\",\r\n    \"test:once\": \"yarn test --no-watch\",\r\n    \"test:cicd\": \"yarn test:once --no-progress --browsers=ChromeHeadless\",\r\n  },\r\n```\r\n\r\nSo that ultimately the following command in executed in my node container:\r\n`ng test --no-watch --no-progress --browsers=ChromeHeadless`\r\n\r\nBut the job fails with the following error, which is not documented in the testing section of the Angular documentation:\r\n\r\n```\r\nERROR [launcher]: No binary for ChromeHeadless browser on your platform.\r\n  Please, set \"CHROME_BIN\" env variable.\r\nerror Command failed with exit code 1.\r\n```\r\n\r\nWhat would be the correct setup please?\r\n\r\n### Please provide a link to a minimal reproduction of the bug\r\n\r\n_No response_\r\n\r\n### Please provide the exception or error you saw\r\n\r\n```true\r\nERROR [launcher]: No binary for ChromeHeadless browser on your platform.\r\n  Please, set \"CHROME_BIN\" env variable.\r\nerror Command failed with exit code 1.\r\n```\r\n\r\n\r\n### Please provide the environment you discovered this bug in (run `ng version`)\r\n\r\n```true\r\n\"@angular/core\": \"^17.3.11\",\r\n\"karma\": \"~6.4.0\",\r\n\"karma-chrome-launcher\": \"~3.2.0\",\r\n\r\nDocker image: node:20\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\n_No response_","Url":"https://github.com/angular/angular/issues/56492","RelatedDescription":"Closed issue \"Cannot run test with ChromeHeadless in Continuous Integration\" (#56492)"}],"ResultType":"GitHubIssue"},"AngularCli-Issues":{"Issues":[{"Id":"2363421929","IsPullRequest":false,"CreatedAt":"2024-06-20T03:23:37","Actor":"Milldrew","Number":"27884","RawContent":null,"Title":"feature üèó option to generate cfile compatible error file","State":"open","Body":"### Command\n\nserve\n\n### Description\n\n```\r\nng serve --error-file\r\n```\r\n\r\nThis command would generate a file in the root of the angular workspace that would track the current errors\r\n\r\nerror-file.txt\r\n```\r\n/Users/milldrew/readme.txt:2:2:angular error code message\r\n/Users/milldrew/readme.txt:10:2:angular error code message\r\n```\r\n\r\n\r\nwithin vim we could run the cfile command to go directly to the line and column of the error\r\n```\r\n:cfile error-file.txt\r\n```\r\nto read about cfile in vim\r\n```\r\n:h cfile\r\n```\r\nThis will make it easy for vim users to write small vim scripts that handle angular project navigation powerfully\r\n\r\nI can build this feature for the command line and write the docs if this feature is approved. Unless someone else wants to.\r\n\r\nThanks!!\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe alternatives you've considered\n\nI didn't see any existing ways to do this. please let me know if there is. Thanks!","Url":"https://github.com/angular/angular-cli/issues/27884","RelatedDescription":"Open issue \"feature üèó option to generate cfile compatible error file\" (#27884)"},{"Id":"2362631490","IsPullRequest":false,"CreatedAt":"2024-06-19T15:35:03","Actor":"lugogregory","Number":"27883","RawContent":null,"Title":"SchematicTestRunner fail with @angular-devkit/schematics@17.3.8","State":"closed","Body":"### Command\n\ntest\n\n### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n_No response_\n\n### Description\n\nCreated a custom schematic \"hello world\" that runs only the base schematics \"component\" with \"externalSchematics\".\r\n\r\nWhen performing the test, using the \"SchematicTestRunner\" class and executing the \"ng test\" command, multiple errors appear related to the import of \"path\" in different internal libraries\n\n### Minimal Reproduction\n\n1. Download example project from github repository: [(https://github.com/lugogregory/schematics-test)](https://github.com/lugogregory/schematics-test). \r\n2. npm install.\r\n3. npm run test\n\n### Exception or Error\n\n```text\n./node_modules/@angular-devkit/schematics/tasks/package-manager/executor.js:53:26-41 - Error: Module not found: Error: Can't resolve 'path' in 'C:\\Projectos\\test_schematics\\node_modules\\@angular-devkit\\schematics\\tasks\\package-manager'\r\n\r\nBREAKING CHANGE: webpack < 5 used to include polyfills for node.js core modules by default.\r\nThis is no longer the case. Verify if you need this module and configure a polyfill for it.\r\n\r\nIf you want to include a polyfill, you need to:\r\n        - add a fallback 'resolve.fallback: { \"path\": require.resolve(\"path-browserify\") }'\r\n        - install 'path-browserify'\r\nIf you don't want to include a polyfill, you can use an empty module like this:\r\n        resolve.fallback: { \"path\": false }\n```\n\n\n### Your Environment\n\n```text\nAngular CLI: 17.3.8\r\nNode: 20.13.0\r\nPackage Manager: npm 10.5.2\r\nOS: win32 x64\r\n\r\nAngular: 17.3.11\r\n... animations, common, compiler, compiler-cli, core, forms\r\n... platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1703.8\r\n@angular-devkit/build-angular   17.3.8\r\n@angular-devkit/core            17.3.8\r\n@angular-devkit/schematics      17.3.8\r\n@angular/cli                    17.3.8\r\n@schematics/angular             17.3.8\r\nng-packagr                      17.3.0\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.7\n```\n\n\n### Anything else relevant?\n\nTest file example:\r\n```ts\r\nimport {\r\n  SchematicTestRunner,\r\n  UnitTestTree,\r\n} from '@angular-devkit/schematics/testing';\r\n\r\ndescribe('Component Schematic', () => {\r\n  const schematicRunner = new SchematicTestRunner(\r\n    '@schematics/angular',\r\n    require.resolve('../collection.json')\r\n  );\r\n  const defaultOptions = {\r\n    name: 'foo',\r\n    // path: 'src/app',\r\n    inlineStyle: false,\r\n    inlineTemplate: false,\r\n    displayBlock: false,\r\n    type: 'Component',\r\n    skipTests: false,\r\n    module: undefined,\r\n    export: false,\r\n    project: 'bar',\r\n  };\r\n\r\n  const workspaceOptions = {\r\n    name: 'workspace',\r\n    newProjectRoot: 'projects',\r\n    version: '6.0.0',\r\n  };\r\n\r\n  const appOptions = {\r\n    name: 'bar',\r\n    inlineStyle: false,\r\n    inlineTemplate: false,\r\n    routing: false,\r\n    style: 'css',\r\n    skipTests: false,\r\n    skipPackageJson: false,\r\n  };\r\n  let appTree: UnitTestTree;\r\n  beforeEach(async () => {\r\n    appTree = await schematicRunner.runSchematic('workspace', workspaceOptions);\r\n    appTree = await schematicRunner.runSchematic(\r\n      'application',\r\n      appOptions,\r\n      appTree\r\n    );\r\n  });\r\n\r\n  it('should contain a TestBed compileComponents call', async () => {\r\n    const options = { ...defaultOptions };\r\n\r\n    const tree = await schematicRunner.runSchematic('component', options, appTree);\r\n    const tsContent = tree.readContent('/projects/bar/src/app/foo/foo.component.spec.ts');\r\n    expect(tsContent).toContain('compileComponents()');\r\n  });\r\n\r\n  it('should create a component', async () => {\r\n    const options = { ...defaultOptions };\r\n    const tree = await schematicRunner.runSchematic(\r\n      'ui-component',\r\n      options,\r\n      appTree\r\n    );\r\n    const files = tree.files;\r\n    expect(files).toEqual(\r\n      jasmine.arrayContaining([\r\n        '/projects/bar/src/app/foo/foo.component.css',\r\n        '/projects/bar/src/app/foo/foo.component.html',\r\n        '/projects/bar/src/app/foo/foo.component.spec.ts',\r\n        '/projects/bar/src/app/foo/foo.component.ts',\r\n      ])\r\n    );\r\n  });\r\n});\r\n```","Url":"https://github.com/angular/angular-cli/issues/27883","RelatedDescription":"Closed issue \"SchematicTestRunner fail with @angular-devkit/schematics@17.3.8\" (#27883)"},{"Id":"2359995890","IsPullRequest":false,"CreatedAt":"2024-06-19T13:10:32","Actor":"reifi","Number":"27878","RawContent":null,"Title":"Running ng serve with different locale throws runtime error \"$localize is not a function\" when $localize is used in a library (v18.0.4)","State":"closed","Body":"### Command\n\nserve\n\n### Is this a regression?\n\n- [X] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n18.0.3\n\n### Description\n\nAfter upgrading a working i18n app to v18.0.4,\r\nwhen running **ng serve** for a different locale then the base locale like  **ng serve  -buildTarget=app:production,locale-de-AT**,\r\n the runtime error \"`Uncaught TypeError: $localize is not a function`\" \r\n on a line from some <library-file>.mjs  that uses ```$localize `:@@some-id:translation` ``` is thrown in dev console.\r\n \r\nRunning ng serve without special locale with its base locale works fine.\r\n\r\nAlso production build seems to work fine in both versions v18.0.3 and v18.0.4\r\n \r\nng serve in v18.0.4 seems to handle $localize in libraries different.\r\n\r\n\n\n### Minimal Reproduction\n\nThe content of $localize in debugger before throwing the error during ng serve in the affected app:\r\n![image](https://github.com/angular/angular-cli/assets/1433929/56cb26bf-ae75-4ebd-bff5-118eb41e1b0f)\r\n\r\n\r\n### Fresh installed app:\r\n\r\nRunning ng serve on a freshly generated app in v18.0.4 with a different locale works without runtime error, but it is not translated.\r\n\r\nWhen using a library that uses $localize - for example importing a localized string - I get the string in base language\r\n\r\nExample: \r\nAn html containing \r\n`<span i18n=\"@@hello\">Hello</span> - {{library.value_hello}}` \r\nwould be shown in Italian as\r\n`Ciao! - Hello` instead of `Ciao! - Ciao!`\r\n\r\n\r\n\r\n...and that's the point where I gave up for now.\n\n### Exception or Error\n\n```text\nUncaught TypeError: $localize is not a function\n```\n\n\n### Your Environment\n\n```text\nAngular CLI: 18.0.4\r\nNode: 20.13.1\r\nPackage Manager: npm 10.5.2\r\nOS: win32 x64\r\n\r\nAngular: 18.0.3\r\n... animations, cdk, common, compiler, compiler-cli, core, forms\r\n... localize, material, platform-browser\r\n... platform-browser-dynamic, router, upgrade\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1800.4\r\n@angular-devkit/build-angular   18.0.4\r\n@angular-devkit/core            18.0.4\r\n@angular-devkit/schematics      18.0.4\r\n@angular/cli                    18.0.4\r\n@schematics/angular             18.0.4\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.7\n```\n\n\n### Anything else relevant?\n\nlocales config:\r\n```\r\n\"i18n\": {\r\n        \"locales\": {\r\n          \"en-150\": {\r\n            \"translation\": \"src/locale/messages.en-150.xlf\",\r\n            \"baseHref\": \"/non-virtual/en-150/\"\r\n          },\r\n          \"it\": {\r\n            \"translation\": \"src/locale/messages.it.xlf\",\r\n            \"baseHref\": \"/non-virtual/it/\"\r\n          }\r\n        },\r\n        \"sourceLocale\": {\r\n          \"code\": \"de-AT\",\r\n          \"baseHref\": \"/non-virtual/de-AT/\"\r\n        }\r\n      },\r\n...\r\n```\r\nThe build options contain\r\n```\r\n \"polyfills\": [\r\n     \"zone.js\",\r\n    \"@angular/localize/init\"\r\n],\r\n'''","Url":"https://github.com/angular/angular-cli/issues/27878","RelatedDescription":"Closed issue \"Running ng serve with different locale throws runtime error \"$localize is not a function\" when $localize is used in a library (v18.0.4)\" (#27878)"},{"Id":"2360601996","IsPullRequest":true,"CreatedAt":"2024-06-19T07:52:24","Actor":"clydin","Number":"27879","RawContent":null,"Title":"refactor(@angular/cli): remove ora-based spinner from update command ","State":"closed","Body":"The `listr2` dependency that was recently introduced to improve the console\r\nUI for the `ng add` command is now used for the package installation step\r\nof the `ng update` command process.","Url":"https://github.com/angular/angular-cli/pull/27879","RelatedDescription":"Closed or merged PR \"refactor(@angular/cli): remove ora-based spinner from update command \" (#27879)"},{"Id":"2361215209","IsPullRequest":false,"CreatedAt":"2024-06-19T03:57:08","Actor":"doggy8088","Number":"27881","RawContent":null,"Title":"A subresource-integrity issue with `ng build` and `inlineCritical : true`","State":"open","Body":"### Command\n\nbuild\n\n### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n_No response_\n\n### Description\n\nIn `ng build`, there is an option called `subresource-integrity`, it will add `integrity=\"sha384-XXXX\"` attribute to the `<link>` tag.\r\n\r\nIn `ng build`, it will produce the following `<link>` tag to the `<head>` tag:\r\n\r\n```xml\r\n<link rel=\"stylesheet\" href=\"styles.ef46db3751d8e999.css\">\r\n```\r\n\r\nWhen using `ng build --subresource-integrity=true`, it will produce:\r\n\r\n```xml\r\n<link rel=\"stylesheet\" href=\"styles.ef46db3751d8e999.css\" crossorigin=\"anonymous\" integrity=\"sha384-OLBgp1GsljhM2TJ+sbHjaiH9txEUvgdDTAzHv2P24donTt6/529l+9Ua0vFImLlb\">\r\n```\r\n\r\nAt this moment, it's all right.\r\n\r\nThen, add some style to the `src/styles.css` file.\r\n\r\n```css\r\nhtml { position: relative; }\r\n```\r\n\r\nThen all the following settings to `angular.json` in the `projects.demo1.architect.build.configurations.production` section. The `inlineCritical` must be `true`.\r\n\r\n```json\r\n\"optimization\": {\r\n  \"scripts\": true,\r\n  \"styles\": {\r\n    \"minify\": true,\r\n    \"inlineCritical\": true\r\n  },\r\n  \"fonts\": true\r\n}\r\n```\r\n\r\nThen, rebuild the project.\r\n\r\n```sh\r\nng build --subresource-integrity=true\r\n```\r\n\r\nThe `index.html` in the output will contains the following styles in the `<head>` tag:\r\n\r\n```html\r\n<style>html{position:relative}</style>\r\n<link rel=\"stylesheet\" href=\"styles.aba5cd1d749c3b19.css\" crossorigin=\"anonymous\" integrity=\"sha384-j1GsrLo96tLqzfCY+S+0wF8JCmo19babq8N3REzEhTlJi7mdFJ4requAsqDlSKCh\" media=\"print\" onload=\"this.media='all'\">\r\n<noscript><link rel=\"stylesheet\" href=\"styles.aba5cd1d749c3b19.css\"></noscript>\r\n```\r\n\r\nThere are three parts:\r\n\r\n1. An inline style. That's OK.\r\n2. External style with a `integrity` attribute. That's expected. It's OK.\r\n3. The `<noscript>` with a `<link>` was not expected. Also, the `<link>` is lack of a `integrity` attribute. That's unexpected.\n\n### Minimal Reproduction\n\n```sh\r\nng new demo1 --routing --style=css\r\n\r\ncd demo1\r\n\r\necho \"html { position: relative; }\" >> src/styles.css\r\n```\r\n\r\nThen modify your `angular.json` file. Add the following settings to `angular.json` in the `projects.demo1.architect.build.configurations.production` section. The `inlineCritical` must be `true`.\r\n\r\n```json\r\n\"optimization\": {\r\n  \"scripts\": true,\r\n  \"styles\": {\r\n    \"minify\": true,\r\n    \"inlineCritical\": true\r\n  },\r\n  \"fonts\": true\r\n}\r\n```\r\n\r\nThen build your project.\r\n\r\n```sh\r\nng build --subresource-integrity=true -=configuration production\r\n```\r\n\r\nCheck the `dist\\demo1\\index.html` file.\r\n\n\n### Exception or Error\n\n```text\nNo error.\n```\n\n\n### Your Environment\n\n```text\nAngular CLI: 14.2.13\r\nNode: 16.20.2\r\nPackage Manager: npm 8.19.4\r\nOS: win32 x64\r\n\r\nAngular: 14.3.0\r\n... animations, common, compiler, compiler-cli, core, forms\r\n... platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1402.13\r\n@angular-devkit/build-angular   14.2.13\r\n@angular-devkit/core            14.2.13\r\n@angular-devkit/schematics      14.2.13\r\n@angular/cli                    14.2.13\r\n@schematics/angular             14.2.13\r\nrxjs                            7.5.7\r\ntypescript                      4.7.4\n```\n\n\n### Anything else relevant?\n\n_No response_","Url":"https://github.com/angular/angular-cli/issues/27881","RelatedDescription":"Open issue \"A subresource-integrity issue with `ng build` and `inlineCritical : true`\" (#27881)"},{"Id":"2362292865","IsPullRequest":false,"CreatedAt":"2024-06-18T21:49:37","Actor":"ssdeepak","Number":"27882","RawContent":null,"Title":"Snapdragon X Elite Arm / Windows , No native build was found for platform=win32 arch=arm64","State":"open","Body":"### Which @angular/* package(s) are the source of the bug?\n\ncompiler, core, Don't known / other\n\n### Is this a regression?\n\nYes\n\n### Description\n\n I tried Angular 18 on my  new Snapdragon X Elite\r\n\r\nWhen I try to run the project from VSCode I get this error. \r\nNo native build was found for platform=win32 arch=arm64 runtime=node abi=127 uv=1 armv=8 libc=glibc node=22.3.0\r\n    attempted loading from: D:\\Junk\\my-app\\node_modules\\lmdb and package: @lmdb/lmdb-win32-arm64\r\n \n\n### Please provide a link to a minimal reproduction of the bug\n\n_No response_\n\n### Please provide the exception or error you saw\n\n```true\nng serve --o\r\nApplication bundle generation failed. [0.406 seconds]\r\n\r\nX [ERROR] No native build was found for platform=win32 arch=arm64 runtime=node abi=127 uv=1 armv=8 libc=glibc node=22.3.0\r\n    attempted loading from: D:\\Junk\\my-app\\node_modules\\lmdb and package: @lmdb/lmdb-win32-arm64\r\n [plugin angular-compiler]\n```\n\n\n### Please provide the environment you discovered this bug in (run `ng version`)\n\n```true\nAngular CLI: 18.0.4\r\nNode: 22.3.0\r\nPackage Manager: npm 10.8.1\r\nOS: win32 arm64\r\n\r\nAngular: 18.0.3\r\n... animations, common, compiler, compiler-cli, core, forms\r\n... platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1800.4\r\n@angular-devkit/build-angular   18.0.4\r\n@angular-devkit/core            18.0.4\r\n@angular-devkit/schematics      18.0.4\r\n@angular/cli                    18.0.4\r\n@schematics/angular             18.0.4\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.7\n```\n\n\n### Anything else?\n\nReact JS works Fine on the same platform ","Url":"https://github.com/angular/angular-cli/issues/27882","RelatedDescription":"Open issue \"Snapdragon X Elite Arm / Windows , No native build was found for platform=win32 arch=arm64\" (#27882)"},{"Id":"2360708430","IsPullRequest":false,"CreatedAt":"2024-06-18T21:09:48","Actor":"baileympearson","Number":"27880","RawContent":null,"Title":"SSR compiled code throws when loading whatwg-url package","State":"closed","Body":"### Command\n\nbuild\n\n### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n_No response_\n\n### Description\n\nThe `whatwg-url` package throws an error if it is required in the source code that the Angular compiler compiles for SSR.  This arose in https://github.com/jsdom/whatwg-url/issues/274 and https://jira.mongodb.org/browse/NODE-6210.\r\n\r\nI believe the problem is the Angular compiler generating a SSR bundle, because this:\r\n\r\n```typescript\r\nconst AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(async function* () {}).prototype);\r\n```\r\n\r\nturns into \r\n\r\n```typescript\r\n    var AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(function() {\r\n      return __asyncGenerator(this, null, function* () {\r\n      });\r\n    }).prototype);\r\n```\r\n\r\nonly when I run `npm run build` using the ng compiler (see the example repro).  Compiling the TS doesn't perform this transformation.\r\n\r\nRegardless, `Object.getPrototypeOf(function() {\r\n      return __asyncGenerator(this, null, function* () {\r\n      });\r\n    })` returns undefined when using Angular SSR and the the code throws a type error.\n\n### Minimal Reproduction\n\nI created a reproduction that's a lightly modified version of the starter template (`npx @angular/cli new app-name-mongodb`, enable SSR).\r\n\r\nClone https://github.com/baileympearson/angularssr-whatwg-url-repro.\r\nInstall deps (`npm install`).\r\nBuild the project (`npm run watch` or `npm run build`).\r\nAttempt to serve the project (`npm run serve:ssr:app-name-mongodb`).\n\n### Exception or Error\n\n```text\nfile:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/server.mjs:31422\r\n    var AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(function() {\r\n                                        ^\r\n\r\nTypeError: Cannot convert undefined or null to object\r\n    at Function.getPrototypeOf (<anonymous>)\r\n    at node_modules/whatwg-url/lib/utils.js (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/server.mjs:31422:41)\r\n    at __require2 (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/chunk-YBYOXPTQ.mjs:51:50)\r\n    at node_modules/whatwg-url/lib/URL.js (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/server.mjs:34219:17)\r\n    at __require2 (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/chunk-YBYOXPTQ.mjs:51:50)\r\n    at node_modules/whatwg-url/webidl2js-wrapper.js (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/server.mjs:34593:16)\r\n    at __require2 (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/chunk-YBYOXPTQ.mjs:51:50)\r\n    at node_modules/whatwg-url/index.js (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/server.mjs:34604:42)\r\n    at __require2 (file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/chunk-YBYOXPTQ.mjs:51:50)\r\n    at file:///Users/bailey.pearson/dev/app-name-mongodb/dist/app-name-mongodb/server/server.mjs:40427:1\n```\n\n\n### Your Environment\n\n```text\n18.0.4\n```\n\n\n### Anything else relevant?\n\n_No response_","Url":"https://github.com/angular/angular-cli/issues/27880","RelatedDescription":"Closed issue \"SSR compiled code throws when loading whatwg-url package\" (#27880)"},{"Id":"2359946497","IsPullRequest":true,"CreatedAt":"2024-06-18T14:23:51","Actor":"clydin","Number":"27876","RawContent":null,"Title":"fix(@angular/build): use Node.js available parallelism for default worker count","State":"closed","Body":"The Node.js `os.availableParallelism` API now provides more accurate values when used within containers such as many CI environments. This provides a better default when using resource limited CI setups. The value is still set to a maximum default of four. However, the `NG_BUILD_MAX_WORKERS` environment variable can be used to set the value to an explicit value if required.","Url":"https://github.com/angular/angular-cli/pull/27876","RelatedDescription":"Closed or merged PR \"fix(@angular/build): use Node.js available parallelism for default worker count\" (#27876)"},{"Id":"2359960185","IsPullRequest":true,"CreatedAt":"2024-06-18T14:13:38","Actor":"clydin","Number":"27877","RawContent":null,"Title":"fix(@angular-devkit/build-angular): use istanbul-lib-instrument directly for karma code coverage","State":"closed","Body":"The `istanbul-lib-instrument` package provides the required functionality needed to instrument code for test coverage within the context of the Angular CLI. Since the build pipeline already contains a customized babel preset, this package can be integrated directly into the pipeline.\r\nThis reduces the number of dependencies required for `@angular-devkit/build-angular` including the deprecated `inflight` package.\r\n\r\n(cherry picked from commit fb2981dc4e0ac21f5389bb3b36d5853f8580e5a6)","Url":"https://github.com/angular/angular-cli/pull/27877","RelatedDescription":"Closed or merged PR \"fix(@angular-devkit/build-angular): use istanbul-lib-instrument directly for karma code coverage\" (#27877)"},{"Id":"2359765250","IsPullRequest":true,"CreatedAt":"2024-06-18T13:57:00","Actor":"alan-agius4","Number":"27875","RawContent":null,"Title":"fix(@angular/build): add CSP nonce to script with src tags","State":"closed","Body":"Prior to this change, script tags with the `src` attribute were not being assigned a CSP nonce during the build process. This is useful strict-dynamic is a Content Security Policy (CSP) directive that simplifies the management of dynamically loaded scripts while maintaining a high level of security. It allows scripts that are initially trusted (through a nonce or hash) to load other scripts without additional restrictions.\r\n\r\nCloses #27874\r\n","Url":"https://github.com/angular/angular-cli/pull/27875","RelatedDescription":"Closed or merged PR \"fix(@angular/build): add CSP nonce to script with src tags\" (#27875)"},{"Id":"2359319461","IsPullRequest":false,"CreatedAt":"2024-06-18T09:16:56","Actor":"pfeileon","Number":"27872","RawContent":null,"Title":"Migrating to ESBuild breaks SASS imports with \"~\" (tilde)","State":"closed","Body":"### Command\r\n\r\nbuild, test\r\n\r\n### Is this a regression?\r\n\r\nUnknown\r\n\r\n### Description\r\n\r\nWhen migrating to the new build system, \"\\~\" (tilde) is no longer supported, which is fine, I guess.\r\nBut when you remove the \"\\~\" the test build fails: https://github.com/fontsource/fontsource/issues/798#issuecomment-2166824082\r\n\r\n### Minimal Reproduction\r\n\r\ns. OP in linked issue for reproduction\r\n[EDIT] or simply set up an Angular 17 project and migrate it to 18 with the new build option selected. Then install `npm i @fontsource/roboto` and include the SASS mixin in your project.\r\n\r\n### Exception or Error\r\n\r\n```text\r\n./src/styles.scss - Error: Module Error (from ./node_modules/postcss-loader/dist/cjs.js):\r\n/home/pfeileon/git/my-app/node_modules/@fontsource/roboto/scss/mixins.scss:189:6: Can't resolve '../node_modules/@fontsource/roboto/scss/@fontsource/roboto/files/roboto-cyrillic-ext-300-normal.woff' in '/home/pfeileon/git/my-app/src'\r\n```\r\n\r\n\r\n### Your Environment\r\n\r\n```text\r\nAngular CLI: 18.0.4\r\nNode: 20.12.2\r\nPackage Manager: npm 10.5.0\r\nOS: linux x64\r\n\r\nAngular: 18.0.3\r\n... animations, cdk, common, compiler, compiler-cli, core, forms\r\n... material, platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1800.4\r\n@angular-devkit/build-angular   18.0.4\r\n@angular-devkit/core            18.0.4\r\n@angular-devkit/schematics      18.0.4\r\n@angular/cli                    18.0.4\r\n@schematics/angular             18.0.4\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.6\r\n```\r\n","Url":"https://github.com/angular/angular-cli/issues/27872","RelatedDescription":"Closed issue \"Migrating to ESBuild breaks SASS imports with \"~\" (tilde)\" (#27872)"},{"Id":"2359365881","IsPullRequest":true,"CreatedAt":"2024-06-18T09:15:14","Actor":"angular-robot","Number":"27873","RawContent":null,"Title":"build: update all non-major dependencies","State":"open","Body":"This PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| [@inquirer/confirm](https://togithub.com/SBoudrias/Inquirer.js/blob/master/packages/confirm/README.md) ([source](https://togithub.com/SBoudrias/Inquirer.js)) | dependencies | patch | [`3.1.9` -> `3.1.10`](https://renovatebot.com/diffs/npm/@inquirer%2fconfirm/3.1.9/3.1.10) |\n| [@inquirer/confirm](https://togithub.com/SBoudrias/Inquirer.js/blob/master/packages/confirm/README.md) ([source](https://togithub.com/SBoudrias/Inquirer.js)) | devDependencies | patch | [`3.1.9` -> `3.1.10`](https://renovatebot.com/diffs/npm/@inquirer%2fconfirm/3.1.9/3.1.10) |\n| [@inquirer/prompts](https://togithub.com/SBoudrias/Inquirer.js/blob/master/packages/prompts/README.md) ([source](https://togithub.com/SBoudrias/Inquirer.js)) | dependencies | patch | [`5.0.5` -> `5.0.6`](https://renovatebot.com/diffs/npm/@inquirer%2fprompts/5.0.5/5.0.6) |\n| [@inquirer/prompts](https://togithub.com/SBoudrias/Inquirer.js/blob/master/packages/prompts/README.md) ([source](https://togithub.com/SBoudrias/Inquirer.js)) | devDependencies | patch | [`5.0.5` -> `5.0.6`](https://renovatebot.com/diffs/npm/@inquirer%2fprompts/5.0.5/5.0.6) |\n| [@listr2/prompt-adapter-inquirer](https://togithub.com/listr2/listr2) | dependencies | patch | [`2.0.11` -> `2.0.12`](https://renovatebot.com/diffs/npm/@listr2%2fprompt-adapter-inquirer/2.0.11/2.0.12) |\n| [@listr2/prompt-adapter-inquirer](https://togithub.com/listr2/listr2) | devDependencies | patch | [`2.0.11` -> `2.0.12`](https://renovatebot.com/diffs/npm/@listr2%2fprompt-adapter-inquirer/2.0.11/2.0.12) |\n| [listr2](https://togithub.com/listr2/listr2) | dependencies | patch | [`8.2.1` -> `8.2.2`](https://renovatebot.com/diffs/npm/listr2/8.2.1/8.2.2) |\n| [listr2](https://togithub.com/listr2/listr2) | devDependencies | patch | [`8.2.1` -> `8.2.2`](https://renovatebot.com/diffs/npm/listr2/8.2.1/8.2.2) |\n| [piscina](https://togithub.com/piscinajs/piscina) | dependencies | minor | [`4.5.1` -> `4.6.0`](https://renovatebot.com/diffs/npm/piscina/4.5.1/4.6.0) |\n| [piscina](https://togithub.com/piscinajs/piscina) | devDependencies | minor | [`4.5.1` -> `4.6.0`](https://renovatebot.com/diffs/npm/piscina/4.5.1/4.6.0) |\n| [undici](https://undici.nodejs.org) ([source](https://togithub.com/nodejs/undici)) | dependencies | patch | [`6.19.1` -> `6.19.2`](https://renovatebot.com/diffs/npm/undici/6.19.1/6.19.2) |\n| [undici](https://undici.nodejs.org) ([source](https://togithub.com/nodejs/undici)) | devDependencies | patch | [`6.19.1` -> `6.19.2`](https://renovatebot.com/diffs/npm/undici/6.19.1/6.19.2) |\n| [webpack](https://togithub.com/webpack/webpack) | devDependencies | patch | [`5.92.0` -> `5.92.1`](https://renovatebot.com/diffs/npm/webpack/5.92.0/5.92.1) |\n| [webpack](https://togithub.com/webpack/webpack) | dependencies | patch | [`5.92.0` -> `5.92.1`](https://renovatebot.com/diffs/npm/webpack/5.92.0/5.92.1) |\n\n---\n\n### Release Notes\n\n<details>\n<summary>SBoudrias/Inquirer.js (@&#8203;inquirer/confirm)</summary>\n\n### [`v3.1.10`](https://togithub.com/SBoudrias/Inquirer.js/compare/@inquirer/confirm@3.1.9...@inquirer/confirm@3.1.10)\n\n[Compare Source](https://togithub.com/SBoudrias/Inquirer.js/compare/@inquirer/confirm@3.1.9...@inquirer/confirm@3.1.10)\n\n</details>\n\n<details>\n<summary>listr2/listr2 (@&#8203;listr2/prompt-adapter-inquirer)</summary>\n\n### [`v2.0.12`](https://togithub.com/listr2/listr2/releases/tag/%40listr2/prompt-adapter-inquirer%402.0.12)\n\n[Compare Source](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.11...@listr2/prompt-adapter-inquirer@2.0.12)\n\n##### [@&#8203;listr2/prompt-adapter-inquirer](https://togithub.com/listr2/prompt-adapter-inquirer) [2.0.12](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.11...@listr2/prompt-adapter-inquirer@2.0.12) (2024-06-19)\n\n##### Bug Fixes\n\n-   **deps:** update dependencies ([642d3f7](https://togithub.com/listr2/listr2/commit/642d3f7c326a53f702968b75c1ca39f2a183dbd9))\n\n##### Dependencies\n\n-   **listr2:** upgraded to 8.2.2\n\n</details>\n\n<details>\n<summary>piscinajs/piscina (piscina)</summary>\n\n### [`v4.6.0`](https://togithub.com/piscinajs/piscina/blob/HEAD/CHANGELOG.md#460-2024-06-18)\n\n[Compare Source](https://togithub.com/piscinajs/piscina/compare/v4.5.1...v4.6.0)\n\n##### Features\n\n-   expose task interface ([#&#8203;565](https://togithub.com/piscinajs/piscina/issues/565)) ([285aa82](https://togithub.com/piscinajs/piscina/commit/285aa82b45cfb1f33210812c441c83a44c78ed34))\n\n##### Bug Fixes\n\n-   close pool with minThreads=0 ([#&#8203;584](https://togithub.com/piscinajs/piscina/issues/584)) ([776bacb](https://togithub.com/piscinajs/piscina/commit/776bacbebbc7f3adcde767a7dfada574da58bfe6))\n\n##### [4.5.1](https://togithub.com/piscinajs/piscina/compare/v4.5.0...v4.5.1) (2024-05-22)\n\n##### Bug Fixes\n\n-   support nodejs v16.x again ([#&#8203;572](https://togithub.com/piscinajs/piscina/issues/572)) ([d50391f](https://togithub.com/piscinajs/piscina/commit/d50391fe93a6319c2a554f34d39cce0c946564ec))\n\n</details>\n\n<details>\n<summary>nodejs/undici (undici)</summary>\n\n### [`v6.19.2`](https://togithub.com/nodejs/undici/releases/tag/v6.19.2)\n\n[Compare Source](https://togithub.com/nodejs/undici/compare/v6.19.1...v6.19.2)\n\n##### What's Changed\n\n-   fix [#&#8203;3337](https://togithub.com/nodejs/undici/issues/3337) by [@&#8203;KhafraDev](https://togithub.com/KhafraDev) in [https://github.com/nodejs/undici/pull/3338](https://togithub.com/nodejs/undici/pull/3338)\n-   build: use `husky` as `husky install` is deprecated by [@&#8203;jazelly](https://togithub.com/jazelly) in [https://github.com/nodejs/undici/pull/3340](https://togithub.com/nodejs/undici/pull/3340)\n-   fix: interceptors.d.ts has no default export by [@&#8203;Uzlopak](https://togithub.com/Uzlopak) in [https://github.com/nodejs/undici/pull/3332](https://togithub.com/nodejs/undici/pull/3332)\n\n**Full Changelog**: https://github.com/nodejs/undici/compare/v6.19.1...v6.19.2\n\n</details>\n\n<details>\n<summary>webpack/webpack (webpack)</summary>\n\n### [`v5.92.1`](https://togithub.com/webpack/webpack/releases/tag/v5.92.1)\n\n[Compare Source](https://togithub.com/webpack/webpack/compare/v5.92.0...v5.92.1)\n\n##### Bug Fixes\n\n-   Doesn't crash with an error when the css experiment is enabled and contenthash is used\n\n</details>\n\n---\n\n### Configuration\n\nüìÖ **Schedule**: Branch creation - \"after 10:00pm every weekday,before 4:00am every weekday,every weekend\" in timezone America/Tijuana, Automerge - At any time (no schedule defined).\n\nüö¶ **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\nüëª **Immortal**: This PR will be recreated if closed unmerged. Get [config help](https://togithub.com/angular/dev-infra) if that's undesired.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Renovate Bot](https://togithub.com/renovatebot/renovate).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy40MTAuMSIsInVwZGF0ZWRJblZlciI6IjM3LjQxMC4xIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJhY3Rpb246IG1lcmdlIiwidGFyZ2V0OiBtaW5vciJdfQ==-->\n","Url":"https://github.com/angular/angular-cli/pull/27873","RelatedDescription":"Open PR \"build: update all non-major dependencies\" (#27873)"},{"Id":"2358921066","IsPullRequest":true,"CreatedAt":"2024-06-18T07:41:37","Actor":"angular-robot","Number":"27870","RawContent":null,"Title":"build: update all non-major dependencies","State":"closed","Body":"This PR contains the following updates:\n\n| Package | Type | Update | Change |\n|---|---|---|---|\n| [@listr2/prompt-adapter-inquirer](https://togithub.com/listr2/listr2) | dependencies | patch | [`2.0.8` -> `2.0.11`](https://renovatebot.com/diffs/npm/@listr2%2fprompt-adapter-inquirer/2.0.8/2.0.11) |\n| [@listr2/prompt-adapter-inquirer](https://togithub.com/listr2/listr2) | devDependencies | patch | [`2.0.8` -> `2.0.11`](https://renovatebot.com/diffs/npm/@listr2%2fprompt-adapter-inquirer/2.0.8/2.0.11) |\n| [@typescript-eslint/eslint-plugin](https://typescript-eslint.io/packages/eslint-plugin) ([source](https://togithub.com/typescript-eslint/typescript-eslint/tree/HEAD/packages/eslint-plugin)) | devDependencies | patch | [`7.13.0` -> `7.13.1`](https://renovatebot.com/diffs/npm/@typescript-eslint%2feslint-plugin/7.13.0/7.13.1) |\n| [@typescript-eslint/parser](https://typescript-eslint.io/packages/parser) ([source](https://togithub.com/typescript-eslint/typescript-eslint/tree/HEAD/packages/parser)) | devDependencies | patch | [`7.13.0` -> `7.13.1`](https://renovatebot.com/diffs/npm/@typescript-eslint%2fparser/7.13.0/7.13.1) |\n| [sass](https://togithub.com/sass/dart-sass) | dependencies | patch | [`1.77.5` -> `1.77.6`](https://renovatebot.com/diffs/npm/sass/1.77.5/1.77.6) |\n| [sass](https://togithub.com/sass/dart-sass) | devDependencies | patch | [`1.77.5` -> `1.77.6`](https://renovatebot.com/diffs/npm/sass/1.77.5/1.77.6) |\n| [undici](https://undici.nodejs.org) ([source](https://togithub.com/nodejs/undici)) | dependencies | patch | [`6.19.0` -> `6.19.1`](https://renovatebot.com/diffs/npm/undici/6.19.0/6.19.1) |\n| [undici](https://undici.nodejs.org) ([source](https://togithub.com/nodejs/undici)) | devDependencies | patch | [`6.19.0` -> `6.19.1`](https://renovatebot.com/diffs/npm/undici/6.19.0/6.19.1) |\n\n---\n\n### Release Notes\n\n<details>\n<summary>listr2/listr2 (@&#8203;listr2/prompt-adapter-inquirer)</summary>\n\n### [`v2.0.11`](https://togithub.com/listr2/listr2/releases/tag/%40listr2/prompt-adapter-inquirer%402.0.11)\n\n[Compare Source](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.10...@listr2/prompt-adapter-inquirer@2.0.11)\n\n##### [@&#8203;listr2/prompt-adapter-inquirer](https://togithub.com/listr2/prompt-adapter-inquirer) [2.0.11](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.10...@listr2/prompt-adapter-inquirer@2.0.11) (2024-06-04)\n\n##### Bug Fixes\n\n-   **deps:** update dependency [@&#8203;inquirer/type](https://togithub.com/inquirer/type) to ^1.3.3 ([4fb2b91](https://togithub.com/listr2/listr2/commit/4fb2b91cf313475056dbd92c5148ac25f0a4dbaa))\n\n### [`v2.0.10`](https://togithub.com/listr2/listr2/releases/tag/%40listr2/prompt-adapter-inquirer%402.0.10)\n\n[Compare Source](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.9...@listr2/prompt-adapter-inquirer@2.0.10)\n\n##### [@&#8203;listr2/prompt-adapter-inquirer](https://togithub.com/listr2/prompt-adapter-inquirer) [2.0.10](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.9...@listr2/prompt-adapter-inquirer@2.0.10) (2024-05-17)\n\n##### Bug Fixes\n\n-   **prompt-adapter-inquirer:** update underlying dependencies ([e9a141e](https://togithub.com/listr2/listr2/commit/e9a141e9a9c3eab71b34b2a1e392a9e1650b79ff))\n\n### [`v2.0.9`](https://togithub.com/listr2/listr2/releases/tag/%40listr2/prompt-adapter-inquirer%402.0.9)\n\n[Compare Source](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.8...@listr2/prompt-adapter-inquirer@2.0.9)\n\n##### [@&#8203;listr2/prompt-adapter-inquirer](https://togithub.com/listr2/prompt-adapter-inquirer) [2.0.9](https://togithub.com/listr2/listr2/compare/@listr2/prompt-adapter-inquirer@2.0.8...@listr2/prompt-adapter-inquirer@2.0.9) (2024-04-26)\n\n##### Bug Fixes\n\n-   **deps:** update dependency [@&#8203;inquirer/type](https://togithub.com/inquirer/type) to ^1.3.1 ([b56f6f2](https://togithub.com/listr2/listr2/commit/b56f6f2d2af0383241f81df77e7cf642d43831ac))\n\n</details>\n\n<details>\n<summary>typescript-eslint/typescript-eslint (@&#8203;typescript-eslint/eslint-plugin)</summary>\n\n### [`v7.13.1`](https://togithub.com/typescript-eslint/typescript-eslint/blob/HEAD/packages/eslint-plugin/CHANGELOG.md#7131-2024-06-17)\n\n[Compare Source](https://togithub.com/typescript-eslint/typescript-eslint/compare/v7.13.0...v7.13.1)\n\n##### ü©π Fixes\n\n-   **eslint-plugin:** \\[prefer-readonly] refine report locations\n\n-   **eslint-plugin:** \\[return-await] support explicit resource management\n\n-   **eslint-plugin:** \\[no-unsafe-member-access] differentiate a types-error any from a true any\n\n##### ‚ù§Ô∏è  Thank You\n\n-   Kirk Waiblinger\n-   Yukihiro Hasegawa\n\nYou can read about our [versioning strategy](https://main--typescript-eslint.netlify.app/users/versioning) and [releases](https://main--typescript-eslint.netlify.app/users/releases) on our website.\n\n</details>\n\n<details>\n<summary>typescript-eslint/typescript-eslint (@&#8203;typescript-eslint/parser)</summary>\n\n### [`v7.13.1`](https://togithub.com/typescript-eslint/typescript-eslint/blob/HEAD/packages/parser/CHANGELOG.md#7131-2024-06-17)\n\n[Compare Source](https://togithub.com/typescript-eslint/typescript-eslint/compare/v7.13.0...v7.13.1)\n\nThis was a version bump only for parser to align it with other projects, there were no code changes.\n\nYou can read about our [versioning strategy](https://main--typescript-eslint.netlify.app/users/versioning) and [releases](https://main--typescript-eslint.netlify.app/users/releases) on our website.\n\n</details>\n\n<details>\n<summary>sass/dart-sass (sass)</summary>\n\n### [`v1.77.6`](https://togithub.com/sass/dart-sass/blob/HEAD/CHANGELOG.md#1776)\n\n[Compare Source](https://togithub.com/sass/dart-sass/compare/1.77.5...1.77.6)\n\n-   Fix a few cases where comments and occasionally even whitespace wasn't allowed\n    between the end of Sass statements and the following semicolon.\n\n</details>\n\n<details>\n<summary>nodejs/undici (undici)</summary>\n\n### [`v6.19.1`](https://togithub.com/nodejs/undici/releases/tag/v6.19.1)\n\n[Compare Source](https://togithub.com/nodejs/undici/compare/v6.19.0...v6.19.1)\n\n##### What's Changed\n\n-   don't append empty origin by [@&#8203;KhafraDev](https://togithub.com/KhafraDev) in [https://github.com/nodejs/undici/pull/3335](https://togithub.com/nodejs/undici/pull/3335)\n\n**Full Changelog**: https://github.com/nodejs/undici/compare/v6.19.0...v6.19.1\n\n</details>\n\n---\n\n### Configuration\n\nüìÖ **Schedule**: Branch creation - \"after 10:00pm every weekday,before 4:00am every weekday,every weekend\" in timezone America/Tijuana, Automerge - At any time (no schedule defined).\n\nüö¶ **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\nüëª **Immortal**: This PR will be recreated if closed unmerged. Get [config help](https://togithub.com/angular/dev-infra) if that's undesired.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Renovate Bot](https://togithub.com/renovatebot/renovate).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy40MTAuMSIsInVwZGF0ZWRJblZlciI6IjM3LjQxMC4xIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJhY3Rpb246IG1lcmdlIiwidGFyZ2V0OiBtaW5vciJdfQ==-->\n","Url":"https://github.com/angular/angular-cli/pull/27870","RelatedDescription":"Closed or merged PR \"build: update all non-major dependencies\" (#27870)"},{"Id":"2358113787","IsPullRequest":true,"CreatedAt":"2024-06-18T07:39:07","Actor":"josephperrott","Number":"27868","RawContent":null,"Title":"ci: remove ci testing push trigger","State":"closed","Body":"Remove ci testing pushing trigger as it no longer will work in the future and is unnecessary\r\n","Url":"https://github.com/angular/angular-cli/pull/27868","RelatedDescription":"Closed or merged PR \"ci: remove ci testing push trigger\" (#27868)"},{"Id":"2357726619","IsPullRequest":true,"CreatedAt":"2024-06-18T07:38:57","Actor":"clydin","Number":"27867","RawContent":null,"Title":"refactor(@angular/cli): remove direct use of ansi-colors package","State":"closed","Body":"The newly introduced `listr2` dependency used for the updated `ng add` console UI provides color support. This removes the need to retain a direct dependency on a color package within the `@angular/cli`.","Url":"https://github.com/angular/angular-cli/pull/27867","RelatedDescription":"Closed or merged PR \"refactor(@angular/cli): remove direct use of ansi-colors package\" (#27867)"},{"Id":"2355454282","IsPullRequest":false,"CreatedAt":"2024-06-18T07:26:40","Actor":"mazlano27","Number":"27861","RawContent":null,"Title":"ng-deploy's browserTarget and prerender's browserTarget do not match. Please check your angular.json","State":"closed","Body":"### Which @angular/* package(s) are the source of the bug?\r\n\r\nDon't known / other\r\n\r\n### Is this a regression?\r\n\r\nYes\r\n\r\n### Description\r\n\r\nI update my angular project with firebase to v18. When I run ng deploy, I get the below error. Reverting back to angular v17 fixed the error.\r\n\r\n### Please provide a link to a minimal reproduction of the bug\r\n\r\n_No response_\r\n\r\n### Please provide the exception or error you saw\r\n\r\n```true\r\nng-deploy's browserTarget and prerender's browserTarget do not match. Please check your angular.json\r\n```\r\n\r\n\r\n### Please provide the environment you discovered this bug in (run `ng version`)\r\n\r\n```true\r\nAngular CLI: 18.0.4\r\nNode: 20.9.0\r\nPackage Manager: npm 10.8.1\r\nOS: darwin arm64\r\n\r\nAngular: 18.0.3\r\n... animations, cdk, common, compiler, compiler-cli, core, forms\r\n... material, platform-browser, platform-browser-dynamic\r\n... platform-server, router, service-worker\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1800.4\r\n@angular-devkit/build-angular   18.0.4\r\n@angular-devkit/core            18.0.4\r\n@angular-devkit/schematics      18.0.4\r\n@angular/cli                    18.0.4\r\n@angular/fire                   18.0.1\r\n@angular/ssr                    18.0.4\r\n@schematics/angular             18.0.4\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.7\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\n_No response_","Url":"https://github.com/angular/angular-cli/issues/27861","RelatedDescription":"Closed issue \"ng-deploy's browserTarget and prerender's browserTarget do not match. Please check your angular.json\" (#27861)"},{"Id":"2359101491","IsPullRequest":false,"CreatedAt":"2024-06-18T07:04:56","Actor":"grapehunter","Number":"27871","RawContent":null,"Title":"Issues with independently using @ngtools/webpack to load loader.","State":"open","Body":"### Command\n\nbuild\n\n### Description\n\n## Issues with @ngtools/webpack\r\nI found some drawbacks when using additional loaders independently with @ngtools/webpack, detached from angular-cli. Please see the minimal example using ifdef-loader (https://stackblitz.com/~/github.com/grapehunter/ngtool_webpack_show):\r\n\r\n**webpack.config.json**\r\n```javascript\r\nmodule.exports = (env) => {\r\n    ...\r\n    module: {\r\n      rules: [\r\n        {\r\n          test: /\\.[cm]?[tj]sx?$/,\r\n          resolve: { fullySpecified: false },\r\n          exclude:\r\n            /[\\\\/]node_modules[/\\\\](?:core-js|@babel|tslib|web-animations-js|web-streams-polyfill|whatwg-url)[/\\\\]/,\r\n          use: [\r\n            { loader: \"ifdef-loader\", options: { DEBUG: !isProduction } }, \r\n            { loader: path.resolve(__dirname, \"./scripts/trace-loader.cjs\") }, // log source code in pipeline\r\n            {\r\n              loader: \"@ngtools/webpack\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n    ...\r\n}\r\n```\r\n**index.ts**\r\n```ts\r\n...\r\n/// #if DEBUG\r\nalert(\"Running in development mode!\");\r\n/// #else\r\nalert(\"Running in production mode!\");\r\n/// #endif\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  standalone: true,\r\n  /// #if DEBUG\r\n  template: ` <h1>Hello from development!</h1> `,\r\n  /// #else\r\n  // @ts-ignore\r\n  template: ` <h1>Hello from production!</h1> `,\r\n  /// #endif\r\n})\r\nexport class App {}\r\n\r\nbootstrapApplication(App, {\r\n  providers: [provideExperimentalZonelessChangeDetection()],\r\n});\r\n\r\n```\r\n1. If the example code is executed first by @ngtools/webpack (AngularWebpackPlugin), then the code processed by @ngtools/webpack is printed out as follows through trace-loader.cjs:\r\n```ts\r\n/// #if DEBUG\r\nalert(\"Running in development mode!\");\r\n/// #else\r\nalert(\"Running in production mode!\");\r\n/// #endif\r\nexport class App {\r\n}\r\nApp.…µfac = function App_Factory(t) { return new (t || App)(); };\r\nApp.…µcmp = /*@__PURE__*/ i0.…µ…µdefineComponent({ type: App, selectors: [[\"app-root\"]], standalone: true, features: [i0.…µ…µStandaloneFeature], decls: 2, vars: 0, template: function App_Template(rf, ctx) { if (rf & 1) {\r\n        i0.…µ…µelementStart(0, \"h1\");\r\n        i0.…µ…µtext(1, \"Hello from production!\");\r\n        i0.…µ…µelementEnd();\r\n    } }, encapsulation: 2 });\r\nbootstrapApplication(App, {\r\n    providers: [provideExperimentalZonelessChangeDetection()],\r\n});\r\n```\r\nAs you can see, after @ngtools/webpack compilation, the commented code within the @Component scope disappears. Thus, when ifdef-loader receives the code, it cannot process the second /// #if DEBUG in main.ts, leading to incorrect page output (`Hello from production!` instead of the correct `Hello from development!`).\r\n\r\n2. If { loader: \"ifdef-loader\", options: { DEBUG: !isProduction } } is placed below @ngtools/webpack, i.e., ifdef-loader is executed first and then @ngtools/webpack. Since @ngtools/webpack internally loads source files from the path, not through the loader pipeline, the final compiled result will ignore any changes made by ifdef-loader to the code.\r\nHere is an example of an incorrectly executed project: https://stackblitz.com/~/github.com/grapehunter/ngtool_webpack_show\n\n### Describe the solution you'd like\n\n## The modification method I am currently using\r\nI currently preprocess the code by patching the AngularWebpackPlugin configuration parameters of @ngtools/webpack to add a sourceModifier. \r\nThe patch file is as follows:\r\n```patch\r\ndiff --git a/node_modules/@ngtools/webpack/src/ivy/plugin.js b/node_modules/@ngtools/webpack/src/ivy/plugin.js\r\nindex 9c970d0..8c00f1f 100644\r\n--- a/node_modules/@ngtools/webpack/src/ivy/plugin.js\r\n+++ b/node_modules/@ngtools/webpack/src/ivy/plugin.js\r\n@@ -139,7 +139,7 @@ class AngularWebpackPlugin {\r\n         // Webpack lacks an InputFileSytem type definition with sync functions\r\n-        compiler.inputFileSystem, (0, paths_1.normalizePath)(compiler.context));\r\n+        compiler.inputFileSystem, (0, paths_1.normalizePath)(compiler.context), this.pluginOptions.sourceModifier ?? []);\r\n         const host = ts.createIncrementalCompilerHost(compilerOptions, system);\r\n         // Setup source file caching and reuse cache from previous compilation if present\r\n         let cache = this.sourceFileCache;\r\ndiff --git a/node_modules/@ngtools/webpack/src/ivy/system.js b/node_modules/@ngtools/webpack/src/ivy/system.js\r\nindex d86681b..4ba03b6 100644\r\n--- a/node_modules/@ngtools/webpack/src/ivy/system.js\r\n+++ b/node_modules/@ngtools/webpack/src/ivy/system.js\r\n@@ -36,7 +36,7 @@ const paths_1 = require(\"./paths\");\r\n function shouldNotWrite() {\r\n     throw new Error('Webpack TypeScript System should not write.');\r\n }\r\n-function createWebpackSystem(input, currentDirectory) {\r\n+function createWebpackSystem(input, currentDirectory, sourceModifiers) {\r\n     // Webpack's CachedInputFileSystem uses the default directory separator in the paths it uses\r\n     // for keys to its cache. If the keys do not match then the file watcher will not purge outdated\r\n     // files and cause stale data to be used in the next rebuild. TypeScript always uses a `/` (POSIX)\r\n@@ -58,7 +58,14 @@ function createWebpackSystem(input, currentDirectory) {\r\n             if (data.length > 3 && data[0] === 0xef && data[1] === 0xbb && data[2] === 0xbf) {\r\n                 start = 3;\r\n             }\r\n-            return data.toString('utf8', start);\r\n+            // return data.toString('utf8', start);\r\n+            let source = data.toString('utf8', start);\r\n+            for (const sourceModifier of sourceModifiers) {\r\n+                if (typeof sourceModifier.filter === 'function' && sourceModifier.filter(source, path)) {\r\n+                    source = sourceModifier.modifier(source, path);\r\n+                }\r\n+            }\r\n+            return source;\r\n         },\r\n\r\n```\r\nModifications to webpack.config.js are required for use.\r\n```javascript\r\nmodule: {\r\n      rules: [\r\n        {\r\n          test: /\\.[cm]?[tj]sx?$/,\r\n          resolve: { fullySpecified: false },\r\n          exclude:\r\n            /[\\\\/]node_modules[/\\\\](?:core-js|@babel|tslib|web-animations-js|web-streams-polyfill|whatwg-url)[/\\\\]/,\r\n          use: [\r\n            // { loader: \"ifdef-loader\", options: { DEBUG: !isProduction } },  // comment ifdef-loader here\r\n            { loader: path.resolve(__dirname, \"./scripts/trace-loader.cjs\") }, // log source code in pipeline\r\n            {\r\n              loader: \"@ngtools/webpack\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\nplugins: [\r\nnew AngularWebpackPlugin({\r\n        tsConfigPath: \"tsconfig.json\",\r\n        jitMode: false,\r\n        ....\r\n        sourceModifier: [\r\n          {\r\n            filter: (source, path) => !/node_modules/.test(path),\r\n            modifier: (source, path) => {\r\n              const { parse } = require(\"ifdef-loader/preprocessor\");\r\n              return parse(source, {\r\n                DEBUG: !isProduction,\r\n              });\r\n            },\r\n          },\r\n        ],\r\n      }),\r\n]\r\n...\r\n\r\n```\r\nIn this way, the code given to the TypeScript compiler internally by @ngtools/webpack has already been processed by ifdef-loader, so the final page output is correct.\r\nHere is the modified project example: https://stackblitz.com/~/github.com/grapehunter/ngtool_webpack_show_fix\n\n### Describe alternatives you've considered\n\n## Questions I would like to ask\r\n1. The modification method I am currently using is quite troublesome. Each time I upgrade the @ngtools/webpack version, I have to re-edit the patch file. So I would like to know if there are other ways to achieve the same goal.\r\n2. If not, does this repo accept such modifications? If so, I can submit a pull request.","Url":"https://github.com/angular/angular-cli/issues/27871","RelatedDescription":"Open issue \"Issues with independently using @ngtools/webpack to load loader.\" (#27871)"},{"Id":"2358211557","IsPullRequest":false,"CreatedAt":"2024-06-17T20:36:27","Actor":"james-schwartzkopf","Number":"27869","RawContent":null,"Title":"Add a coverage reporters option to ng test and angular json test options","State":"open","Body":"### Command\n\ntest\n\n### Description\n\nIt would be nice to be able to specify coverageReporters similar to reporters for ng test \n\n### Describe the solution you'd like\n\nng test --code-coverage --coverage-reporters lcov\r\n\n\n### Describe alternatives you've considered\n\nI could just add a karma conf and configure the coverage reports there, but I can configure excludes for code coverage, why not the reporter?","Url":"https://github.com/angular/angular-cli/issues/27869","RelatedDescription":"Open issue \"Add a coverage reporters option to ng test and angular json test options\" (#27869)"},{"Id":"2356832947","IsPullRequest":true,"CreatedAt":"2024-06-17T14:27:17","Actor":"angular-robot","Number":"27865","RawContent":null,"Title":"build: lock file maintenance","State":"closed","Body":"This PR contains the following updates:\n\n| Update | Change |\n|---|---|\n| lockFileMaintenance | All locks refreshed |\n\nüîß This Pull Request updates lock files to use the latest dependency versions.\n\n---\n\n### Configuration\n\nüìÖ **Schedule**: Branch creation - \"before 4am on monday\" in timezone America/Tijuana, Automerge - At any time (no schedule defined).\n\nüö¶ **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\nüëª **Immortal**: This PR will be recreated if closed unmerged. Get [config help](https://togithub.com/angular/dev-infra) if that's undesired.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Renovate Bot](https://togithub.com/renovatebot/renovate).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy40MDguMCIsInVwZGF0ZWRJblZlciI6IjM3LjQwOC4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJhY3Rpb246IG1lcmdlIiwidGFyZ2V0OiBtaW5vciJdfQ==-->\n","Url":"https://github.com/angular/angular-cli/pull/27865","RelatedDescription":"Closed or merged PR \"build: lock file maintenance\" (#27865)"},{"Id":"2353657356","IsPullRequest":true,"CreatedAt":"2024-06-17T11:58:43","Actor":"clydin","Number":"27857","RawContent":null,"Title":"fix(@angular-devkit/build-angular): use istanbul-lib-instrument directly for karma code coverage","State":"closed","Body":"The `istanbul-lib-instrument` package provides the required functionality needed to instrument code for test coverage within the context of the Angular CLI. Since the build pipeline already contains a customized babel preset, this package can be integrated directly into the pipeline.\r\nThis reduces the number of dependencies required for `@angular-devkit/build-angular` including the deprecated `inflight` package.","Url":"https://github.com/angular/angular-cli/pull/27857","RelatedDescription":"Closed or merged PR \"fix(@angular-devkit/build-angular): use istanbul-lib-instrument directly for karma code coverage\" (#27857)"},{"Id":"2356581150","IsPullRequest":true,"CreatedAt":"2024-06-17T08:17:01","Actor":"angular-robot","Number":"27864","RawContent":null,"Title":"build: lock file maintenance","State":"closed","Body":"This PR contains the following updates:\n\n| Update | Change |\n|---|---|\n| lockFileMaintenance | All locks refreshed |\n\nüîß This Pull Request updates lock files to use the latest dependency versions.\n\n---\n\n### Configuration\n\nüìÖ **Schedule**: Branch creation - \"before 4am on monday\" in timezone America/Tijuana, Automerge - At any time (no schedule defined).\n\nüö¶ **Automerge**: Disabled by config. Please merge this manually once you are satisfied.\n\n‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.\n\nüëª **Immortal**: This PR will be recreated if closed unmerged. Get [config help](https://togithub.com/angular/dev-infra) if that's undesired.\n\n---\n\n - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box\n\n---\n\nThis PR has been generated by [Renovate Bot](https://togithub.com/renovatebot/renovate).\n<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy40MDguMCIsInVwZGF0ZWRJblZlciI6IjM3LjQwOC4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJhY3Rpb246IG1lcmdlIiwidGFyZ2V0OiBtaW5vciJdfQ==-->\n","Url":"https://github.com/angular/angular-cli/pull/27864","RelatedDescription":"Closed or merged PR \"build: lock file maintenance\" (#27864)"},{"Id":"2356182085","IsPullRequest":false,"CreatedAt":"2024-06-17T05:21:59","Actor":"vadimcoder","Number":"27863","RawContent":null,"Title":"ng build is broken: Could not resolve fs, net, os, crypto. But ng serve works (latest angular-cli).","State":"closed","Body":"### Command\n\nbuild\n\n### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\nI am a first time Angular user\n\n### Description\n\n`The package \"path\" wasn't found on the file system but is built into node. Are you trying to bundle for node? You can use \"platform: 'node'\" to do that, which will remove this error.`\r\n\r\n<img width=\"986\" alt=\"Screenshot 2024-06-17 at 6 00 22‚ÄØAM\" src=\"https://github.com/angular/angular-cli/assets/439939/423362ac-ceb4-44d2-a292-361c60dc9bdb\">\r\n\n\n### Minimal Reproduction\n\n```\r\nng new myApp\r\ncd myApp\r\nnpm install --save paper\r\nimport paper from 'paper';\r\nconsole.log(paper);\r\nnpm start      // works OK - see the output in the console\r\nnpm run build // fails\r\n```\n\n### Exception or Error\n\n_No response_\n\n### Your Environment\n\n```text\nAngular CLI: 18.0.4\r\nNode: 18.20.0\r\nPackage Manager: npm 10.5.0\r\nOS: darwin arm64\r\n\r\nAngular: 18.0.3\r\n... animations, common, compiler, compiler-cli, core, forms\r\n... platform-browser, platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1800.4\r\n@angular-devkit/build-angular   18.0.4\r\n@angular-devkit/core            18.0.4\r\n@angular-devkit/schematics      18.0.4\r\n@angular/cli                    18.0.4\r\n@schematics/angular             18.0.4\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.7\n```\n\n\n### Anything else relevant?\n\n_No response_","Url":"https://github.com/angular/angular-cli/issues/27863","RelatedDescription":"Closed issue \"ng build is broken: Could not resolve fs, net, os, crypto. But ng serve works (latest angular-cli).\" (#27863)"},{"Id":"2355960778","IsPullRequest":true,"CreatedAt":"2024-06-16T20:18:59","Actor":"sanjaiyan-dev","Number":"27862","RawContent":null,"Title":"Utilize Promise.all for Efficient Asynchronous Operations üöÄ","State":"open","Body":"## PR Checklist\r\n\r\nPlease check to confirm your PR fulfills the following requirements:\r\n\r\n<!-- Please check all that apply using \"x\". -->\r\n\r\n- [x] The commit message follows our guidelines: https://github.com/angular/angular-cli/blob/main/CONTRIBUTING.md#-commit-message-guidelines\r\n- [ ] Tests for the changes have been added (for bug fixes / features)\r\n- [ ] Docs have been added / updated (for bug fixes / features)\r\n\r\n## PR Type\r\n\r\nWhat kind of change does this PR introduce?\r\n\r\n<!-- Please check the one that applies to this PR using \"x\". -->\r\n\r\n- [ ] Bugfix\r\n- [ ] Feature\r\n- [ ] Code style update (formatting, local variables)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [x] Build related changes\r\n- [ ] CI related changes\r\n- [ ] Documentation content changes\r\n- [ ] Other... Please describe:\r\n\r\n## What is the current behavior?\r\n\r\n<!-- Please describe the current behavior that you are modifying, or link to a relevant issue. -->\r\n\r\nIssue Number: N/A\r\n\r\n## What is the new behavior?\r\n\r\nThis pull request refactors the code to leverage `Promise.all` for running multiple asynchronous functions concurrently. By utilizing `Promise.all`, we achieve improved performance and readability when dealing with asynchronous operations.\r\n\r\n**Benefits of Promise.all:**\r\n\r\n* **Improved Performance:** `Promise.all` allows all the asynchronous functions to execute concurrently, potentially leading to significant performance gains, especially when dealing with independent tasks.\r\n* **Simplified Code:** By using `Promise.all`, we can group multiple asynchronous operations into a single line, making the code more concise and easier to maintain.\r\n\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No\r\n\r\n<!-- If this PR contains a breaking change, please describe the impact and migration path for existing applications below. -->\r\n\r\n## Other information\r\n","Url":"https://github.com/angular/angular-cli/pull/27862","RelatedDescription":"Open PR \"Utilize Promise.all for Efficient Asynchronous Operations üöÄ\" (#27862)"},{"Id":"2354992788","IsPullRequest":false,"CreatedAt":"2024-06-15T17:27:09","Actor":"born2net","Number":"27860","RawContent":null,"Title":"constructor.name now gives _aXX instead of component name","State":"closed","Body":"using ESBuild we don't have the ability to get component name like we used to with WebPack.\r\nconstructor.name no longer worls.\r\nIs there a different solutionm?\r\n\r\nThank you\r\n","Url":"https://github.com/angular/angular-cli/issues/27860","RelatedDescription":"Closed issue \"constructor.name now gives _aXX instead of component name\" (#27860)"},{"Id":"2356883621","IsPullRequest":false,"CreatedAt":"2024-06-15T09:43:13","Actor":"kfrederix","Number":"27866","RawContent":null,"Title":"bug(Ripple): error \"Cannot set properties of undefined (setting 'FADING_IN')\"","State":"open","Body":"### Is this a regression?\n\n- [X] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n17.3\n\n### Description\n\nAn error is thrown for production builds when following conditions are met:\r\n\r\n1. The angular appplication makes uses of material (for example MatDialog) but does not make use of MatButton (or MatRipple directly)\r\n2. The webpack builder is used (`@angular-devkit/build-angular:browser`)\r\n3. It happens only when building in production mode (not in development mode)\r\n\r\nThe following error is thrown in JS console, and the app is broken:\r\n``` bash\r\nTypeError: Cannot set properties of undefined (setting 'FADING_IN')\r\n```\r\n\r\nNote: since I could not reproduce this with the esbuild builder (`@angular-devkit/build-angular:application`), this could very well be an issue related to the angular-cli instead of material itself. Since I am not 100% sure, I am reporting it here.\n\n### Reproduction\n\nStackBlitz link: https://stackblitz.com/edit/sjwtcm-g8jwcl?file=src%2Fexample%2Fdialog-data-example.ts\r\nSteps to reproduce:\r\n1. Open the StackBlitz link\r\n2. Check JS console to see the error\r\n\n\n### Expected Behavior\n\nNo errors, app works.\n\n### Actual Behavior\n\nApp is broken, an error is visible in the JS console:\r\n``` bash\r\nTypeError: Cannot set properties of undefined (setting 'FADING_IN')\r\n```\n\n### Environment\n\n- Angular: 18.0.3\r\n- CDK/Material: 18.0.3\r\n- Browser(s): Google Chrome\r\n- Operating System (e.g. Windows, macOS, Ubuntu): Windows\r\n","Url":"https://github.com/angular/angular-cli/issues/27866","RelatedDescription":"Open issue \"bug(Ripple): error \"Cannot set properties of undefined (setting 'FADING_IN')\"\" (#27866)"},{"Id":"2353968011","IsPullRequest":true,"CreatedAt":"2024-06-14T19:42:32","Actor":"josephperrott","Number":"27859","RawContent":null,"Title":"ci: begin checking licenses of upstream dependencies to ensure they are approved","State":"closed","Body":"Begin checking upstream dependency licenses.\r\n","Url":"https://github.com/angular/angular-cli/pull/27859","RelatedDescription":"Closed or merged PR \"ci: begin checking licenses of upstream dependencies to ensure they are approved\" (#27859)"},{"Id":"2353671658","IsPullRequest":true,"CreatedAt":"2024-06-14T16:48:59","Actor":"josephperrott","Number":"27858","RawContent":null,"Title":"WIP","State":"closed","Body":"## PR Checklist\r\n\r\nPlease check to confirm your PR fulfills the following requirements:\r\n\r\n<!-- Please check all that apply using \"x\". -->\r\n\r\n- [ ] The commit message follows our guidelines: https://github.com/angular/angular-cli/blob/main/CONTRIBUTING.md#-commit-message-guidelines\r\n- [ ] Tests for the changes have been added (for bug fixes / features)\r\n- [ ] Docs have been added / updated (for bug fixes / features)\r\n\r\n## PR Type\r\n\r\nWhat kind of change does this PR introduce?\r\n\r\n<!-- Please check the one that applies to this PR using \"x\". -->\r\n\r\n- [ ] Bugfix\r\n- [ ] Feature\r\n- [ ] Code style update (formatting, local variables)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] CI related changes\r\n- [ ] Documentation content changes\r\n- [ ] Other... Please describe:\r\n\r\n## What is the current behavior?\r\n\r\n<!-- Please describe the current behavior that you are modifying, or link to a relevant issue. -->\r\n\r\nIssue Number: N/A\r\n\r\n## What is the new behavior?\r\n\r\n<!-- Please describe the new behavior that. -->\r\n\r\n## Does this PR introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [ ] No\r\n\r\n<!-- If this PR contains a breaking change, please describe the impact and migration path for existing applications below. -->\r\n\r\n## Other information\r\n","Url":"https://github.com/angular/angular-cli/pull/27858","RelatedDescription":"Closed or merged PR \"WIP\" (#27858)"},{"Id":"2353550060","IsPullRequest":true,"CreatedAt":"2024-06-14T16:25:29","Actor":"alan-agius4","Number":"27856","RawContent":null,"Title":"build: update all non-major dependencies","State":"closed","Body":"","Url":"https://github.com/angular/angular-cli/pull/27856","RelatedDescription":"Closed or merged PR \"build: update all non-major dependencies\" (#27856)"},{"Id":"2353401257","IsPullRequest":true,"CreatedAt":"2024-06-14T14:14:09","Actor":"alan-agius4","Number":"27855","RawContent":null,"Title":"test: Update NPM to Latest Version","State":"closed","Body":"This update upgrades the NPM version used for running end-to-end tests to the latest version.\r\n\r\nNotable changes include:\r\n- The `NPM_CONFIG__AUTH` configuration, which is tested here, no longer works for local packages as per [npm/cli#3985](https://github.com/npm/cli/issues/3985).\r\n- NPM no longer supports unscoped auth. The configuration error \"Invalid auth configuration found: `_auth` must be renamed to `//localhost:39521/:_auth` in the project config\" will be encountered.\r\n","Url":"https://github.com/angular/angular-cli/pull/27855","RelatedDescription":"Closed or merged PR \"test: Update NPM to Latest Version\" (#27855)"},{"Id":"2353389726","IsPullRequest":true,"CreatedAt":"2024-06-14T14:10:07","Actor":"clydin","Number":"27854","RawContent":null,"Title":"build: update yarn to v4.3.0","State":"closed","Body":"","Url":"https://github.com/angular/angular-cli/pull/27854","RelatedDescription":"Closed or merged PR \"build: update yarn to v4.3.0\" (#27854)"}],"ResultType":"GitHubIssue"},"material2-Issues":{"Issues":[{"Id":"2363265244","IsPullRequest":false,"CreatedAt":"2024-06-19T23:58:36","Actor":"godind","Number":"29285","RawContent":null,"Title":"bug(MatMenu): M3 Theme --mat-menu-container-color is not defined","State":"open","Body":"### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n_No response_\n\n### Description\n\nAfter generating M3 theme with `ng generate @angular/material:m3-theme` and doing the basic project setup. Menu components have transparent background colour.\r\n\r\n![image](https://github.com/angular/components/assets/34038713/43c3a962-2f18-4291-b6b8-ca8ed74ab412)\r\n\n\n### Reproduction\n\nStackBlitz link: Can't make StackBlitz work with Angular 18...\r\n\r\nTheme configuration\r\n### styles.scss\r\n```\r\n// Material 3 styles file.\r\n// Proceed with caution if making changes to this file.\r\n\r\n@use 'sass:map';\r\n@use '@angular/material' as mat;\r\n\r\n@include mat.core();\r\n\r\n// Import the Material Design typography and color palettes\r\n@import './themes/base-m3-theme.scss';\r\n\r\n\r\n:root {\r\n  // Apply all component css dark theme by default\r\n  @include mat.all-component-themes($dark-theme);\r\n  @include mat.system-level-colors($dark-theme);\r\n  @include mat.system-level-typography($dark-theme);\r\n  @include mat.typography-hierarchy($dark-theme);\r\n}\r\n\r\nhtml,\r\nbody,\r\napp-root {\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  touch-action: none;\r\n}\r\n\r\napp-root {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n}\r\n```\r\n\r\n### base-m3-theme.scss\r\n```\r\n// Material 3 styles file.\r\n// Proceed with caution if making changes to this file.\r\n\r\n@use 'sass:map';\r\n@use '@angular/material' as mat;\r\n\r\n// Note: Color palettes are generated from primary: #347EFF, secondary: #bfc6dc, tertiary: #D0A600, neutral: #76777d\r\n$_palettes: (\r\n  primary: (\r\n    0: #000000,\r\n    10: #001944,\r\n    20: #002d6d,\r\n    25: #003783,\r\n    30: #00429a,\r\n    35: #004db1,\r\n    40: #0058c9,\r\n    50: #1e71f1,\r\n    60: #548dff,\r\n    70: #84aaff,\r\n    80: #afc6ff,\r\n    90: #d9e2ff,\r\n    95: #edf0ff,\r\n    98: #faf8ff,\r\n    99: #fefbff,\r\n    100: #ffffff,\r\n  ),\r\n  secondary: (\r\n    0: #000000,\r\n    10: #001a42,\r\n    20: #002e6b,\r\n    25: #003880,\r\n    30: #13448f,\r\n    35: #24509b,\r\n    40: #335ca8,\r\n    50: #4e76c3,\r\n    60: #6990df,\r\n    70: #84aafc,\r\n    80: #aec6ff,\r\n    90: #d8e2ff,\r\n    95: #edf0ff,\r\n    98: #faf9ff,\r\n    99: #fefbff,\r\n    100: #ffffff,\r\n  ),\r\n  tertiary: (\r\n    0: #000000,\r\n    10: #241a00,\r\n    20: #3d2f00,\r\n    25: #4a3900,\r\n    30: #584400,\r\n    35: #665000,\r\n    40: #745b00,\r\n    50: #927300,\r\n    60: #b08c00,\r\n    70: #d0a600,\r\n    80: #eec12c,\r\n    90: #ffe08b,\r\n    95: #ffefcd,\r\n    98: #fff8f1,\r\n    99: #fffbff,\r\n    100: #ffffff,\r\n  ),\r\n  neutral: (\r\n    0: #000000,\r\n    10: #001a40,\r\n    20: #002f68,\r\n    25: #00397c,\r\n    30: #0b458e,\r\n    35: #1f519b,\r\n    40: #2f5da8,\r\n    50: #4b76c2,\r\n    60: #6690de,\r\n    70: #81abfb,\r\n    80: #acc7ff,\r\n    90: #d7e2ff,\r\n    95: #edf0ff,\r\n    98: #f9f9ff,\r\n    99: #fefbff,\r\n    100: #ffffff,\r\n  ),\r\n  neutral-variant: (\r\n    0: #000000,\r\n    10: #191b23,\r\n    20: #2e3038,\r\n    25: #393b43,\r\n    30: #44464f,\r\n    35: #50525a,\r\n    40: #5c5e67,\r\n    50: #757780,\r\n    60: #8f9099,\r\n    70: #a9abb4,\r\n    80: #c5c6d0,\r\n    90: #e1e2ec,\r\n    95: #eff0fa,\r\n    98: #faf8ff,\r\n    99: #fefbff,\r\n    100: #ffffff,\r\n  ),\r\n  error: (\r\n    0: #000000,\r\n    10: #410002,\r\n    20: #690005,\r\n    25: #7e0007,\r\n    30: #93000a,\r\n    35: #a80710,\r\n    40: #ba1a1a,\r\n    50: #de3730,\r\n    60: #ff5449,\r\n    70: #ff897d,\r\n    80: #ffb4ab,\r\n    90: #ffdad6,\r\n    95: #ffedea,\r\n    98: #fff8f7,\r\n    99: #fffbff,\r\n    100: #ffffff,\r\n  ),\r\n);\r\n\r\n$_rest: (\r\n  secondary: map.get($_palettes, secondary),\r\n  neutral: map.get($_palettes, neutral),\r\n  neutral-variant: map.get($_palettes,  neutral-variant),\r\n  error: map.get($_palettes, error),\r\n);\r\n$_primary: map.merge(map.get($_palettes, primary), $_rest);\r\n$_tertiary: map.merge(map.get($_palettes, tertiary), $_rest);\r\n\r\n// Define the theme object.\r\n$light-theme: mat.define-theme((\r\n  color: (\r\n    theme-type: light,\r\n    primary: $_primary,\r\n    tertiary: $_tertiary,\r\n    use-system-variables: true,\r\n  ),\r\n  typography: (\r\n    use-system-variables: true,\r\n  ),\r\n  density: (\r\n    scale: 0,\r\n  ),\r\n));\r\n\r\n$dark-theme: mat.define-theme((\r\n  color: (\r\n    theme-type: dark,\r\n    primary: $_primary,\r\n    tertiary: $_tertiary,\r\n    use-system-variables: true,\r\n  ),\r\n  typography: (\r\n    use-system-variables: true,\r\n  ),\r\n  density: (\r\n    scale: 0,\r\n  ),\r\n));\r\n\r\n```\n\n### Expected Behavior\n\nThe menu background should use material built-in menu colours.\r\n\n\n### Actual Behavior\n\nTransparent menu background.\r\n\r\n![image](https://github.com/angular/components/assets/34038713/c4dea265-e00d-4607-94e3-fd2c308e17fd)\r\n\n\n### Environment\n\n\r\n     _                      _                 ____ _     ___\r\n    / \\   _ __   __ _ _   _| | __ _ _ __     / ___| |   |_ _|\r\n   / ‚ñ≥ \\ | '_ \\ / _` | | | | |/ _` | '__|   | |   | |    | |\r\n  / ___ \\| | | | (_| | |_| | | (_| | |      | |___| |___ | |\r\n /_/   \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_|       \\____|_____|___|\r\n                |___/\r\n    \r\n\r\nAngular CLI: 18.0.4\r\nNode: 18.19.1\r\nPackage Manager: npm 10.2.4\r\nOS: darwin arm64\r\n\r\nAngular: 18.0.3\r\n... animations, cdk, common, compiler, compiler-cli, core, forms\r\n... language-service, material, platform-browser\r\n... platform-browser-dynamic, router\r\n\r\nPackage                         Version\r\n---------------------------------------------------------\r\n@angular-devkit/architect       0.1800.4\r\n@angular-devkit/build-angular   18.0.4\r\n@angular-devkit/core            18.0.4\r\n@angular-devkit/schematics      18.0.4\r\n@angular/cli                    18.0.4\r\n@schematics/angular             18.0.4\r\nng-packagr                      18.0.0\r\nrxjs                            7.8.1\r\ntypescript                      5.4.5\r\nzone.js                         0.14.4\r\n\r\n\r\n- CDK/Material: \"@angular/cdk\": \"^18.0.3\", \"@angular/material\": \"^18.0.3\"\r\n- Browser(s): Chrome and Safari latest\r\n- Operating System: macOS Sonoma 14.5\r\n","Url":"https://github.com/angular/components/issues/29285","RelatedDescription":"Open issue \"bug(MatMenu): M3 Theme --mat-menu-container-color is not defined\" (#29285)"},{"Id":"2361885125","IsPullRequest":true,"CreatedAt":"2024-06-19T17:28:30","Actor":"crisbeto","Number":"29283","RawContent":null,"Title":"feat(cdk/drag-drop): add the ability to specify an alternate drop list container","State":"closed","Body":"Adds the new `cdkDropListElementContainer` input that allows users to specify a different element that should be considered the root of the drop list. This is useful in the cases where the user might not have full control over the DOM between the drop list and the items, like when making a tab list draggable.\r\n\r\nFixes #29140.","Url":"https://github.com/angular/components/pull/29283","RelatedDescription":"Closed or merged PR \"feat(cdk/drag-drop): add the ability to specify an alternate drop list container\" (#29283)"},{"Id":"2361503025","IsPullRequest":true,"CreatedAt":"2024-06-19T17:28:14","Actor":"crisbeto","Number":"29280","RawContent":null,"Title":"fix(material/menu): animation issue when same menu is used for multiple nested triggers","State":"closed","Body":"If the same menu is passed to different triggers and the user moves quickly between the menus (e.g. in a nested menu), an empty menu panel can show up while the closed menu is animating away. This is because the content needs to be moved over to the new menu.\r\n\r\nThese changes hide the empty menu panel immediately using CSS to avoid the glichy behavior.","Url":"https://github.com/angular/components/pull/29280","RelatedDescription":"Closed or merged PR \"fix(material/menu): animation issue when same menu is used for multiple nested triggers\" (#29280)"},{"Id":"2360865867","IsPullRequest":true,"CreatedAt":"2024-06-19T16:26:15","Actor":"mmalerba","Number":"29279","RawContent":null,"Title":"build: configure vscode bazel integration","State":"closed","Body":"","Url":"https://github.com/angular/components/pull/29279","RelatedDescription":"Closed or merged PR \"build: configure vscode bazel integration\" (#29279)"},{"Id":"2362048932","IsPullRequest":false,"CreatedAt":"2024-06-19T10:56:53","Actor":"bviale","Number":"29284","RawContent":null,"Title":"bug(mat-tab-nav-bar): Accessibility issue with dpad navigation in mat tabs","State":"open","Body":"### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n_No response_\n\n### Description\n\nI am shipping my Angular app using Material inside an APK as a TWA. It should be compatible with Android TV so I am testing the behaviour on Chromecast 2 using the dpad controller. Only available controls are the 4 directional arrows with Back and Enter.\r\nMy first page has a mat-tab-nav-bar at the top. On page load, the Chromecast browser focuses the first element and then let the user navigate in the page only using the previously listed controls. \r\nAs mat tabs enables keyboard navigation, it is switching tabs focus with arrow keys and changing active tab with Enter. But because dpads is missing Tab key, it becomes impossible to focus out the tabs and click on next elements.\r\nWe would need a way to configure the mat tabs to focus to next elements with arrows when last element has been reached instead of looping back to the first tab. That would allow dpad to navigate to the rest of the page.\r\nAny known hack to make this work would be more than welcome!\n\n### Reproduction\n\nStackBlitz link: https://material.angular.io/components/tabs/examples#tab-group-align\r\nSteps to reproduce the same behaviour in a browser:\r\n1. Use tab to enter focus on first tabs bar\r\n2. Use only arrows and Enter and try to navigate in the whole page\r\n\n\n### Expected Behavior\n\nWhen last element is selected and right arrow key is pressed, have a way to jump to next element (like a Tab) instead of going back to first tab element.\r\nWhen first element is selected and left arrow key is pressed, have a way to jump to previous element (like a Shift+Tab) instead of going to last tab element.\r\nThis could be done with some config maybe to stay compatible with current behaviour\n\n### Actual Behavior\n\nWhen last element is selected and right arrow key is pressed it is going back to first tab element.\r\nWhen first element is selected and left arrow key is pressedit is going to last tab element.\n\n### Environment\n\n- Angular: 18\r\n- CDK/Material: 18\r\n- Browser(s): Chromecast browser\r\n- Operating System (e.g. Windows, macOS, Ubuntu): Android TV\r\n","Url":"https://github.com/angular/components/issues/29284","RelatedDescription":"Open issue \"bug(mat-tab-nav-bar): Accessibility issue with dpad navigation in mat tabs\" (#29284)"},{"Id":"2361517764","IsPullRequest":false,"CreatedAt":"2024-06-19T10:35:32","Actor":"msftedad","Number":"29281","RawContent":null,"Title":"Unable to access the controls in the \"Rearrange columns\" dialog with the keyboard.","State":"closed","Body":"### Which @angular/* package(s) are the source of the bug?\n\nDon't known / other\n\n### Is this a regression?\n\nYes\n\n### Description\n\n**Environment (OS, Application, Versions):**\r\nOS Build: Windows 11 Enterprise 23H2 22631.3672\r\nEdge Dev Version: Version 125.0.2535.85 (Official build) dev (64-bit)\r\n\r\n**Repro Steps:**\r\n1. Open the URL [Drag and Drop | Angular Material](https://v7.material.angular.io/cdk/drag-drop/overview)\r\n2. Try to rearrange the columns with keyboard\r\n3. Observe the issue.\r\n\r\n**Expected Result:**\r\nUsers should be able to access the controls in the \"Rearrange columns\" dialog with the keyboard. \r\n\r\n**Actual Result:**\r\nUnable to access the controls in the \"Rearrange columns\" dialog with the keyboard.\r\n\r\n[222848_PartnerAnalytics_Angular.webm](https://github.com/angular/angular/assets/93735775/c0468300-22c0-4892-90a1-c14b807df221)\r\n\n\n### Please provide a link to a minimal reproduction of the bug\n\n_No response_\n\n### Please provide the exception or error you saw\n\n_No response_\n\n### Please provide the environment you discovered this bug in (run `ng version`)\n\n_No response_\n\n### Anything else?\n\n_No response_","Url":"https://github.com/angular/components/issues/29281","RelatedDescription":"Closed issue \"Unable to access the controls in the \"Rearrange columns\" dialog with the keyboard.\" (#29281)"},{"Id":"2361800068","IsPullRequest":true,"CreatedAt":"2024-06-19T09:33:20","Actor":"crisbeto","Number":"29282","RawContent":null,"Title":"Revert \"fix(material/form-field): outline label position (#29138)\"","State":"closed","Body":"This reverts commit 6318f24d57572b9aeb1da9b4556030fd38efad8a because I broke some apps internally.","Url":"https://github.com/angular/components/pull/29282","RelatedDescription":"Closed or merged PR \"Revert \"fix(material/form-field): outline label position (#29138)\"\" (#29282)"},{"Id":"2353597835","IsPullRequest":false,"CreatedAt":"2024-06-18T19:33:30","Actor":"imario42","Number":"29258","RawContent":null,"Title":"bug(MatBottomSheet):  zoneless - Expression has changed after it was checked","State":"closed","Body":"### Is this a regression?\r\n\r\n- [ ] Yes, this behavior used to work in the previous version\r\n\r\n### The previous version in which this bug was not present was\r\n\r\n_No response_\r\n\r\n### Description\r\n\r\nI am testing the experimental zoneless beauty of Angular 18 and it worked very well so far in our application.\r\n\r\nI found one issue with the MatBottomSheet if you configure it to not automatically close in any case like so\r\n\r\n```\r\nthis.matBottomSheet.open<MyBottomSheetComponent, MyBottomSheetConfig>(MyBottomSheetComponent, {\r\n      disableClose: true,\r\n      closeOnNavigation: true,\r\n      hasBackdrop: false,\r\n```\r\n\r\nand then open another MatBottomSheet instance while one is open already.\r\n\r\nThis will throw that exception:\r\n\r\n```\r\nError: NG0100: ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value for '@state': 'void'. Current value: 'visible'. Expression location: _MatBottomSheetContainer component. Find more at https://angular.dev/errors/NG0100\r\n    at throwErrorIfNoChangesMode (core.mjs:10210:11)\r\n    at bindingUpdated (core.mjs:19300:17)\r\n    at …µ…µsyntheticHostProperty (core.mjs:24470:9)\r\n    at MatBottomSheetContainer_HostBindings (bottom-sheet.mjs:101:14)\r\n    at definition.hostBindings (core.mjs:18762:13)\r\n    at processHostBindingOpCodes (core.mjs:11414:17)\r\n    at refreshView (core.mjs:13220:9)\r\n    at detectChangesInView (core.mjs:13386:9)\r\n    at detectChangesInViewWhileDirty (core.mjs:13081:9)\r\n    at detectChangesInternal (core.mjs:13060:9)\r\n```\r\n\r\n\r\nThe reason I provided two buttons is, that it is exactly my use-case to open another bottom sheet (accepting the previous one gets closed then).\r\n\r\n### Reproduction\r\n\r\n* Start the reproducer-project:\r\n** https://stackblitz.com/github/imario42/zoneless-matbottomsheet-bug\r\n** Repo: https://github.com/imario42/zoneless-matbottomsheet-bug.git\r\n* click on any button (this opens the bottom sheet)\r\n* click on any button again (this closes the bottom sheet and prints the exception above)\r\n\r\n\r\n### Expected Behavior\r\n\r\nThe BottomSheet should close and the new one should open\r\n\r\n### Actual Behavior\r\n\r\nThe BottomSheet closes and the exception above is thrown.\r\n\r\n### Environment\r\n\r\n- Angular: 18.0.3\r\n- CDK/Material: 18.0.3\r\n- Browser(s): Brave, Safari\r\n- Operating System (e.g. Windows, macOS, Ubuntu): macOS\r\n","Url":"https://github.com/angular/components/issues/29258","RelatedDescription":"Closed issue \"bug(MatBottomSheet):  zoneless - Expression has changed after it was checked\" (#29258)"},{"Id":"2359117615","IsPullRequest":true,"CreatedAt":"2024-06-18T19:33:29","Actor":"crisbeto","Number":"29277","RawContent":null,"Title":"fix(material/bottom-sheet): changed after checked error with zoneless","State":"closed","Body":"Fixes that when closing and immediately reopening bottom sheet in a zoneless app, we were causing a \"changed after checked\" error to be thrown. It seems to be because we were calling `detectChanges` without marking for check first.\r\n\r\nFixes #29258.","Url":"https://github.com/angular/components/pull/29277","RelatedDescription":"Closed or merged PR \"fix(material/bottom-sheet): changed after checked error with zoneless\" (#29277)"},{"Id":"2360256157","IsPullRequest":true,"CreatedAt":"2024-06-18T16:26:11","Actor":"mmalerba","Number":"29278","RawContent":null,"Title":"test: Convert some material tests to zoneless","State":"open","Body":"","Url":"https://github.com/angular/components/pull/29278","RelatedDescription":"Open PR \"test: Convert some material tests to zoneless\" (#29278)"},{"Id":"2358452869","IsPullRequest":true,"CreatedAt":"2024-06-18T16:21:07","Actor":"mmalerba","Number":"29274","RawContent":null,"Title":"build: fix rootDir","State":"closed","Body":"The `tools/` directory was previously missing which caused red squigglies when we tried to import from the tools directory. e.g., in our theming tests: `import {createLocalAngularPackageImporter} from '../../../../../tools/sass/local-sass-importer';`","Url":"https://github.com/angular/components/pull/29274","RelatedDescription":"Closed or merged PR \"build: fix rootDir\" (#29274)"},{"Id":"2358482953","IsPullRequest":true,"CreatedAt":"2024-06-18T16:20:23","Actor":"mmalerba","Number":"29276","RawContent":null,"Title":"build: show ruler at 100 since we have a lint for it","State":"closed","Body":"","Url":"https://github.com/angular/components/pull/29276","RelatedDescription":"Closed or merged PR \"build: show ruler at 100 since we have a lint for it\" (#29276)"},{"Id":"2358454343","IsPullRequest":true,"CreatedAt":"2024-06-17T23:11:21","Actor":"mmalerba","Number":"29275","RawContent":null,"Title":"feat(material/theming): Add <component>-extend-theme sass functions","State":"open","Body":"","Url":"https://github.com/angular/components/pull/29275","RelatedDescription":"Open PR \"feat(material/theming): Add <component>-extend-theme sass functions\" (#29275)"},{"Id":"2356682228","IsPullRequest":true,"CreatedAt":"2024-06-17T21:24:06","Actor":"crisbeto","Number":"29271","RawContent":null,"Title":"refactor(material/radio): simplify structural styles","State":"closed","Body":"Simplifies the radio button's structural styles to make them smaller and easier to maintain.","Url":"https://github.com/angular/components/pull/29271","RelatedDescription":"Closed or merged PR \"refactor(material/radio): simplify structural styles\" (#29271)"},{"Id":"2358217137","IsPullRequest":true,"CreatedAt":"2024-06-17T20:39:57","Actor":"DBowen33","Number":"29273","RawContent":null,"Title":"fix(material/tree): aria-expanded attribute should not appear in the leaf node","State":"open","Body":"Fixed an issue to where leaf nodes were wrongly being assigned the aria-expanded attribute, which could confuse screen reader users.\r\n\r\nhttps://screencast.googleplex.com/cast/NjMzNDkwNjM4MzcyODY0MHxkMTY5ZTdkNC05Mw\r\n\r\nFixes https://github.com/angular/components/issues/21922\r\nFixes https://github.com/angular/components/issues/21143","Url":"https://github.com/angular/components/pull/29273","RelatedDescription":"Open PR \"fix(material/tree): aria-expanded attribute should not appear in the leaf node\" (#29273)"},{"Id":"2358129412","IsPullRequest":true,"CreatedAt":"2024-06-17T20:22:23","Actor":"andrewseguin","Number":"29272","RawContent":null,"Title":"Revert \"fix(material/tree): aria-expanded attribute should not appear in the leaf node (#29096)\"","State":"closed","Body":"This reverts commit 43b8dcbb1f17a9d5fcedc88e996c241ab9e28dd8.","Url":"https://github.com/angular/components/pull/29272","RelatedDescription":"Closed or merged PR \"Revert \"fix(material/tree): aria-expanded attribute should not appear in the leaf node (#29096)\"\" (#29272)"},{"Id":"2355488241","IsPullRequest":true,"CreatedAt":"2024-06-17T20:17:55","Actor":"crisbeto","Number":"29269","RawContent":null,"Title":"refactor(material/core): simplify structural styles","State":"closed","Body":"Simplifies the structural styles of `mat-option` and `mat-optgroup` to make them easier to maintain.","Url":"https://github.com/angular/components/pull/29269","RelatedDescription":"Closed or merged PR \"refactor(material/core): simplify structural styles\" (#29269)"},{"Id":"2354637132","IsPullRequest":true,"CreatedAt":"2024-06-17T16:06:09","Actor":"crisbeto","Number":"29267","RawContent":null,"Title":"refactor(material/menu): simplify structural styles","State":"closed","Body":"Simplifies the menu structural styles to make them more maintainable.","Url":"https://github.com/angular/components/pull/29267","RelatedDescription":"Closed or merged PR \"refactor(material/menu): simplify structural styles\" (#29267)"},{"Id":"2353894836","IsPullRequest":true,"CreatedAt":"2024-06-17T15:58:22","Actor":"amysorto","Number":"29260","RawContent":null,"Title":"docs(material/icon): Update docs and examples","State":"closed","Body":"","Url":"https://github.com/angular/components/pull/29260","RelatedDescription":"Closed or merged PR \"docs(material/icon): Update docs and examples\" (#29260)"},{"Id":"2352047177","IsPullRequest":false,"CreatedAt":"2024-06-17T12:40:00","Actor":"brian-weasner","Number":"29255","RawContent":null,"Title":"bug(Datepicker): DatePicker does not emit event for `DateChange` or `DateInput` when bound form control setValue is called.","State":"closed","Body":"### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n_No response_\n\n### Description\n\nI'm unsure if this is a bug or if it is expected functionality. Opening as a bug as I would either like functionality changed or some documentation update to reflect what I'm seeing.\r\n\r\nThe component outputs of `dateChange` and `dateInput` do not fire when the form control bound to the datepicker has it's value changed via a `setValue` call.\n\n### Reproduction\n\nStackBlitz link: <https://stackblitz.com/edit/bjdfqv?file=src%2Fexample%2Fdatepicker-events-example.ts>\r\nSteps to reproduce:\r\n1. Click the \"Set Datepicker Input To Today Via Form Control\" and see **NO** events are fired.\r\n2. Click the \"Set Datepicker Input To Today Via View Child\" and see that events are fired. (as expected)\r\n\n\n### Expected Behavior\n\nWhen Form Control that is bound to a datepicker is updated via a call to `fooFormControl.setValue(bar)`, DateChange and DateInput Component level Outputs should emit because the date of the datepicker changed.\n\n### Actual Behavior\n\nNo events are emitted from the DateChange and DateInput component level outputs.\n\n### Environment\n\n- Angular: 16 & 17\r\n- CDK/Material: 16\r\n- Browser(s): Chrome\r\n- Operating System (e.g. Windows, macOS, Ubuntu): Windows\r\n","Url":"https://github.com/angular/components/issues/29255","RelatedDescription":"Closed issue \"bug(Datepicker): DatePicker does not emit event for `DateChange` or `DateInput` when bound form control setValue is called.\" (#29255)"},{"Id":"2355656804","IsPullRequest":true,"CreatedAt":"2024-06-17T06:33:16","Actor":"davidlj95","Number":"29270","RawContent":null,"Title":"docs(material/card): remove unneeded null coalescing from example","State":"closed","Body":"Fixes #29167\n","Url":"https://github.com/angular/components/pull/29270","RelatedDescription":"Closed or merged PR \"docs(material/card): remove unneeded null coalescing from example\" (#29270)"},{"Id":"2354285149","IsPullRequest":false,"CreatedAt":"2024-06-15T00:16:29","Actor":"ysk3a","Number":"29266","RawContent":null,"Title":"docs-bug(Sidenav): deprecated methods used in the responsive sidenav example","State":"open","Body":"### Documentation Feedback\n\nhttps://github.com/angular/components/blob/main/src/components-examples/material/sidenav/sidenav-responsive/sidenav-responsive-example.ts\r\n\r\nIn the stackblitz demo, it shows that addlistener and removelistener are deprecated.\r\nI just wanted to create this documentation issue to let the contributors/maintainers aware.\n\n### Affected documentation page\n\nhttps://material.angular.io/components/sidenav/examples#sidenav-responsive","Url":"https://github.com/angular/components/issues/29266","RelatedDescription":"Open issue \"docs-bug(Sidenav): deprecated methods used in the responsive sidenav example\" (#29266)"},{"Id":"2354234309","IsPullRequest":false,"CreatedAt":"2024-06-14T23:30:52","Actor":"Andrew-Marks-Trisept","Number":"29265","RawContent":null,"Title":"bug(DatePicker): Keyboard focus lost after selecting first date in range (accessibility failure)","State":"open","Body":"### Is this a regression?\n\n- [ ] Yes, this behavior used to work in the previous version\n\n### The previous version in which this bug was not present was\n\n_No response_\n\n### Description\n\nWhen custom `dateFilter` functions are used to control which dates can be selected for the start and end dates on a `mat-date-range-input`, the keyboard focus is lost/reset after the user selects a start date.  They must tab several times to get back to the right place so they can select their end date.\r\n\r\nNote I'm dynamically switching between two different `dateFilter` functions, depending on which date is being selected.\r\n\r\nThis issue is causing us to fail our accessibility audit.\n\n### Reproduction\n\nStackBlitz link: https://stackblitz.com/edit/4yvmaz?file=src%2Fexample%2Fdate-range-picker-overview-example.html\r\n\r\nSteps to reproduce:\r\n1. In the Custom Date Filters Example, tab to the calendar icon and open it with Enter\r\n2. Use arrow keys to navigate the calendar and hit Enter to select a start date\r\n3. Notice the arrow keys now do nothing and you are unable to select an end date with the keyboard unless you tab several times and find the right place again.\r\n\n\n### Expected Behavior\n\nThe Custom Date Filters Example provided should work exactly like the Basic Example.  After selecting a start date, you should be able to use the arrows and Enter key again to select an end date.\n\n### Actual Behavior\n\nFocus seems to be lost or reset after the first date is selected.\r\n\r\nI thought it might be related to the fact that the date that currently has focus (the selected start date) gets disabled in my example due to my end date requirements.  But even if I allow the start date as a valid end date, the problem persists.\n\n### Environment\n\n- Angular: Seems to be all versions, tested here with 18.0.3\r\n- CDK/Material: Seems to be all versions, tested here with 18.0.3\r\n- Browser(s): Confirmed in Chrome, Edge and Firefox\r\n- Operating System (e.g. Windows, macOS, Ubuntu): Windows\r\n","Url":"https://github.com/angular/components/issues/29265","RelatedDescription":"Open issue \"bug(DatePicker): Keyboard focus lost after selecting first date in range (accessibility failure)\" (#29265)"},{"Id":"2354204397","IsPullRequest":true,"CreatedAt":"2024-06-14T22:52:44","Actor":"essjay05","Number":"29264","RawContent":null,"Title":"fix(material/dialog): dialog name on mac only using aria-label","State":"open","Body":"Fixes bug with Angular Components Dialog component on Mac whether using Chrome or Firefox the screenreader does not read the dialog name/title unless it is using an aria-label. Updates the dialog-content-directives to read/apply the aria- labelledby and aria-describedby values if they exist.\r\n\r\nFixes b/274674581","Url":"https://github.com/angular/components/pull/29264","RelatedDescription":"Open PR \"fix(material/dialog): dialog name on mac only using aria-label\" (#29264)"},{"Id":"2353953686","IsPullRequest":true,"CreatedAt":"2024-06-14T21:27:55","Actor":"crisbeto","Number":"29261","RawContent":null,"Title":"build: fix missing elevation import","State":"closed","Body":"Fixes a missing import when generating elevation tokens.","Url":"https://github.com/angular/components/pull/29261","RelatedDescription":"Closed or merged PR \"build: fix missing elevation import\" (#29261)"},{"Id":"2354071093","IsPullRequest":true,"CreatedAt":"2024-06-14T20:43:07","Actor":"jelbourn","Number":"29263","RawContent":null,"Title":"fix(multiple): include APP_ID in element IDs","State":"open","Body":"Many components generate element IDs, which are used primarily for accessible labeling. The IDs all use an incrementing number concatenated with some stirng specific to that component. This change add Angular's `APP_ID` into these IDs in order to avoid ID collisions in cases where there are multiple instances of Angular running on the same page.","Url":"https://github.com/angular/components/pull/29263","RelatedDescription":"Open PR \"fix(multiple): include APP_ID in element IDs\" (#29263)"},{"Id":"2353972823","IsPullRequest":true,"CreatedAt":"2024-06-14T19:38:05","Actor":"josephperrott","Number":"29262","RawContent":null,"Title":"ci: begin checking licenses of upstream dependencies to ensure they are approved","State":"open","Body":"Begin checking upstream dependency licenses.","Url":"https://github.com/angular/components/pull/29262","RelatedDescription":"Open PR \"ci: begin checking licenses of upstream dependencies to ensure they are approved\" (#29262)"},{"Id":"2353795306","IsPullRequest":true,"CreatedAt":"2024-06-14T18:50:36","Actor":"amysorto","Number":"29259","RawContent":null,"Title":"docs(material/card): Update card examples","State":"closed","Body":"","Url":"https://github.com/angular/components/pull/29259","RelatedDescription":"Closed or merged PR \"docs(material/card): Update card examples\" (#29259)"},{"Id":"2352676889","IsPullRequest":true,"CreatedAt":"2024-06-14T13:47:36","Actor":"crisbeto","Number":"29257","RawContent":null,"Title":"fix(material/core): generate mat-optgroup tokens in M3","State":"closed","Body":"Fixes that we weren't generating the CSS variables for `mat-optgroup` in an M3 theme.","Url":"https://github.com/angular/components/pull/29257","RelatedDescription":"Closed or merged PR \"fix(material/core): generate mat-optgroup tokens in M3\" (#29257)"},{"Id":"2352146443","IsPullRequest":true,"CreatedAt":"2024-06-14T13:46:51","Actor":"amysorto","Number":"29256","RawContent":null,"Title":"docs(material/button-toggle): Update docs and examples","State":"closed","Body":"","Url":"https://github.com/angular/components/pull/29256","RelatedDescription":"Closed or merged PR \"docs(material/button-toggle): Update docs and examples\" (#29256)"}],"ResultType":"GitHubIssue"}},"RunOn":"2024-06-20T03:30:02.1929671Z","RunDurationInMilliseconds":1434}