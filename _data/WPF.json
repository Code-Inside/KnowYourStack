{"Data":{"GitHub":{"Issues":[{"Id":"1202688772","IsPullRequest":false,"CreatedAt":"2022-04-13T03:04:00","Actor":"tryashtar","Number":"6407","RawContent":null,"Title":"TreeView slower than the Winforms version","State":"open","Body":"* .NET Core Version: `6.0.200`\r\n* Windows version: `22H2 (OS Build 22593.1)`\r\n* Does the bug reproduce also in WPF for .NET Framework 4.8?\r\n  * Sorry, don't have that option. And yes I have it installed. \r\n![image](https://user-images.githubusercontent.com/26075577/163089142-b5df4b44-5310-4f28-8fc8-93e3a55698c0.png) ![image](https://user-images.githubusercontent.com/26075577/163089270-b0e9c3b9-5a74-4a2c-8ca5-56833655f89a.png)\r\n \r\n **Problem description:**\r\nWhen expanding nodes, the WPF `TreeView` takes longer to load than the WinForms one does.\r\n \r\n **Minimal repro:**\r\nI've attached a very small project for reproducing this.\r\n[TreeViewComparison.zip](https://github.com/dotnet/wpf/files/8477829/TreeViewComparison.zip)\r\nOn the left is a WPF `TreeView`, on the right is a WinForms `TreeView` wrapped in `WindowsFormsHost`. Both are prepopulated with an identical bunch of nested nodes. Click the WPF text to run `root.ExpandSubtree()`, and click the WinForms text to run `root.ExpandAll()`. Click the text, not the expand arrows, since that will just open one layer.\r\n![image](https://user-images.githubusercontent.com/26075577/163090457-5f3c5a5c-4776-4a09-a3c7-648a95af753e.png)\r\nHere I've copied the two relevant files from the solution:\r\n<details>\r\n  <summary><code>MainWindow.xaml</code></summary>\r\n  \r\n  ```xaml\r\n  <Window x:Class=\"TreeViewComparison.MainWindow\"\r\n          xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\r\n          xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\r\n          xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\r\n          xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\r\n          xmlns:local=\"clr-namespace:TreeViewComparison\"\r\n          xmlns:wf=\"clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms\"\r\n          mc:Ignorable=\"d\"\r\n          Title=\"MainWindow\" Height=\"450\" Width=\"800\">\r\n      <Grid>\r\n          <Grid.ColumnDefinitions>\r\n              <ColumnDefinition/>\r\n              <ColumnDefinition/>\r\n          </Grid.ColumnDefinitions>\r\n          <TreeView x:Name=\"WPFTree\" Grid.Column=\"0\"/>\r\n          <WindowsFormsHost Grid.Column=\"1\">\r\n              <wf:TreeView x:Name=\"WinFormsTree\"/>\r\n          </WindowsFormsHost>\r\n      </Grid>\r\n  </Window>\r\n  ```\r\n</details>\r\n\r\n<details>\r\n  <summary><code>MainWindow.xaml.cs</code></summary>\r\n  \r\n  ```cs\r\n  using System.Windows;\r\n  using System.Windows.Controls;\r\n  using System.Windows.Forms;\r\n  \r\n  namespace TreeViewComparison;\r\n  \r\n  public partial class MainWindow : Window\r\n  {\r\n      public MainWindow()\r\n      {\r\n          InitializeComponent();\r\n          var wpf_root = new TreeViewItem() { Header = \"Click to expand WPF nodes\" };\r\n          var win_root = new TreeNode(\"Click to expand WinForms nodes\");\r\n          WPFTree.Items.Add(wpf_root);\r\n          WinFormsTree.Nodes.Add(win_root);\r\n          AddGenerations(wpf_root, 5, 5);\r\n          AddGenerations(win_root, 5, 5);\r\n          wpf_root.Selected += (s, e) => wpf_root.ExpandSubtree();\r\n          WinFormsTree.AfterSelect += (s, e) => win_root.ExpandAll();\r\n      }\r\n  \r\n      private void AddGenerations(TreeViewItem item, int children, int generations)\r\n      {\r\n          for (int i = 0; i < children; i++)\r\n          {\r\n              var child = new TreeViewItem() { Header = $\"Child #{i + 1}\" };\r\n              item.Items.Add(child);\r\n              if (generations > 0)\r\n                  AddGenerations(child, children, generations - 1);\r\n          }\r\n      }\r\n  \r\n      private void AddGenerations(TreeNode item, int children, int generations)\r\n      {\r\n          for (int i = 0; i < children; i++)\r\n          {\r\n              var child = new TreeNode($\"Child #{i + 1}\");\r\n              item.Nodes.Add(child);\r\n              if (generations > 0)\r\n                  AddGenerations(child, children, generations - 1);\r\n          }\r\n      }\r\n  }\r\n  ```\r\n</details>\r\n\r\n\r\n **Expected behavior:**\r\nWPF should be as fast as, if not faster than, WinForms at loading `TreeView` nodes.\r\n\r\n **Actual behavior:**\r\nThe WPF `TreeView` takes significantly longer to finish. On my computer, the WinForms view fully expands in about 8 seconds, while the WPF view takes a staggering 62 seconds. Honestly, both of these are unacceptably slow.\r\n\r\n---\r\n\r\nI am new to this repository and WPF in general so please let me know if I did anything wrong, and thank you for your work! :)","Url":"https://github.com/dotnet/wpf/issues/6407","RelatedDescription":"Open issue \"TreeView slower than the Winforms version\" (#6407)"},{"Id":"1202402100","IsPullRequest":true,"CreatedAt":"2022-04-12T21:46:27","Actor":"dotnet-maestro[bot]","Number":"6406","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220412.7\r\n- **Date Produced**: April 12, 2022 8:56:48 PM UTC\r\n- **Commit**: 734bf64715498a14239bb4a09437247363506831\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22212.2 to 7.0.0-preview.4.22212.7][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22212.2 to 7.0.0-preview.4.22212.7][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/b151ab0...734bf64\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6406)","Url":"https://github.com/dotnet/wpf/pull/6406","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6406)"},{"Id":"1202269413","IsPullRequest":true,"CreatedAt":"2022-04-12T18:59:05","Actor":"vseanreesermsft","Number":"6405","RawContent":null,"Title":"Merging internal commits for release/6.0","State":"open","Body":"null\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6405)","Url":"https://github.com/dotnet/wpf/pull/6405","RelatedDescription":"Open PR \"Merging internal commits for release/6.0\" (#6405)"},{"Id":"1202266963","IsPullRequest":true,"CreatedAt":"2022-04-12T18:56:35","Actor":"vseanreesermsft","Number":"6404","RawContent":null,"Title":"Merging internal commits for release/5.0","State":"open","Body":"null\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6404)","Url":"https://github.com/dotnet/wpf/pull/6404","RelatedDescription":"Open PR \"Merging internal commits for release/5.0\" (#6404)"},{"Id":"1202264090","IsPullRequest":true,"CreatedAt":"2022-04-12T18:53:37","Actor":"vseanreesermsft","Number":"6403","RawContent":null,"Title":"Merging internal commits for release/3.1","State":"open","Body":"null\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6403)","Url":"https://github.com/dotnet/wpf/pull/6403","RelatedDescription":"Open PR \"Merging internal commits for release/3.1\" (#6403)"},{"Id":"1202223800","IsPullRequest":true,"CreatedAt":"2022-04-12T18:43:56","Actor":"dotnet-maestro[bot]","Number":"6402","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220412.2\r\n- **Date Produced**: April 12, 2022 5:45:51 PM UTC\r\n- **Commit**: b151ab0e687ccef77f5cb1c334f42f5e14197fa1\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22212.1 to 7.0.0-preview.4.22212.2][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22212.1 to 7.0.0-preview.4.22212.2][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/5344033...b151ab0\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6402)","Url":"https://github.com/dotnet/wpf/pull/6402","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6402)"},{"Id":"1201906421","IsPullRequest":true,"CreatedAt":"2022-04-12T14:26:44","Actor":"dotnet-maestro[bot]","Number":"6400","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:Coherency Updates)\r\n## Coherency Updates\r\n\r\nThe following updates ensure that dependencies with a *CoherentParentDependency*\r\nattribute were produced in a build used as input to the parent dependency's build.\r\nSee [Dependency Description Format](https://github.com/dotnet/arcade/blob/master/Documentation/DependencyDescriptionFormat.md#dependency-description-overview)\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Coherency Updates**:\r\n  - **System.CodeDom**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Configuration.ConfigurationManager**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Diagnostics.EventLog**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.DirectoryServices**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Drawing.Common**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Reflection.MetadataLoadContext**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Security.Cryptography.Xml**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Security.Permissions**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Windows.Extensions**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **Microsoft.NETCore.Platforms**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.IO.Packaging**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Resources.Extensions**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **Microsoft.NETCore.App.Ref**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n  - **VS.Redist.Common.NetCore.SharedFramework.x64.7.0**: from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8 (parent: Microsoft.Private.Winforms)\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n[marker]: <> (End:Coherency Updates)\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220412.1\r\n- **Date Produced**: April 12, 2022 1:42:51 PM UTC\r\n- **Commit**: 5344033440da58440ce60f8490467e4ac6b12ee1\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22211.2 to 7.0.0-preview.4.22212.1][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22211.2 to 7.0.0-preview.4.22212.1][1]\r\n  - **System.CodeDom**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Configuration.ConfigurationManager**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Diagnostics.EventLog**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.DirectoryServices**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Drawing.Common**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Reflection.MetadataLoadContext**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Security.Cryptography.Xml**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Security.Permissions**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Windows.Extensions**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **Microsoft.NETCore.Platforms**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.IO.Packaging**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **System.Resources.Extensions**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **Microsoft.NETCore.App.Ref**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n  - **VS.Redist.Common.NetCore.SharedFramework.x64.7.0**: [from 7.0.0-preview.4.22208.8 to 7.0.0-preview.4.22211.8][2]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/97d9179...5344033\r\n[2]: https://github.com/dotnet/runtime/compare/b8dc04b...5707668\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6400)","Url":"https://github.com/dotnet/wpf/pull/6400","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6400)"},{"Id":"1201906674","IsPullRequest":false,"CreatedAt":"2022-04-12T14:06:39","Actor":"batzen","Number":"6401","RawContent":null,"Title":"WPF source code missing in Source Browser","State":"open","Body":"Since a few days or weeks, i don't know exactly since when, WPF source code is missing on https://source.dot.net\r\nAs i don't know which team is responsible and since WinForms is still being included there i thought this might be the correct repo to report this issue.\r\nIf this is the wrong repo it would be nice to get a hint at where this should be reported or if it gets re-routed to the correct repo.\r\n\r\nFor example, browsing to https://source.dot.net/#q=frameworkelement only lists source code from PresentationBuildTasks but not from WPF itself.","Url":"https://github.com/dotnet/wpf/issues/6401","RelatedDescription":"Open issue \"WPF source code missing in Source Browser\" (#6401)"},{"Id":"1201781502","IsPullRequest":true,"CreatedAt":"2022-04-12T12:58:15","Actor":"dotnet-maestro[bot]","Number":"6399","RawContent":null,"Title":"[main] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:840bf684-917a-4879-f62c-08d8e93a0c51)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: 840bf684-917a-4879-f62c-08d8e93a0c51\r\n- **Build**: 20220411.6\r\n- **Date Produced**: April 11, 2022 7:45:12 PM UTC\r\n- **Commit**: d2715c6ef2c3e2847925250f0a8012344fbb9846\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.CodeAnalysis**: [from 7.0.0-beta.22206.10 to 7.0.0-beta.22211.6][1]\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 7.0.0-beta.22206.10 to 7.0.0-beta.22211.6][1]\r\n  - **Microsoft.DotNet.ApiCompat**: [from 7.0.0-beta.22206.10 to 7.0.0-beta.22211.6][1]\r\n  - **Microsoft.DotNet.GenAPI**: [from 7.0.0-beta.22206.10 to 7.0.0-beta.22211.6][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 7.0.0-beta.22206.10 to 7.0.0-beta.22211.6][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/549523c...d2715c6\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:840bf684-917a-4879-f62c-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6399)","Url":"https://github.com/dotnet/wpf/pull/6399","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/arcade\" (#6399)"},{"Id":"1201561426","IsPullRequest":false,"CreatedAt":"2022-04-12T09:49:35","Actor":"YuliiaKovalova","Number":"6398","RawContent":null,"Title":"Absence of .net runtime in Microsoft.WindowsDesktop.App package","State":"open","Body":"Hi,\r\n\r\nRecently install-scripts team has received an [issue](https://github.com/dotnet/install-scripts/issues/266) related to desktop environment installation.\r\nWe investigated this problem and found out that `Microsoft.WindowsDesktop.App` archive doesn't contain the required files for fullfilling this request.\r\n\r\nCould you help to deal with it or redirect it to a proper team?\r\n","Url":"https://github.com/dotnet/wpf/issues/6398","RelatedDescription":"Open issue \"Absence of .net runtime in Microsoft.WindowsDesktop.App package\" (#6398)"},{"Id":"1200593612","IsPullRequest":true,"CreatedAt":"2022-04-11T22:24:34","Actor":"dotnet-maestro[bot]","Number":"6397","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220411.2\r\n- **Date Produced**: April 11, 2022 9:36:47 PM UTC\r\n- **Commit**: 97d9179670ed9bd4d3eb4ce3838686c7fdb9b898\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22211.1 to 7.0.0-preview.4.22211.2][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22211.1 to 7.0.0-preview.4.22211.2][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/734e126...97d9179\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6397)","Url":"https://github.com/dotnet/wpf/pull/6397","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6397)"},{"Id":"1200456172","IsPullRequest":true,"CreatedAt":"2022-04-11T19:47:26","Actor":"stephentoub","Number":"6396","RawContent":null,"Title":"Remove closure/delegate allocation in ItemContainerGenerator","State":"open","Body":"## Description\r\n\r\nCalls to ItemContainerGenerator.DoLinearSearch are capturing locals to use for comparison, resulting in closure/delegate allocations on each call.  We can instead pass the extra state through as a state argument.\r\n\r\n## Customer Impact\r\n\r\nUnnecessary allocation/overhead.\r\n\r\n## Regression\r\n\r\nNo\r\n\r\n## Testing\r\n\r\nCI\r\n\r\n## Risk\r\n\r\nMinimal.\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6396)","Url":"https://github.com/dotnet/wpf/pull/6396","RelatedDescription":"Open PR \"Remove closure/delegate allocation in ItemContainerGenerator\" (#6396)"},{"Id":"1200385999","IsPullRequest":true,"CreatedAt":"2022-04-11T19:25:38","Actor":"dotnet-maestro[bot]","Number":"6395","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220411.1\r\n- **Date Produced**: April 11, 2022 6:10:14 PM UTC\r\n- **Commit**: 734e12654e5aa1d264d612796f688448adec68f1\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22209.1 to 7.0.0-preview.4.22211.1][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22209.1 to 7.0.0-preview.4.22211.1][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/8a8cdf8...734e126\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6395)","Url":"https://github.com/dotnet/wpf/pull/6395","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6395)"},{"Id":"1199983594","IsPullRequest":false,"CreatedAt":"2022-04-11T13:33:04","Actor":"MohanramAnbukkarasu","Number":"6393","RawContent":null,"Title":"Unable to use design time data for CustomControl/UseControl in WPF","State":"open","Body":"**Problem description:**\r\n\r\nUnable to use design time data for custom control, same as the way we have used for WPF ListView.\r\n \r\n **Actual behavior:**\r\nWe have used the given way below to show design time data for ListView. \r\n\r\n![image](https://user-images.githubusercontent.com/44049406/162748690-80ba25f3-212b-4cf6-bd02-50b1816f0e5e.png)\r\n\r\n\r\n**Reference link:**  https://docs.microsoft.com/en-us/visualstudio/xaml-tools/xaml-designtime-data?view=vs-2022#wpf-net-core-example\r\n\r\nThis works properly. However, we need to achieve the same for a UserControl/CustomControl. But the x:Array was not recognized for the custom control. It shows an error message as “Operation is not valid due to the current state of the object” as shown below. \r\n\r\n![image](https://user-images.githubusercontent.com/44049406/162748246-df8c5697-8657-4938-a29b-84e0421ba1b0.png)\r\n\r\nPlease find the example of the code snippet we have used to define the custom control’s properties. \r\n\r\n![image](https://user-images.githubusercontent.com/44049406/162748873-ebc334b7-8231-4d47-8fcd-be4c65f37dbb.png)\r\n\r\n\r\nWe have tried both IEnumerable type and object type properties along with attributes used for the ItemsSource property of the ListView(ItemsControl.ItemsSource property, as ListView is derived from ItemsControl). \r\n\r\n **Expected behavior:**\r\nWe are expecting the custom control to recognize the x:Array to show the design time data same as it shows in ListView. \r\n\r\n **Minimal repro:**\r\nAttached sample here. \r\n\r\n\r\n[DesignTimeData_Demo.zip](https://github.com/dotnet/wpf/files/8464489/DesignTimeData_Demo.zip)\r\n\r\n","Url":"https://github.com/dotnet/wpf/issues/6393","RelatedDescription":"Open issue \"Unable to use design time data for CustomControl/UseControl in WPF\" (#6393)"},{"Id":"1198816229","IsPullRequest":false,"CreatedAt":"2022-04-11T07:18:44","Actor":"sam-wheat","Number":"6391","RawContent":null,"Title":"How to intercept a bound command?","State":"closed","Body":"I wrote a simple control that displays a popup with a ListBox.  Implementer of my control can bind a command to `SelectionChangedCommand`, which will execute when user selects an item from the ListBox.  However, before `SelectionChangedCommand` executes, I want to set `IsDropDownOpen` property on my control to false which will close the popup.  \r\n\r\nBasically I want to intercept `SelectionChangedCommand`, set `IsDropDownOpen` to false, then allow `SelectionChangedCommand` to execute normally.  How do I do this?\r\n\r\n`StaysOpen` property of Popup does not achive the desired effect and in fact prevents the popup from closing when the mouse leaves.\r\n\r\nExample project attached.\r\n\r\nThank you\r\n[CommandProblem.zip](https://github.com/dotnet/wpf/files/8457976/CommandProblem.zip)\r\n.","Url":"https://github.com/dotnet/wpf/issues/6391","RelatedDescription":"Closed issue \"How to intercept a bound command?\" (#6391)"},{"Id":"1198622061","IsPullRequest":true,"CreatedAt":"2022-04-09T14:28:59","Actor":"dotnet-maestro[bot]","Number":"6390","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:Coherency Updates)\r\n## Coherency Updates\r\n\r\nThe following updates ensure that dependencies with a *CoherentParentDependency*\r\nattribute were produced in a build used as input to the parent dependency's build.\r\nSee [Dependency Description Format](https://github.com/dotnet/arcade/blob/master/Documentation/DependencyDescriptionFormat.md#dependency-description-overview)\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Coherency Updates**:\r\n  - **System.CodeDom**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Configuration.ConfigurationManager**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Diagnostics.EventLog**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.DirectoryServices**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Drawing.Common**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Reflection.MetadataLoadContext**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Security.Cryptography.Xml**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Security.Permissions**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Windows.Extensions**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **Microsoft.NETCore.Platforms**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.IO.Packaging**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **System.Resources.Extensions**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **Microsoft.NETCore.App.Ref**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n  - **VS.Redist.Common.NetCore.SharedFramework.x64.7.0**: from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8 (parent: Microsoft.Private.Winforms)\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n[marker]: <> (End:Coherency Updates)\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220409.1\r\n- **Date Produced**: April 9, 2022 1:39:16 PM UTC\r\n- **Commit**: 8a8cdf84ae2519b6961f68c3bbbe4f8055478e84\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22208.2 to 7.0.0-preview.4.22209.1][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22208.2 to 7.0.0-preview.4.22209.1][1]\r\n  - **System.CodeDom**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Configuration.ConfigurationManager**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Diagnostics.EventLog**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.DirectoryServices**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Drawing.Common**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Reflection.MetadataLoadContext**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Security.Cryptography.Xml**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Security.Permissions**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Windows.Extensions**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **Microsoft.NETCore.Platforms**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.IO.Packaging**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **System.Resources.Extensions**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **Microsoft.NETCore.App.Ref**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n  - **VS.Redist.Common.NetCore.SharedFramework.x64.7.0**: [from 7.0.0-preview.4.22201.3 to 7.0.0-preview.4.22208.8][2]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/c402e2a...8a8cdf8\r\n[2]: https://github.com/dotnet/runtime/compare/c3e4495...b8dc04b\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6390)","Url":"https://github.com/dotnet/wpf/pull/6390","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6390)"},{"Id":"1197597708","IsPullRequest":true,"CreatedAt":"2022-04-08T18:11:28","Actor":"dotnet-maestro[bot]","Number":"6389","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220408.2\r\n- **Date Produced**: April 8, 2022 5:22:09 PM UTC\r\n- **Commit**: c402e2a21cc3d6ab1c3fe6209ff829361aa596b9\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22208.1 to 7.0.0-preview.4.22208.2][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22208.1 to 7.0.0-preview.4.22208.2][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/6a38671...c402e2a\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6389)","Url":"https://github.com/dotnet/wpf/pull/6389","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6389)"},{"Id":"1197362326","IsPullRequest":true,"CreatedAt":"2022-04-08T14:31:44","Actor":"dotnet-maestro[bot]","Number":"6388","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220408.1\r\n- **Date Produced**: April 8, 2022 1:38:02 PM UTC\r\n- **Commit**: 6a3867101ca058010147742789d7ab52b11da0bd\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22207.7 to 7.0.0-preview.4.22208.1][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22207.7 to 7.0.0-preview.4.22208.1][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/eb36218...6a38671\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6388)","Url":"https://github.com/dotnet/wpf/pull/6388","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6388)"},{"Id":"1197259751","IsPullRequest":true,"CreatedAt":"2022-04-08T12:54:47","Actor":"dotnet-maestro[bot]","Number":"6387","RawContent":null,"Title":"[main] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:840bf684-917a-4879-f62c-08d8e93a0c51)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: 840bf684-917a-4879-f62c-08d8e93a0c51\r\n- **Build**: 20220406.10\r\n- **Date Produced**: April 6, 2022 11:05:52 PM UTC\r\n- **Commit**: 549523c3fc8929da1a3073d1a97f298e0d1dc342\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.CodeAnalysis**: [from 7.0.0-beta.22181.2 to 7.0.0-beta.22206.10][1]\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 7.0.0-beta.22181.2 to 7.0.0-beta.22206.10][1]\r\n  - **Microsoft.DotNet.ApiCompat**: [from 7.0.0-beta.22181.2 to 7.0.0-beta.22206.10][1]\r\n  - **Microsoft.DotNet.GenAPI**: [from 7.0.0-beta.22181.2 to 7.0.0-beta.22206.10][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 7.0.0-beta.22181.2 to 7.0.0-beta.22206.10][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/e0b311b...549523c\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:840bf684-917a-4879-f62c-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6387)","Url":"https://github.com/dotnet/wpf/pull/6387","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/arcade\" (#6387)"},{"Id":"1197005726","IsPullRequest":false,"CreatedAt":"2022-04-08T08:26:12","Actor":"wstaelens","Number":"6386","RawContent":null,"Title":"XpsDocumentWriter.SaveAsXaml - BitmapMetadata is not available on BitmapImage","State":"open","Body":"* .NET Core Version: 6.0 (guess all versions)\r\n* Visual Studio 2019, 2022, 2022 preview\r\n \r\n **Problem description:**\r\n Attaching WinDbg Preview to a process I see lots of System.NotSupportedException happening with message  \"BitmapMetadata is not available on BitmapImage\"\r\n\r\nWhy throw instead of checking if metadata is supported or not ?\r\n\r\n **Actual behavior:** <!-- callstack for crashes / exceptions -->\r\n\r\n`(50e8.3f8): CLR exception - code e0434352 (first chance)\r\nException object: 000001f93a3e2b20\r\nException type:   System.NotSupportedException\r\nMessage:          BitmapMetadata is not available on BitmapImage.\r\nInnerException:   <none>\r\nStackTrace (generated):\r\n<none>\r\nStackTraceString: <none>\r\nHResult: 80131515\r\nOS Thread Id: 0x3f8 (19)\r\n        Child SP               IP Call Site\r\n000000ED8423BC68 00007ff8a4b44f69 [HelperMethodFrame: 000000ed8423bc68] \r\n000000ED8423BD60 00007ff831597011 System.Windows.Media.Imaging.BitmapImage.get_Metadata()\r\n000000ED8423BDA0 00007ff82e52057c System.Windows.Media.Imaging.BitmapFrame.Create(System.Windows.Media.Imaging.BitmapSource)\r\n000000ED8423BDF0 00007ff82e520442 System.Windows.Xps.Serialization.ImageSourceTypeConverter.ReEncodeImage(System.Windows.Media.Imaging.BitmapSource, System.Windows.Media.Imaging.BitmapEncoder, System.IO.Stream)\r\n000000ED8423BEB0 00007ff82e517e98 System.Windows.Xps.Serialization.ImageSourceTypeConverter.ConvertTo(System.ComponentModel.ITypeDescriptorContext, System.Globalization.CultureInfo, System.Object, System.Type)\r\n000000ED8423BF50 00007ff82e517744 System.Windows.Xps.Serialization.VisualSerializer.WriteBitmap(System.String, System.Windows.Media.ImageSource)\r\n000000ED8423C040 00007ff82e515dab System.Windows.Xps.Serialization.VisualSerializer.BrushToString(System.Windows.Media.Brush, System.Windows.Rect)\r\n000000ED8423C560 00007ff82e514da4 System.Windows.Xps.Serialization.VisualSerializer.FindBrush(System.Windows.Media.Brush, System.Windows.Rect)\r\n000000ED8423C5E0 00007ff82df723bc System.Windows.Xps.Serialization.VisualSerializer.WriteBrush(System.String, System.Windows.Media.Brush, System.Windows.Rect)\r\n000000ED8423C640 00007ff82df70e78 System.Windows.Xps.Serialization.VisualSerializer.System.Windows.Xps.Serialization.IMetroDrawingContext.DrawGeometry(System.Windows.Media.Brush, System.Windows.Media.Pen, System.Windows.Media.Geometry)\r\n000000ED8423C810 00007ff82e513f55 System.Windows.Xps.Serialization.DrawingContextFlattener.DrawImage(System.Windows.Media.ImageSource, System.Windows.Rect)\r\n000000ED8423C8A0 00007ff82df6b4ef System.Windows.Xps.Serialization.VisualTreeFlattener.DrawingWalk(System.Windows.Media.Drawing, System.Windows.Media.Matrix)\r\n000000ED8423CB80 00007ff82df6b7e8 System.Windows.Xps.Serialization.VisualTreeFlattener.DrawingWalk(System.Windows.Media.Drawing, System.Windows.Media.Matrix)\r\n000000ED8423CE60 00007ff82df6b7e8 System.Windows.Xps.Serialization.VisualTreeFlattener.DrawingWalk(System.Windows.Media.Drawing, System.Windows.Media.Matrix)\r\n000000ED8423D140 00007ff82df6b7e8 System.Windows.Xps.Serialization.VisualTreeFlattener.DrawingWalk(System.Windows.Media.Drawing, System.Windows.Media.Matrix)\r\n000000ED8423D420 00007ff82e46fa7b System.Windows.Xps.Serialization.VisualTreeFlattener.StartVisual(System.Windows.Media.Visual)\r\n000000ED8423D930 00007ff82e4f3da0 System.Windows.Xps.Serialization.ReachVisualSerializer.SerializeTree(System.Windows.Media.Visual, System.Xml.XmlWriter, System.Xml.XmlWriter)\r\n000000ED8423D9E0 00007ff82e4f377a System.Windows.Xps.Serialization.ReachUIElementCollectionSerializer.SerializeUIElements(System.Windows.Xps.Serialization.SerializableObjectContext)\r\n000000ED8423DA30 00007ff82e4eb27b System.Windows.Xps.Serialization.ReachSerializer.SerializeObject(System.Windows.Xps.Serialization.SerializablePropertyContext)\r\n000000ED8423DA70 00007ff82e4eb1a3 System.Windows.Xps.Serialization.ReachSerializer.SerializeProperties(System.Windows.Xps.Serialization.SerializableObjectContext)\r\n000000ED8423DAB0 00007ff82e4f104e System.Windows.Xps.Serialization.FixedPageSerializer.PersistObjectData(System.Windows.Xps.Serialization.SerializableObjectContext)\r\n000000ED8423DB90 00007ff82e4bf022 System.Windows.Xps.Serialization.ReachSerializer.SerializeObject(System.Object)\r\n000000ED8423DBD0 00007ff82e4bf022 System.Windows.Xps.Serialization.ReachSerializer.SerializeObject(System.Object)\r\n000000ED8423DC10 00007ff82e4efdb5 System.Windows.Xps.Serialization.ReachPageContentCollectionSerializer.SerializePageContent(System.Object)\r\n000000ED8423DC60 00007ff82e53b75a System.Windows.Xps.Serialization.ReachPageContentCollectionSerializer.SerializePageContents(System.Windows.Xps.Serialization.SerializableObjectContext)\r\n000000ED8423DCB0 00007ff82e4eb27b System.Windows.Xps.Serialization.ReachSerializer.SerializeObject(System.Windows.Xps.Serialization.SerializablePropertyContext)\r\n000000ED8423DCF0 00007ff82e4eb1a3 System.Windows.Xps.Serialization.ReachSerializer.SerializeProperties(System.Windows.Xps.Serialization.SerializableObjectContext)\r\n000000ED8423DD30 00007ff82e53ae35 System.Windows.Xps.Serialization.FixedDocumentSerializer.PersistObjectData(System.Windows.Xps.Serialization.SerializableObjectContext)\r\n000000ED8423DD80 00007ff82e4bf022 System.Windows.Xps.Serialization.ReachSerializer.SerializeObject(System.Object)\r\n000000ED8423DDC0 00007ff82e539ab4 System.Windows.Xps.Serialization.XpsSerializationManager.SaveAsXaml(System.Object)\r\n000000ED8423DE20 00007ff82e5397ef System.Windows.Xps.XpsDocumentWriter.SaveAsXaml(System.Object, Boolean)`\r\n \r\n **Expected behavior:**\r\n\r\nLooks like this is by design: https://stackoverflow.com/a/17027474/187650\r\nThough, would be much nicer to see if metadata is supported instead of throwing...\r\n \r\n\r\n","Url":"https://github.com/dotnet/wpf/issues/6386","RelatedDescription":"Open issue \"XpsDocumentWriter.SaveAsXaml - BitmapMetadata is not available on BitmapImage\" (#6386)"},{"Id":"1196730935","IsPullRequest":true,"CreatedAt":"2022-04-08T02:09:52","Actor":"dotnet-maestro[bot]","Number":"6385","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220407.7\r\n- **Date Produced**: April 8, 2022 1:21:03 AM UTC\r\n- **Commit**: eb36218b4928084385a80f51c4eb628509087bae\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22207.6 to 7.0.0-preview.4.22207.7][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22207.6 to 7.0.0-preview.4.22207.7][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/5a2d392...eb36218\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6385)","Url":"https://github.com/dotnet/wpf/pull/6385","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6385)"},{"Id":"1196697054","IsPullRequest":true,"CreatedAt":"2022-04-08T01:07:16","Actor":"dotnet-maestro[bot]","Number":"6384","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220407.6\r\n- **Date Produced**: April 8, 2022 12:06:27 AM UTC\r\n- **Commit**: 5a2d392b32a4bd1d6849914082e596e33b16e537\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22207.5 to 7.0.0-preview.4.22207.6][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22207.5 to 7.0.0-preview.4.22207.6][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/4c39af9...5a2d392\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6384)","Url":"https://github.com/dotnet/wpf/pull/6384","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6384)"},{"Id":"1196685049","IsPullRequest":true,"CreatedAt":"2022-04-08T00:40:27","Actor":"dotnet-maestro[bot]","Number":"6383","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220407.5\r\n- **Date Produced**: April 7, 2022 11:47:22 PM UTC\r\n- **Commit**: 4c39af95b90ce8a643c35dded8e2c745634897e9\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22207.4 to 7.0.0-preview.4.22207.5][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22207.4 to 7.0.0-preview.4.22207.5][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/9ea7948...4c39af9\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6383)","Url":"https://github.com/dotnet/wpf/pull/6383","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6383)"},{"Id":"1196625510","IsPullRequest":true,"CreatedAt":"2022-04-07T22:45:56","Actor":"dotnet-maestro[bot]","Number":"6382","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220407.4\r\n- **Date Produced**: April 7, 2022 9:55:41 PM UTC\r\n- **Commit**: 9ea7948b3362053ba90aaffb165b1008515f4e1d\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22206.6 to 7.0.0-preview.4.22207.4][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22206.6 to 7.0.0-preview.4.22207.4][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/9f12f80...9ea7948\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6382)","Url":"https://github.com/dotnet/wpf/pull/6382","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6382)"},{"Id":"1196324589","IsPullRequest":true,"CreatedAt":"2022-04-07T17:27:07","Actor":"dotnet-maestro[bot]","Number":"6381","RawContent":null,"Title":"[release/6.0] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:934472a4-9da1-4b66-da04-08d961c27f17)\r\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\r\n- **Subscription**: 934472a4-9da1-4b66-da04-08d961c27f17\r\n- **Build**: 20220407.2\r\n- **Date Produced**: April 7, 2022 4:31:35 PM UTC\r\n- **Commit**: 88ff411715df6da3c1e6c789496f83042b470d3a\r\n- **Branch**: refs/heads/release/6.0\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Wpf.DncEng**: [from 6.0.0-rtm.22205.9 to 6.0.0-rtm.22207.2][1]\r\n\r\n[1]: https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int/branches?baseVersion=GC12fb1d1&targetVersion=GC88ff411&_a=files\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:934472a4-9da1-4b66-da04-08d961c27f17)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6381)","Url":"https://github.com/dotnet/wpf/pull/6381","RelatedDescription":"Closed or merged PR \"[release/6.0] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#6381)"},{"Id":"1196231623","IsPullRequest":true,"CreatedAt":"2022-04-07T16:09:30","Actor":"dotnet-maestro[bot]","Number":"6380","RawContent":null,"Title":"[release/6.0] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:64ecc23e-064a-456b-da03-08d961c27f17)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: 64ecc23e-064a-456b-da03-08d961c27f17\r\n- **Build**: 20220406.7\r\n- **Date Produced**: April 6, 2022 8:41:47 PM UTC\r\n- **Commit**: 254113fd7c3ee04f832c165d6aec1a6077de0d63\r\n- **Branch**: refs/heads/release/6.0\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.CodeAnalysis**: [from 6.0.0-beta.22178.5 to 6.0.0-beta.22206.7][1]\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 6.0.0-beta.22178.5 to 6.0.0-beta.22206.7][1]\r\n  - **Microsoft.DotNet.ApiCompat**: [from 6.0.0-beta.22178.5 to 6.0.0-beta.22206.7][1]\r\n  - **Microsoft.DotNet.GenAPI**: [from 6.0.0-beta.22178.5 to 6.0.0-beta.22206.7][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 6.0.0-beta.22178.5 to 6.0.0-beta.22206.7][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/f8c0d51...254113f\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:64ecc23e-064a-456b-da03-08d961c27f17)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6380)","Url":"https://github.com/dotnet/wpf/pull/6380","RelatedDescription":"Closed or merged PR \"[release/6.0] Update dependencies from dotnet/arcade\" (#6380)"},{"Id":"1195775964","IsPullRequest":false,"CreatedAt":"2022-04-07T09:31:47","Actor":"martinivanoff","Number":"6379","RawContent":null,"Title":"Selection in WPF ComboBox cannot be changed if the ItemsSource is populated with objects defined as \"record\" instead of \"class\" and SelectedItem is bound to a property of the view model.","State":"open","Body":"* .NET Core Version: 6.0.3\r\n* Windows version: 19044.15876\r\n* Does the bug reproduce also in WPF for .NET Framework 4.8?: Not tested.\r\n \r\n **Problem description:**\r\n\r\nSelection of the __WPF ComboBox__ control cannot be changed if the ItemsSource is populated with objects defined as `record` instead of `class` and the __SelectedItem is bound__ to a property in the view model.\r\n\r\nThe issue appears in the WPF framework under .NET 6. \r\n\r\nThe attached project shows the described behavior. In the project, just try to select an item by opening the drop down and clicking onto any item. \r\n[WpfApp59.zip](https://github.com/dotnet/wpf/files/8441575/WpfApp59.zip)\r\n\r\nWhat I mean by `record` is the following:\r\n```\r\npublic record DataInfo\r\n{\r\n}\r\n```\r\n \r\n **Actual behavior:** \r\n\r\nWhen you run the project and open the ComboBox drop down, click on any item to select it. At this point nothing happens. The selection cannot be changed. If you subscribe to SelectionChanged, you will see that actually the clicked item is selected and then the selection is returned back to the previous one.\r\n \r\n **Expected behavior:**\r\n \r\nThe selection should be changed properly when you click on an item in the drop down.\r\n\r\n **Minimal repro:**\r\n\r\n ```\r\n<ComboBox ItemsSource=\"{Binding Items}\" \r\n                  SelectedItem=\"{Binding SelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}\"\r\n                  DisplayMemberPath=\"Name\"\r\n                  VerticalAlignment=\"Center\"\r\n                  Width=\"300\"/>       \r\n```\r\n```\r\npublic class MainViewModel : INotifyPropertyChanged\r\n    {\r\n        private DataInfo selectedItem;\r\n        public DataInfo SelectedItem\r\n        {\r\n            get => selectedItem;\r\n            set { selectedItem = value; OnPropertyChanged(\"SelectedItem\"); }\r\n        }\r\n        public ObservableCollection<DataInfo> Items { get; set; }\r\n\r\n        public MainViewModel()\r\n        {\r\n            this.Items = new ObservableCollection<DataInfo>();\r\n            for (int i = 0; i < 10; i++)\r\n            {\r\n                Items.Add(new DataInfo() { Name = \"Item \" + i });\r\n            }\r\n            SelectedItem = Items[3];\r\n            \r\n        }\r\n\r\n        protected void OnPropertyChanged([CallerMemberName] String propertyName = \"\")\r\n        {\r\n            if (PropertyChanged != null)\r\n            {\r\n                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));\r\n            }\r\n        }\r\n\r\n        public event PropertyChangedEventHandler? PropertyChanged;\r\n    }\r\n\r\n    public record DataInfo : INotifyPropertyChanged\r\n    {\r\n        private string name;\r\n\r\n        public string Name\r\n        {\r\n            get { return name; }\r\n            set { name = value; OnPropertyChanged(\"Name\"); }\r\n        }\r\n\r\n        protected void OnPropertyChanged([CallerMemberName] String propertyName = \"\")\r\n        {\r\n            if (PropertyChanged != null)\r\n            {\r\n                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));\r\n            }\r\n        }\r\n\r\n        public event PropertyChangedEventHandler? PropertyChanged;\r\n    }\r\n```\r\n","Url":"https://github.com/dotnet/wpf/issues/6379","RelatedDescription":"Open issue \"Selection in WPF ComboBox cannot be changed if the ItemsSource is populated with objects defined as \"record\" instead of \"class\" and SelectedItem is bound to a property of the view model.\" (#6379)"},{"Id":"1195665291","IsPullRequest":true,"CreatedAt":"2022-04-07T08:27:22","Actor":"dotnet-maestro[bot]","Number":"6378","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220406.6\r\n- **Date Produced**: April 7, 2022 7:36:14 AM UTC\r\n- **Commit**: 9f12f80bb8e13eb20ea6d6e633e8bfbb1b0149c1\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22206.3 to 7.0.0-preview.4.22206.6][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22206.3 to 7.0.0-preview.4.22206.6][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/d6fbcca...9f12f80\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6378)","Url":"https://github.com/dotnet/wpf/pull/6378","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6378)"},{"Id":"1195358421","IsPullRequest":true,"CreatedAt":"2022-04-07T01:29:50","Actor":"dotnet-maestro[bot]","Number":"6377","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220406.3\r\n- **Date Produced**: April 7, 2022 12:40:37 AM UTC\r\n- **Commit**: d6fbccaf9f3dec7289bf5356249f540372ac6d5a\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22206.2 to 7.0.0-preview.4.22206.3][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22206.2 to 7.0.0-preview.4.22206.3][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/b623fed...d6fbcca\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6377)","Url":"https://github.com/dotnet/wpf/pull/6377","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6377)"},{"Id":"1195212404","IsPullRequest":true,"CreatedAt":"2022-04-06T22:04:50","Actor":"dotnet-maestro[bot]","Number":"6376","RawContent":null,"Title":"[main] Update dependencies from dotnet/winforms","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n## From https://github.com/dotnet/winforms\r\n- **Subscription**: dd483b3f-65b0-44ab-f62d-08d8e93a0c51\r\n- **Build**: 20220406.2\r\n- **Date Produced**: April 6, 2022 8:55:37 PM UTC\r\n- **Commit**: b623fed919fff76efed618eaa2142e4473a04803\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.Dotnet.WinForms.ProjectTemplates**: [from 7.0.0-preview.4.22206.1 to 7.0.0-preview.4.22206.2][1]\r\n  - **Microsoft.Private.Winforms**: [from 7.0.0-preview.4.22206.1 to 7.0.0-preview.4.22206.2][1]\r\n\r\n[1]: https://github.com/dotnet/winforms/compare/6bda09e...b623fed\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:dd483b3f-65b0-44ab-f62d-08d8e93a0c51)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](https://portal.fabricbot.ms/api/codeflow?pullrequest=https://github.com/dotnet/wpf/pull/6376)","Url":"https://github.com/dotnet/wpf/pull/6376","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/winforms\" (#6376)"}],"ResultType":"GitHubIssue"}},"RunOn":"2022-04-13T03:30:29.0249166Z","RunDurationInMilliseconds":516}