{"Data":{"GitHub":{"Issues":[{"Id":"3882347795","IsPullRequest":false,"CreatedAt":"2026-02-01T16:13:47","Actor":"alraseensaad","Number":"11408","RawContent":null,"Title":"StringFormat or using Converter break the Undo / Redo of a textbox","State":"open","Body":"### Description\n\nUndo / Redo functionality of System.Windows.Controls.TextBox stops working correctly when the Text property is data-bound using either StringFormat or a Converter.\n\nThis issue occurs even when using UpdateSourceTrigger=LostFocus, not only PropertyChanged.\n\n### Reproduction Steps\n\nJust create a Window like that and run tests\n```xaml\n<Window\n    x:Class=\"UIX.Tests.ControlTests.DecimalTextBoxTests.DecimalWindow\"\n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    mc:Ignorable=\"d\"\n    xmlns:local=\"clr-namespace:UIX.Tests.ControlTests.DecimalTextBoxTests\"\n    xmlns:control=\"clr-namespace:AppControl;assembly=AppControl\"\n    d:DataContext=\"{d:DesignInstance Type=local:TestViewModel}\">\n\t<Window.Resources>\n\t\t<local:StringFormatConverter x:Key=\"DecimalConverter\" />\n\t</Window.Resources>\n    <Grid>\n        <Grid.RowDefinitions>\n            <RowDefinition />\n            <RowDefinition\n                Height=\"auto\" />\n            <RowDefinition />\n        </Grid.RowDefinitions>\n        <Grid.ColumnDefinitions>\n            <ColumnDefinition />\n            <ColumnDefinition />\n            <ColumnDefinition />\n        </Grid.ColumnDefinitions>\n        <StackPanel\n            Grid.Row=\"1\"\n            Grid.Column=\"1\">\n            \n            <Button\n                Grid.Row=\"2\"\n                Margin=\"0 10\"\n                Grid.Column=\"1\"\n                Content=\"save\" />\n            <TextBox\n                x:Name=\"DefaultTextBox\"\n\t\t\t\t\t Text=\"{Binding DefaultTextBox, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}\" />\n\t\t\t<TextBox x:Name=\"StringFormatTextBox\"\n\t\t\t\t\t Text=\"{Binding DefaultTextBox, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnNotifyDataErrors=True,StringFormat=N2}\" />\n\t\t\t<TextBox x:Name=\"ConverterTextBox\"\n\t\t\t\t\t Text=\"{Binding DefaultTextBox, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnNotifyDataErrors=True,Converter={StaticResource DecimalConverter}}\" />\n\t\t</StackPanel>\n    </Grid>\n</Window>\n```\nand that's the converter\n```c#\ninternal class StringFormatConverter : IValueConverter\n{\n\tpublic object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)\n\t{\n\t\tif (value is null) return string.Empty;\n\t\tvar amount = value.ToString();\n\n\t\tif (decimal.TryParse(amount, NumberStyles.Any, CultureInfo.InvariantCulture, out decimal result))\n\t\t{\n\t\t\treturn result.ToString(\"N2\");\n\t\t}\n\n\t\treturn value!;\n\t}\n\tpublic object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)\n\t{\n\t\treturn value ?? Binding.DoNothing;\n\t}\n\n} \n```\nand that the tests \n```c#\n \tpublic class DefaultTextBoxTests\n\t{\n\t\t[WpfFact]\n\t\tpublic async Task DefaultTextBox_Should_UndoAndRedoFullValueChanges()\n\t\t{\n\t\t\tvar window = new DecimalWindow();\n\t\t\twindow.Show();\n\n\t\t\tvar box = window.DefaultTextBox;\n\t\t\tvar vm = (TestViewModel)window.DataContext;\n\n\t\t\tbox.Focus();\n\t\t\tbox.ApplyTemplate();\n\t\t\tbox.UndoLimit = 100; // ensure undo stack works\n\n\t\t\t// Step 1: Initial value\n\t\t\tbox.Text = \"7000\";\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"7000\", box.Text);\n\t\t\tAssert.Equal(7000m, vm.DefaultTextBox);\n\n\t\t\t// Step 2: Change value (simulate typing so undo is recorded)\n\t\t\tbox.Focus();\n\t\t\tbox.SelectAll();\n\t\t\tbox.SelectedText = \"5000\";\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"5000\", box.Text);\n\t\t\tAssert.Equal(5000m, vm.DefaultTextBox);\n\n\t\t\t// Step 3: Undo â†’ back to 7000\n\t\t\tbox.Focus();\n\t\t\tAssert.True(box.CanUndo);\n\t\t\tbox.Undo();\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"7000\", box.Text);\n\t\t\tAssert.Equal(7000m, vm.DefaultTextBox);\n\n\t\t\t// Step 4: Redo â†’ back to 5000\n\t\t\tbox.Focus();\n\t\t\tAssert.True(box.CanRedo);\n\t\t\tbox.Redo();\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"5000\", box.Text);\n\t\t\tAssert.Equal(5000m, vm.DefaultTextBox);\n\n\t\t\twindow.Close();\n\t\t}\n\t\t[WpfFact]\n\t\tpublic async Task StringFormatTextBox_Should_UndoAndRedoFullValueChanges()\n\t\t{\n\t\t\tvar window = new DecimalWindow();\n\t\t\twindow.Show();\n\n\t\t\tvar box = window.StringFormatTextBox;\n\t\t\tvar vm = (TestViewModel)window.DataContext;\n\n\t\t\tbox.Focus();\n\t\t\tbox.ApplyTemplate();\n\t\t\tbox.UndoLimit = 100; // ensure undo stack works\n\n\t\t\t// Step 1: Initial value\n\t\t\tbox.Text = \"7000\";\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"7,000.00\", box.Text);\n\t\t\tAssert.Equal(7000m, vm.DefaultTextBox);\n\n\t\t\t// Step 2: Change value (simulate typing so undo is recorded)\n\t\t\tbox.Focus();\n\t\t\tbox.SelectAll();\n\t\t\tbox.SelectedText = \"5000\";\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"5,000.00\", box.Text);\n\t\t\tAssert.Equal(5000m, vm.DefaultTextBox);\n\n\t\t\t// Step 3: Undo â†’ back to 7000\n\t\t\tbox.Focus();\n\t\t\tAssert.True(box.CanUndo);\n\t\t\tbox.Undo();\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"7,000.00\", box.Text);\n\t\t\tAssert.Equal(7000m, vm.DefaultTextBox);\n\n\t\t\t// Step 4: Redo â†’ back to 5000\n\t\t\tbox.Focus();\n\t\t\tAssert.True(box.CanRedo);\n\t\t\tbox.Redo();\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"5,000.00\", box.Text);\n\t\t\tAssert.Equal(5000m, vm.DefaultTextBox);\n\n\t\t\twindow.Close();\n\t\t}\n\t\t[WpfFact]\n\t\tpublic async Task ConverterTextBox_Should_UndoAndRedoFullValueChanges()\n\t\t{\n\t\t\tvar window = new DecimalWindow();\n\t\t\twindow.Show();\n\n\t\t\tvar box = window.ConverterTextBox;\n\t\t\tvar vm = (TestViewModel)window.DataContext;\n\n\t\t\tbox.Focus();\n\t\t\tbox.ApplyTemplate();\n\t\t\tbox.UndoLimit = 100; // ensure undo stack works\n\n\t\t\t// Step 1: Initial value\n\t\t\tbox.Text = \"7000\";\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"7,000.00\", box.Text);\n\t\t\tAssert.Equal(7000m, vm.DefaultTextBox);\n\n\t\t\t// Step 2: Change value (simulate typing so undo is recorded)\n\t\t\tbox.Focus();\n\t\t\tbox.SelectAll();\n\t\t\tbox.SelectedText = \"5000\";\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"5,000.00\", box.Text);\n\t\t\tAssert.Equal(5000m, vm.DefaultTextBox);\n\n\t\t\t// Step 3: Undo â†’ back to 7000\n\t\t\tbox.Focus();\n\t\t\tAssert.True(box.CanUndo);\n\t\t\tbox.Undo();\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"7,000.00\", box.Text);\n\t\t\tAssert.Equal(7000m, vm.DefaultTextBox);\n\n\t\t\t// Step 4: Redo â†’ back to 5000\n\t\t\tbox.Focus();\n\t\t\tAssert.True(box.CanRedo);\n\t\t\tbox.Redo();\n\t\t\tbox.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));\n\t\t\tawait Task.Delay(200);\n\t\t\tAssert.Equal(\"5,000.00\", box.Text);\n\t\t\tAssert.Equal(5000m, vm.DefaultTextBox);\n\n\t\t\twindow.Close();\n\t\t}\n\n\t}\n\n```\n\n### Expected behavior\n\nUser typing should be recorded in the undo stack\n\nCtrl + Z / Ctrl + Y should undo/redo user input\n\nFormatting should not invalidate Undo/Redo history\n\n### Actual behavior\n\nUndo stack is cleared after binding updates\n\nCtrl + Z either does nothing\n\nHappens consistently when:\n\nStringFormat is used\n\nOR a Converter is used\n\nEven with UpdateSourceTrigger=LostFocus\n\n### Regression?\n\n_No response_\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\nDefaultTextBox_Should_UndoAndRedoFullValueChanges is pass while the others not\n\n### Configuration\n\ndotnet 10\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11408","RelatedDescription":"Open issue \"StringFormat or using Converter break the Undo / Redo of a textbox\" (#11408)"},{"Id":"3876277532","IsPullRequest":false,"CreatedAt":"2026-01-30T15:49:36","Actor":"hlverstoep","Number":"11407","RawContent":null,"Title":"TextBlock in Checked ToggleButton is illegible","State":"open","Body":"### Description\n\nWhen using the light or dark fluent theme, a TextBlock in a checked ToggleButton is very hard to read as the foreground doesn't change. If you use plain text it does work as expected.\n\n### Reproduction Steps\n\n```\n<StackPanel>\n  <ToggleButton IsChecked=\"True\">\n    <TextBlock>Foo</TextBlock>\n  </ToggleButton>\n  <ToggleButton IsChecked=\"True\">\n    Foo\n  </ToggleButton>\n</StackPanel>\n```\n\n### Expected behavior\n\nBoth buttons look the same. For my particular settings that means blue background, white foreground.\n\n### Actual behavior\n\nBoth buttons look different. For my particular settings that means:\n* Top button: blue background / black foreground -> hard to read\n* Bottom button: blue background / white foreground\n\n### Regression?\n\nThe top button isn't hard to read in Aero2.\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\n_No response_\n\n### Configuration\n\n.NET 10\nWindows 11\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11407","RelatedDescription":"Open issue \"TextBlock in Checked ToggleButton is illegible\" (#11407)"},{"Id":"3875314961","IsPullRequest":true,"CreatedAt":"2026-01-30T11:41:07","Actor":"Copilot","Number":"11406","RawContent":null,"Title":"[WIP] Using Copilot Agent","State":"closed","Body":"Thanks for asking me to work on this. I will get started on it and keep this PR's description up to date as I form a plan and make progress.\n\n\n<!-- START COPILOT CODING AGENT TIPS -->\n---\n\nðŸ’¬ We'd love your input! Share your thoughts on Copilot coding agent in our [2 minute survey](https://gh.io/copilot-coding-agent-survey).\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11406)","Url":"https://github.com/dotnet/wpf/pull/11406","RelatedDescription":"Closed or merged PR \"[WIP] Using Copilot Agent\" (#11406)"},{"Id":"3875152227","IsPullRequest":false,"CreatedAt":"2026-01-30T10:52:33","Actor":"HayanAK","Number":"11405","RawContent":null,"Title":"WPF minus sign is not correct when using Swedish language,","State":"open","Body":"### Description\n\nMinus sign in Swedish is the long one 'âˆ’' in the charts, while the Swedish keyboard does not have this char writing minus sign on a Swedish keyboard on windows will result in -, save the view model and the render out will be 'âˆ’', save again and you have a bug.\nIt's related to the XAML and it's rendering process. \nAlso .Net dose not understand the long minus as minusSign\n\nrelated bug reports:\n\nhttps://github.com/unicode-org/icu4x/issues/7014\nhttps://unicode-org.atlassian.net/browse/CLDR-10779\n\n\n### Reproduction Steps\n\nTextBox -> write minus number -> int property in viewmodel -> binding -> ui long minus -> save again -> value is not a valid number anymore\n\n### Expected behavior\n\nthe normal minus sign should stay the same\n\n### Actual behavior\n\nTextBox -> write minus number -> int property in viewmodel -> binding -> ui long minus -> save again -> value is not a valid number anymore\n\n### Regression?\n\n_No response_\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\nStuck user.\n\n### Configuration\n\nnet8.0-windows\nWindows display language: English(Sweden)\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11405","RelatedDescription":"Open issue \"WPF minus sign is not correct when using Swedish language,\" (#11405)"},{"Id":"3873468979","IsPullRequest":true,"CreatedAt":"2026-01-30T02:07:37","Actor":"dotnet-maestro[bot]","Number":"11404","RawContent":null,"Title":"[main] Source code updates from dotnet/dotnet","State":"open","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n\n[marker]: <> (Begin:f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [f1124ab6-1481-4f33-a146-eb9bc5b1b331](https://maestro.dot.net/subscriptions?search=f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n- **Build**: [20260130.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2891193) ([299501](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/299501))\n- **Date Produced**: January 30, 2026 12:57:43 PM UTC\n- **Commit**: [fd46c9c9899610c1d999268dfb0382aa229222e1](https://github.com/dotnet/dotnet/commit/fd46c9c9899610c1d999268dfb0382aa229222e1)\n- **Commit Diff**: [549d106...fd46c9c](https://github.com/dotnet/dotnet/compare/549d1068506d4cf35fcc1f21f6a3014cd43bf3c9...fd46c9c9899610c1d999268dfb0382aa229222e1)\n- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)\n\n**Updated Dependencies**\n- From [11.0.0-beta.26078.110 to 11.0.0-beta.26080.101][2]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [11.0.0-preview.1.26078.110 to 11.0.0-preview.2.26080.101][2]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.App.Ref\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Private.Windows.Core.TestUtilities\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n\n\n[1]: https://github.com/dotnet/dotnet/compare/549d106850...159b6d62ad\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11404)\n[2]: https://github.com/dotnet/dotnet/compare/549d106850...fd46c9c989\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/arcade/compare/5353d03e27329df35a68fedf3da1fbb26cdd8057...256383efbf27fbaf41c28ec9909cb3c44733d3d5\n- https://github.com/dotnet/aspnetcore/compare/59d9051d2d057b055718968a77388e9b71f5aa5f...44c0e73ca9649d81ed2b9aee2af81663fffa11e2\n- https://github.com/dotnet/efcore/compare/f9dad29dcf12e79c16123ba71583210e93e3864c...71384a4413c660e375a11502264505ab06f21520\n- https://github.com/dotnet/msbuild/compare/b7952333b2a7f444cb9f3b1b1651c9072ea5dd36...211a2e16732bc787fcb8f1c0e2b4f5de897b597c\n- https://github.com/dotnet/razor/compare/184510cd7911b081b30428c740be2dd0aabbff58...2b4639820313afeff383d59261a0ba4643236b25\n- https://github.com/dotnet/roslyn/compare/8b77cf29e61476ce184687949c3c6bba3d33dcc0...0cc7353161d26a12922108120be9ba37649f0749\n- https://github.com/dotnet/runtime/compare/b37f7ad8869bde05cc0e1f6e0faba2245006a0a0...5c2326596dc0b21583dbba5db9298c025eacbf64\n- https://github.com/dotnet/scenario-tests/compare/2c0dd466fa060a772a87b9c433495ec0c559d19c...5745f7404c4a3ae7f1b08117bc6092a96224a985\n- https://github.com/dotnet/source-build-reference-packages/compare/ed69460b01b309a944e0f06824f7c46346b3133e...df3705e5bd9efd32d0ecbafeebbde7503951a536\n- https://github.com/microsoft/vstest/compare/dc8416c848534f8fb180dd57bbae0fceababae3a...a10ef3a84bae273a2fbe67486665319b6f4b9d03\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:fd46c9c9899610c1d999268dfb0382aa229222e1..https://github.com/dotnet/wpf:darc-main-2c4218e4-cb0c-41aa-a6e0-f2e0d8d9dadd\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)","Url":"https://github.com/dotnet/wpf/pull/11404","RelatedDescription":"Open PR \"[main] Source code updates from dotnet/dotnet\" (#11404)"},{"Id":"3873450559","IsPullRequest":true,"CreatedAt":"2026-01-30T02:01:13","Actor":"dotnet-maestro[bot]","Number":"11403","RawContent":null,"Title":"[release/10.0] Source code updates from dotnet/dotnet","State":"open","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n\n\n\n[marker]: <> (Begin:2d003289-13dc-445c-a652-0b25a8fa6f91)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [2d003289-13dc-445c-a652-0b25a8fa6f91](https://maestro.dot.net/subscriptions?search=2d003289-13dc-445c-a652-0b25a8fa6f91)\n- **Build**: [20260201.2](https://dev.azure.com/dnceng/internal/_build/results?buildId=2892763) ([299715](https://maestro.dot.net/channel/5173/github:dotnet:dotnet/build/299715))\n- **Date Produced**: February 1, 2026 7:25:44 PM UTC\n- **Commit**: [a2298b9bb4ad99547921adacac0504d2f55da322](https://github.com/dotnet/dotnet/commit/a2298b9bb4ad99547921adacac0504d2f55da322)\n- **Commit Diff**: [74dc6e4...a2298b9](https://github.com/dotnet/dotnet/compare/74dc6e4ed64cc0255a6be520761a857dda273863...a2298b9bb4ad99547921adacac0504d2f55da322)\n- **Branch**: [release/10.0.1xx](https://github.com/dotnet/dotnet/tree/release/10.0.1xx)\n\n**Updated Dependencies**\n- From [10.0.0-beta.26077.113 to 10.0.0-beta.26101.102][4]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [10.0.4-servicing.26077.113 to 10.0.4-servicing.26101.102][4]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.Private.Windows.Core.TestUtilities\n- From [10.0.4 to 10.0.4][4]\n  - Microsoft.NETCore.App.Ref\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:2d003289-13dc-445c-a652-0b25a8fa6f91)\n\n\n\n\n[1]: https://github.com/dotnet/dotnet/compare/74dc6e4ed6...2e33fb2896\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11403)\n[2]: https://github.com/dotnet/dotnet/compare/74dc6e4ed6...cdd9215cdd\n\n[3]: https://github.com/dotnet/dotnet/compare/74dc6e4ed6...a924d65b28\n\n[4]: https://github.com/dotnet/dotnet/compare/74dc6e4ed6...a2298b9bb4\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/efcore/compare/10ac4da764d503cddb866142edd7d2c9bd264b7a...52a750fac4517988565bbed0e36a327ddef4588e\n- https://github.com/dotnet/roslyn/compare/123b078829e8fdb3055704d609b7b5a44e1537dd...39f5221215f520f7e6b7117c3abfa83c94eb7af4\n- https://github.com/dotnet/runtime/compare/f8d2bbfad55e9ad36752dd48c9fc1106ddb0bf82...59908f6a6b953d6be7a7e321648399ae88644345\n- https://github.com/dotnet/scenario-tests/compare/368b99891ce58728b6795383c862520ec15efb22...9e293c93cdffeb5a193eb28e445dab742def23ae\n- https://github.com/dotnet/sdk/compare/878d3e2175a909bc3953373de970bcb85ee4c2e4...bc6b89b6de559c15c5280a49ef69200670b0489e\n- https://github.com/dotnet/templating/compare/22976f09c1812cdb8a27308b1893c0126022dfbd...21a0fc05cf8ad8bbe599a5f1b214d003d19063e1\n- https://github.com/dotnet/windowsdesktop/compare/3604983ee462d682e0da2bc15cc5ab125877ba77...0ea907c5629f7b33042ea4f7ee5d7899f9e10ddb\n- https://github.com/dotnet/winforms/compare/45538d5f3573a75690aac3540bda8380281d5c00...4e97eb7fea1536620baecafd46ab8bf49fe20e6a\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:a2298b9bb4ad99547921adacac0504d2f55da322..https://github.com/dotnet/wpf:darc-release/10.0-aa238576-fa48-490f-b0ed-96343c2df9cd\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)","Url":"https://github.com/dotnet/wpf/pull/11403","RelatedDescription":"Open PR \"[release/10.0] Source code updates from dotnet/dotnet\" (#11403)"},{"Id":"3871151757","IsPullRequest":false,"CreatedAt":"2026-01-29T15:05:18","Actor":"rampaa","Number":"11402","RawContent":null,"Title":"Regression: Clipboard.GetText() returns empty string or corrupted text (mojibake) randomly in .NET 10","State":"open","Body":"### Description\n\nAfter migrating an application to .NET 10, `Clipboard.GetText()` sometimes returns corrupted text or an empty string when reading Unicode (e.g., Japanese) content from the Windows clipboard. This behavior did not occur prior to .NET 10.\n\nExample of corrupted output:\n\nExpected:\n`ã€Œã†ã‚ã€ã»ã‚“ã¨ã â€¦â€¦ã‚ã‚Œã€ã©ã‚Œãã‚‰ã„ã®é«˜ã•ãªã‚“ã ã‚ã€`\nActual:\n`????????ãƒ»????????????????`\nor:\n`\"\"` (Length = 0)\n\nThe issue appears intermittently and is difficult to reproduce deterministically, but becomes noticeable under frequent clipboard updates. Note that using `Clipboard.ContainsText(TextDataFormat.UnicodeText)` and  `Clipboard.GetText(TextDataFormat.UnicodeText)` has the exact same problem.\n\n### Reproduction Steps\n\n1. Create a WPF application targeting .NET 10.\n2. Monitor clipboard changes using WM_CLIPBOARDUPDATE.\n3. On clipboard updates, call Clipboard.GetText() to retrieve text contents.\n4. Frequently copy Unicode text to Clipboard\n\nMinimal example:\n\nif (Clipboard.ContainsText()) // You can also use Clipboard.ContainsText(TextDataFormat.UnicodeText)\n{\n    // Occasionally returns empty string or mojibake\n    string text = Clipboard.GetText(); // Clipboard.GetText(TextDataFormat.UnicodeText)\n}\n\nIntermittently, the returned string is either empty (this is more common) or contains corrupted characters instead of the original Unicode text (this is rarer).\n\n### Expected behavior\n\nExpected behavior\n\n`Clipboard.GetText()` should consistently return the correct Unicode text as placed on the clipboard, or throw a managed exception if the clipboard data is temporarily unavailable.\n\nIt should never silently return corrupted text or an empty string when valid Unicode text exists.\n\n### Actual behavior\n\nClipboard.GetText() intermittently returns:\n1. An empty string (Length == 0)\n2. Or a string containing mojibake (e.g., ?, ãƒ»), or\n\nNo exception is thrown in these cases.\n\n### Regression?\n\nYes.\n\nYes. This code path worked reliably in previous .NET versions. I never had a problem with .NET 5, .NET 6, .NET 7, .NET 8, .NET 9.\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\n_No response_\n\n### Configuration\n\n_No response_\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11402","RelatedDescription":"Open issue \"Regression: Clipboard.GetText() returns empty string or corrupted text (mojibake) randomly in .NET 10\" (#11402)"},{"Id":"3871077771","IsPullRequest":false,"CreatedAt":"2026-01-29T14:48:18","Actor":"rampaa","Number":"11401","RawContent":null,"Title":"Regression in .NET 10: CFG violation (Indirect call guard check) when accessing Clipboard","State":"open","Body":"### Description\n\nAfter upgrading to .NET 10, an application intermittently crashes with an unhandled exception:\n\n`Indirect call guard check detected invalid `control` transfer`\n\nThe crash occurs inside `Clipboard.ContainsText()` when it is called in response to `WM_CLIPBOARDUPDATE`. The same code path worked reliably in previous .NET versions.\n\n### Reproduction Steps\n\n1. Create a WPF application targeting .NET 10.\n2. Register for clipboard notifications using `AddClipboardFormatListener`.\n3. Handle `WM_CLIPBOARDUPDATE` in a custom WndProc.\n4. Call `Clipboard.ContainsText()` asynchronously from the message handler.\n\nMinimal repro code:\n\n```csharp\nprivate static nint WndProc(nint hwnd, int msg, nint wParam, nint lParam, ref bool handled)\n{\n    if (msg == WM_CLIPBOARDUPDATE)\n    {\n                _ = Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Send, () =>\n                {\n                           _ = CopyFromClipboard();\n                });\n\n        handled = true;\n    }\n\n    return 0;\n}\n```\n\n```csharp\nprivate async Task<bool> CopyFromClipboard()\n{\n    while (Clipboard.ContainsText())\n    {\n        try\n        {\n            string text = Clipboard.GetText();\n            return true;\n        }\n        catch (ExternalException)\n        {\n            await Task.Delay(5).ConfigureAwait(true);\n        }\n    }\n\n    return false;\n}\n```\n\nRun the app and frequently change clipboard contents (e.g., copy text rapidly from different applications).\n\nEventually, the process crashes with the CFG error.\n\n### Expected behavior\n\n`Clipboard.ContainsText()` should either:\n\n1. Return a boolean result, or\n2. Throw a managed exception (e.g., `ExternalException`) if the clipboard is temporarily unavailable.\n\nIt should never cause a native crash or trigger a Control Flow Guard violation.\n\n### Actual behavior\n\nThe application crashes with an unhandled native exception:\n\n```\nUnhandled exception at 0x00007FFE23CC728F in JL.exe: \nIndirect call guard check detected invalid control transfer.\n```\n\nA crash dump shows the fault occurring inside Clipboard.ContainsText().\n\nThe exception cannot be caught in managed code.\n\nHere's the full dump: https://mega.nz/file/z0FwBTCB#sssXKDAROlucZkEEVLPR5LKwxTfNex30nPqbgUl99mM \n\n### Regression?\n\nYes. This code path worked reliably in previous .NET versions. I never had a problem with .NET 5, .NET 6, .NET 7, .NET 8, .NET 9.\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\n_No response_\n\n### Configuration\n\n_No response_\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11401","RelatedDescription":"Open issue \"Regression in .NET 10: CFG violation (Indirect call guard check) when accessing Clipboard\" (#11401)"},{"Id":"3870310107","IsPullRequest":false,"CreatedAt":"2026-01-29T12:04:07","Actor":"GrafJ-AUMA","Number":"11400","RawContent":null,"Title":"TargetNullValue causes null value in Slider Controls","State":"open","Body":"### Description\n\nI am using a slider, bound to a nullable decimal in a view model. It's a percentage value from 0 to 100 in with 0.1 accuarcy. I defined a TargetNullValue at 50. If I click on the slider to move it a slinge step (IsMoveToPointEnabled=\"False\") and I reach the TargetNullValue, the value get set to null.\n\n### Reproduction Steps\n\n1. Create a new empty WPF Project\n2. Add a slider bound to a nullable decimal in a view model\n3. Define a TargetNullValue for the bound value\n4. Set Min to 0 and max to 100\n5. Click as long as needed to move the slider to the target null value\n\n### Expected behavior\n\nThe value gets set and is not null. If I moved the slider before (Sliding aroung), it works as expected.\n\n### Actual behavior\n\nThe bound value is set to null.\n\n### Regression?\n\n_No response_\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\n_No response_\n\n### Configuration\n\n.NET Framework 4.8 on Windows 11 x64\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11400","RelatedDescription":"Open issue \"TargetNullValue causes null value in Slider Controls\" (#11400)"},{"Id":"3870247057","IsPullRequest":false,"CreatedAt":"2026-01-29T11:46:56","Actor":"PavelKotrc","Number":"11399","RawContent":null,"Title":"No \"top-left cell\" in DataGrid with custom RowHeader template but no actual rows","State":"open","Body":"### Description\n\nI have a custom class derived from `DataGrid` which adds a template for the \"new item placeholder row\" header. However, if the `ItemsSource` is empty, there is no \"top-left cell\" in the grid so the actual first column header appears above that placeholder:\n\n<img width=\"214\" height=\"80\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/11d0797a-d276-49f4-87cf-59fc34a543ff\" />\n\nIt's only after I add a row that the full column header is shifted to the right, leaving space for the \"top-left cell\":\n\n<img width=\"244\" height=\"109\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bfe8df09-4404-4d9c-bc65-d20b24ca861a\" />\n\nThis layout then persists even when I remove the row:\n\n<img width=\"245\" height=\"77\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/33aa6296-6d8b-47ad-919e-95459875e52f\" />\n\nIs that by design or a bug? Could I force the grid to create the \"top-left cell\" even when empty?\n\n### Reproduction Steps\n\nThis is the style I use for my `DataGridWithAddButton` control.\n\n```\n   <Style\n        x:Key=\"DataGrid.RowHeader.Style.WithAddButton\"\n        TargetType=\"{x:Type DataGridRowHeader}\">\n        <Style.Triggers>\n            <MultiDataTrigger>\n                <MultiDataTrigger.Conditions>\n                    <Condition Binding=\"{Binding RelativeSource={RelativeSource Self}, Converter={converters:HasAncestorOfTypeConverter}, ConverterParameter={x:Type localControls:DataGridWithAddButton}}\" Value=\"True\" />\n                    <Condition Binding=\"{Binding CanUserAddRows, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}\" Value=\"True\" />\n                    <Condition Binding=\"{Binding IsNewItem, RelativeSource={RelativeSource AncestorType={x:Type DataGridRow}}}\" Value=\"True\" />\n                </MultiDataTrigger.Conditions>\n                <MultiDataTrigger.Setters>\n                    <Setter Property=\"ContentTemplate\">\n                        <Setter.Value>\n                            <DataTemplate>\n                                <Button\n                                    Command=\"{Binding AddItemCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=localControls:DataGridWithAddButton}}\"\n                                    DataContext=\"{Binding DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}\">\n                                    <Path Data=\"{StaticResource Geometry.Plus}\" Style=\"{StaticResource Theme.Path.Style.Small}\" />\n                                </Button>\n                            </DataTemplate>\n                        </Setter.Value>\n                    </Setter>\n                </MultiDataTrigger.Setters>\n            </MultiDataTrigger>\n        </Style.Triggers>\n    </Style>\n\n    <Style\n        x:Key=\"{x:Type localControls:DataGridWithAddButton}\"\n        TargetType=\"{x:Type localControls:DataGridWithAddButton}\">\n        <Setter Property=\"RowHeaderStyle\" Value=\"{StaticResource DataGrid.RowHeader.Style.WithAddButton}\" />\n        <Setter Property=\"CanUserAddRows\" Value=\"True\" />\n        <Setter Property=\"HeadersVisibility\" Value=\"All\" />\n    </Style>\n\n```\n\n### Expected behavior\n\nThe \"top-left cell\" is created if a new row placeholder is visible and its row header is not empty.\n\n### Actual behavior\n\nNo \"top-left cell\" is created, making the layout inconsistent between \"no rows were created\" and \"rows were created but then deleted\".\n\n### Regression?\n\n_No response_\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\n_No response_\n\n### Configuration\n\n.NET 10, Windows 11 Pro 25H2\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11399","RelatedDescription":"Open issue \"No \"top-left cell\" in DataGrid with custom RowHeader template but no actual rows\" (#11399)"},{"Id":"3869023963","IsPullRequest":true,"CreatedAt":"2026-01-29T09:04:58","Actor":"dotnet-maestro[bot]","Number":"11398","RawContent":null,"Title":"[main] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\n\n[marker]: <> (Begin:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\n- **Subscription**: [f8781171-8d89-4d6b-f62b-08d8e93a0c51](https://maestro.dot.net/subscriptions?search=f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n- **Build**: [20260128.2](https://dev.azure.com/dnceng/internal/_build/results?buildId=2890268) ([299259](https://maestro.dot.net/channel/8297/azdo:dnceng:internal:dotnet-wpf-int/build/299259))\n- **Date Produced**: January 29, 2026 5:57:47 AM UTC\n- **Commit**: [2cf3c828019cfdc1544699673e916ec3a5688422](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?_a=history&version=GC2cf3c828019cfdc1544699673e916ec3a5688422)\n- **Branch**: [refs/heads/main](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?version=GBrefs/heads/main)\n\n[DependencyUpdate]: <> (Begin)\n\n- **Dependency Updates**:\n  - From [10.0.0-rc.2.26076.3 to 10.0.0-rc.2.26078.2][1]\n     - Microsoft.DotNet.Wpf.DncEng\n\n[1]: https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int/branches?baseVersion=GC492d609ba90e905ddca487c03983e8903a7af6ba&targetVersion=GC2cf3c828019cfdc1544699673e916ec3a5688422&_a=files\n\n[DependencyUpdate]: <> (End)\n\n\n[marker]: <> (End:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11398)","Url":"https://github.com/dotnet/wpf/pull/11398","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#11398)"},{"Id":"3859016597","IsPullRequest":true,"CreatedAt":"2026-01-29T05:23:58","Actor":"dotnet-maestro[bot]","Number":"11393","RawContent":null,"Title":"[main] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\n\n[marker]: <> (Begin:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\n- **Subscription**: [f8781171-8d89-4d6b-f62b-08d8e93a0c51](https://maestro.dot.net/subscriptions?search=f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n- **Build**: [20260126.3](https://dev.azure.com/dnceng/internal/_build/results?buildId=2888512) ([298963](https://maestro.dot.net/channel/8297/azdo:dnceng:internal:dotnet-wpf-int/build/298963))\n- **Date Produced**: January 27, 2026 6:57:53 AM UTC\n- **Commit**: [492d609ba90e905ddca487c03983e8903a7af6ba](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?_a=history&version=GC492d609ba90e905ddca487c03983e8903a7af6ba)\n- **Branch**: [refs/heads/main](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?version=GBrefs/heads/main)\n\n[DependencyUpdate]: <> (Begin)\n\n- **Dependency Updates**:\n  - From [10.0.0-rc.1.26072.5 to 10.0.0-rc.2.26076.3][2]\n     - Microsoft.DotNet.Wpf.DncEng\n\n[2]: https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int/branches?baseVersion=GCe199317d2067530ae8ca89dad14576ae2c2ac5d9&targetVersion=GC492d609ba90e905ddca487c03983e8903a7af6ba&_a=files\n\n[DependencyUpdate]: <> (End)\n\n\n[marker]: <> (End:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n\n\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11393)\n\n\n","Url":"https://github.com/dotnet/wpf/pull/11393","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#11393)"},{"Id":"3863190352","IsPullRequest":true,"CreatedAt":"2026-01-29T05:23:36","Actor":"dotnet-maestro[bot]","Number":"11395","RawContent":null,"Title":"[release/10.0] Source code updates from dotnet/dotnet","State":"closed","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n[marker]: <> (Begin:2d003289-13dc-445c-a652-0b25a8fa6f91)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [2d003289-13dc-445c-a652-0b25a8fa6f91](https://maestro.dot.net/subscriptions?search=2d003289-13dc-445c-a652-0b25a8fa6f91)\n- **Build**: [20260127.13](https://dev.azure.com/dnceng/internal/_build/results?buildId=2888828) ([299030](https://maestro.dot.net/channel/5173/github:dotnet:dotnet/build/299030))\n- **Date Produced**: January 27, 2026 11:55:19 PM UTC\n- **Commit**: [74dc6e4ed64cc0255a6be520761a857dda273863](https://github.com/dotnet/dotnet/commit/74dc6e4ed64cc0255a6be520761a857dda273863)\n- **Commit Diff**: [50eb0da...74dc6e4](https://github.com/dotnet/dotnet/compare/50eb0da036c4744046e4ef9a500d918f9bdc8e0b...74dc6e4ed64cc0255a6be520761a857dda273863)\n- **Branch**: [release/10.0.1xx](https://github.com/dotnet/dotnet/tree/release/10.0.1xx)\n\n**Updated Dependencies**\n- From [10.0.0-beta.26076.112 to 10.0.0-beta.26077.113][1]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [10.0.4-servicing.26076.112 to 10.0.4-servicing.26077.113][1]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.Private.Windows.Core.TestUtilities\n- From [10.0.4 to 10.0.4][1]\n  - Microsoft.NETCore.App.Ref\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:2d003289-13dc-445c-a652-0b25a8fa6f91)\n\n[1]: https://github.com/dotnet/dotnet/compare/50eb0da036...74dc6e4ed6\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/runtime/compare/7b97930a18a1a43cd5aa66913fdc713cdf7b3fb0...f8d2bbfad55e9ad36752dd48c9fc1106ddb0bf82\n- https://github.com/dotnet/source-build-reference-packages/compare/1874f85bc4a380fd17e16a553135f18acb08e4de...a70be36924089f0b45f57465e9e52b3d7692e687\n- https://github.com/dotnet/windowsdesktop/compare/9d7200103cb04c9089e0d93528b03c5be32a65d4...3604983ee462d682e0da2bc15cc5ab125877ba77\n- https://github.com/dotnet/winforms/compare/dce856252b75780a80b956e5e968bfcc19a9e2a5...45538d5f3573a75690aac3540bda8380281d5c00\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:74dc6e4ed64cc0255a6be520761a857dda273863..https://github.com/dotnet/wpf:darc-release/10.0-68fb1110-455a-476d-a380-28de8755e7b9\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11395)","Url":"https://github.com/dotnet/wpf/pull/11395","RelatedDescription":"Closed or merged PR \"[release/10.0] Source code updates from dotnet/dotnet\" (#11395)"},{"Id":"3868322239","IsPullRequest":true,"CreatedAt":"2026-01-29T05:23:13","Actor":"dotnet-maestro[bot]","Number":"11396","RawContent":null,"Title":"[main] Source code updates from dotnet/dotnet","State":"closed","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n[marker]: <> (Begin:f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [f1124ab6-1481-4f33-a146-eb9bc5b1b331](https://maestro.dot.net/subscriptions?search=f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n- **Build**: [20260128.10](https://dev.azure.com/dnceng/internal/_build/results?buildId=2889772) ([299216](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/299216))\n- **Date Produced**: January 28, 2026 10:27:22 PM UTC\n- **Commit**: [549d1068506d4cf35fcc1f21f6a3014cd43bf3c9](https://github.com/dotnet/dotnet/commit/549d1068506d4cf35fcc1f21f6a3014cd43bf3c9)\n- **Commit Diff**: [93b0344...549d106](https://github.com/dotnet/dotnet/compare/93b03446d269bf71bb3ab1cce56e696913709c8a...549d1068506d4cf35fcc1f21f6a3014cd43bf3c9)\n- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)\n\n**Updated Dependencies**\n- From [11.0.0-beta.26076.102 to 11.0.0-beta.26078.110][1]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [11.0.0-preview.1.26076.102 to 11.0.0-preview.1.26078.110][1]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.App.Ref\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Private.Windows.Core.TestUtilities\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n\n[1]: https://github.com/dotnet/dotnet/compare/93b03446d2...549d106850\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/arcade/compare/238bb95905161ba32b49ed7b8d6964e578652c19...5353d03e27329df35a68fedf3da1fbb26cdd8057\n- https://github.com/dotnet/aspnetcore/compare/7328bdb6f0cf94168f5d4133122f3734a0bb1f24...59d9051d2d057b055718968a77388e9b71f5aa5f\n- https://github.com/dotnet/command-line-api/compare/cf5fd8d696450a48d3cc75a7a1792d34b5303f88...702b2bbdd795ec978c3f2bb395a1a37442c13c8c\n- https://github.com/dotnet/fsharp/compare/966a2c065ed78e35dcc68a864839ae8a967b9d95...f40f00d7d9b8dcc0fb55288029b5e1742b65650f\n- https://github.com/dotnet/msbuild/compare/f5dba4f02a84401e82864c54fc5f3c73e98d8360...b7952333b2a7f444cb9f3b1b1651c9072ea5dd36\n- https://github.com/nuget/nuget.client/compare/1e800480da7b6ee7718cdcc9d992b56e533edbb8...36922e8d5a8915cbb819a33c0cb5e246b1a5f91f\n- https://github.com/dotnet/razor/compare/fc39ce11175b067ed0bc89acf0dc9241cfd63633...184510cd7911b081b30428c740be2dd0aabbff58\n- https://github.com/dotnet/roslyn/compare/675c2b9ea6f3b0cf261735e9db0abb42722ebaa1...8b77cf29e61476ce184687949c3c6bba3d33dcc0\n- https://github.com/dotnet/runtime/compare/ef2aefa57fbcb682b256e5dea94453140f4aac69...b37f7ad8869bde05cc0e1f6e0faba2245006a0a0\n- https://github.com/dotnet/scenario-tests/compare/4fba444e2b54fe7d4fa1ba41b7c0f940c3c22f39...2c0dd466fa060a772a87b9c433495ec0c559d19c\n- https://github.com/dotnet/sdk/compare/fbe064f58659bfd9a963bdf603b1c122228a760c...701f7951f86c4e4d79ee9be0c22fd929961f61ff\n- https://github.com/dotnet/wpf/compare/6e82b1f838430a7bcb7648c3aaf82a6d2f626c2b...06c89e7135d12fdc09a28284fe94cff3da3304aa\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:549d1068506d4cf35fcc1f21f6a3014cd43bf3c9..https://github.com/dotnet/wpf:darc-main-30efd8d5-befd-4fc7-b69b-867bd589ca74\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11396)","Url":"https://github.com/dotnet/wpf/pull/11396","RelatedDescription":"Closed or merged PR \"[main] Source code updates from dotnet/dotnet\" (#11396)"},{"Id":"3868892860","IsPullRequest":true,"CreatedAt":"2026-01-29T05:22:02","Actor":"dotnet-maestro[bot]","Number":"11397","RawContent":null,"Title":"[release/11.0-preview1] Source code updates from dotnet/dotnet","State":"open","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n\n\n\n[marker]: <> (Begin:876570be-5765-4db6-bab7-3a3addd9f72b)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [876570be-5765-4db6-bab7-3a3addd9f72b](https://maestro.dot.net/subscriptions?search=876570be-5765-4db6-bab7-3a3addd9f72b)\n- **Build**: [20260129.22](https://dev.azure.com/dnceng/internal/_build/results?buildId=2890995) ([299553](https://maestro.dot.net/channel/9582/github:dotnet:dotnet/build/299553))\n- **Date Produced**: January 30, 2026 8:39:23 PM UTC\n- **Commit**: [5a1f1d222b4f9fb8b4257b4a2d0bf292c5a4f5b7](https://github.com/dotnet/dotnet/commit/5a1f1d222b4f9fb8b4257b4a2d0bf292c5a4f5b7)\n- **Commit Diff**: [93b0344...5a1f1d2](https://github.com/dotnet/dotnet/compare/93b03446d269bf71bb3ab1cce56e696913709c8a...5a1f1d222b4f9fb8b4257b4a2d0bf292c5a4f5b7)\n- **Branch**: [release/11.0.1xx-preview1](https://github.com/dotnet/dotnet/tree/release/11.0.1xx-preview1)\n\n**Updated Dependencies**\n- From [11.0.0-beta.26076.102 to 11.0.0-beta.26079.122][4]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [11.0.0-preview.1.26076.102 to 11.0.0-preview.1.26079.122][4]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.App.Ref\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Private.Windows.Core.TestUtilities\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:876570be-5765-4db6-bab7-3a3addd9f72b)\n\n\n\n\n[1]: https://github.com/dotnet/dotnet/compare/93b03446d2...6cc44a736e\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11397)\n[2]: https://github.com/dotnet/dotnet/compare/93b03446d2...e65e663912\n\n[3]: https://github.com/dotnet/dotnet/compare/93b03446d2...c87e49a933\n\n[4]: https://github.com/dotnet/dotnet/compare/93b03446d2...5a1f1d222b\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/arcade/compare/238bb95905161ba32b49ed7b8d6964e578652c19...5353d03e27329df35a68fedf3da1fbb26cdd8057\n- https://github.com/dotnet/aspnetcore/compare/7328bdb6f0cf94168f5d4133122f3734a0bb1f24...da09bb7150f44b89891f5edca5ce5628c1c582ed\n- https://github.com/dotnet/fsharp/compare/966a2c065ed78e35dcc68a864839ae8a967b9d95...2196f2014f2cae522c9cc1549b8c9a439bcf9d63\n- https://github.com/dotnet/msbuild/compare/f5dba4f02a84401e82864c54fc5f3c73e98d8360...6b7a28c6dc8c2bd1236656144ecdc964c1dc8064\n- https://github.com/nuget/nuget.client/compare/1e800480da7b6ee7718cdcc9d992b56e533edbb8...1f8b2d8c73219cca458980d161bbe3ede515cfd7\n- https://github.com/dotnet/razor/compare/fc39ce11175b067ed0bc89acf0dc9241cfd63633...2b4639820313afeff383d59261a0ba4643236b25\n- https://github.com/dotnet/roslyn/compare/675c2b9ea6f3b0cf261735e9db0abb42722ebaa1...0341abf5ff9ae53ee9fc6018ed6b282e78fcc56d\n- https://github.com/dotnet/runtime/compare/ef2aefa57fbcb682b256e5dea94453140f4aac69...ed49df765cfe2e6671f53ccd0ca91c143a1c6d5b\n- https://github.com/dotnet/scenario-tests/compare/4fba444e2b54fe7d4fa1ba41b7c0f940c3c22f39...2c0dd466fa060a772a87b9c433495ec0c559d19c\n- https://github.com/dotnet/sdk/compare/fbe064f58659bfd9a963bdf603b1c122228a760c...768aa8ea6c55d78db4df38414e667cad66957a5f\n- https://github.com/microsoft/vstest/compare/dc8416c848534f8fb180dd57bbae0fceababae3a...5ea14d056fb9fd42184f0741481b3812c9ea23ff\n- https://github.com/dotnet/wpf/compare/6e82b1f838430a7bcb7648c3aaf82a6d2f626c2b...06c89e7135d12fdc09a28284fe94cff3da3304aa\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:5a1f1d222b4f9fb8b4257b4a2d0bf292c5a4f5b7..https://github.com/dotnet/wpf:darc-release/11.0-preview1-b6fbc5ca-2d20-4c14-962a-e5abcd58e98b\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)","Url":"https://github.com/dotnet/wpf/pull/11397","RelatedDescription":"Open PR \"[release/11.0-preview1] Source code updates from dotnet/dotnet\" (#11397)"},{"Id":"3863085620","IsPullRequest":false,"CreatedAt":"2026-01-28T01:13:36","Actor":"ahdung","Number":"11394","RawContent":null,"Title":"set `TextBlock.TextAlignment` to `Right` in `DataGridTextColumn.ElementStyle` will cause text overflow to right edge","State":"open","Body":"### Description\n\nset `TextBlock.TextAlignment` to `Right` in `DataGridTextColumn.ElementStyle` will cause text overflow to right edge.\n\n<img width=\"234\" height=\"246\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8995cd82-560b-4ebc-a3bf-39827a4f3eb5\" />\n\n\ntwo thing can eliminate this:\n1. drag move to change column width\n    <img width=\"245\" height=\"256\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/64c03bde-1235-4195-8daa-d185828ae675\" />\n\n2. when content longer than header\n    <img width=\"251\" height=\"246\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/18149275-d261-4579-8705-076a2c113071\" />\n\n### Reproduction Steps\n\nCreate a `.net9.0-windows` `wpf` project, and make a `DataGrid` like this:\n```xaml\n<DataGrid>\n  <DataGrid.Columns>\n    <DataGridTextColumn Header=\"sss\" Binding=\"{Binding}\">\n      <DataGridTextColumn.ElementStyle>\n        <Style TargetType=\"TextBlock\">\n          <Setter Property=\"Background\" Value=\"CornflowerBlue\"></Setter><!--for check-->\n          <Setter Property=\"TextAlignment\" Value=\"Right\"></Setter>\n        </Style>\n      </DataGridTextColumn.ElementStyle>\n    </DataGridTextColumn>\n  </DataGrid.Columns>\n  <DataGrid.Items>\n    <system:String>0</system:String>\n  </DataGrid.Items>\n</DataGrid>\n```\n\n### Expected behavior\n\n<img width=\"235\" height=\"249\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/64c77821-68ec-4bf5-a813-f343073da16b\" />\n\n### Actual behavior\n\nsee description.\n\n### Regression?\n\nI don't know\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\n_No response_\n\n### Configuration\n\n`.net9.0-windows` wpf project\nwindows 10 22H2 x64 chinese lang\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11394","RelatedDescription":"Open issue \"set `TextBlock.TextAlignment` to `Right` in `DataGridTextColumn.ElementStyle` will cause text overflow to right edge\" (#11394)"},{"Id":"3858455660","IsPullRequest":true,"CreatedAt":"2026-01-27T05:34:46","Actor":"dotnet-maestro[bot]","Number":"11391","RawContent":null,"Title":"[release/11.0-preview1] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\n\n[marker]: <> (Begin:a027002a-416f-426d-b3f9-7b315e08ecb3)\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\n- **Subscription**: [a027002a-416f-426d-b3f9-7b315e08ecb3](https://maestro.dot.net/subscriptions?search=a027002a-416f-426d-b3f9-7b315e08ecb3)\n- **Build**: [20260122.5](https://dev.azure.com/dnceng/internal/_build/results?buildId=2885850) ([298549](https://maestro.dot.net/channel/9581/azdo:dnceng:internal:dotnet-wpf-int/build/298549))\n- **Date Produced**: January 23, 2026 5:01:09 AM UTC\n- **Commit**: [e199317d2067530ae8ca89dad14576ae2c2ac5d9](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?_a=history&version=GCe199317d2067530ae8ca89dad14576ae2c2ac5d9)\n- **Branch**: [refs/heads/main](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?version=GBrefs/heads/main)\n\n[DependencyUpdate]: <> (Begin)\n\n- **Dependency Updates**:\n  - From [10.0.0-rc.1.26072.1 to 10.0.0-rc.1.26072.5][1]\n     - Microsoft.DotNet.Wpf.DncEng\n\n[1]: https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int/branches?baseVersion=GCffc19671515aca189112893cf28e2e56156620ac&targetVersion=GCe199317d2067530ae8ca89dad14576ae2c2ac5d9&_a=files\n\n[DependencyUpdate]: <> (End)\n\n\n[marker]: <> (End:a027002a-416f-426d-b3f9-7b315e08ecb3)\n\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11391)","Url":"https://github.com/dotnet/wpf/pull/11391","RelatedDescription":"Closed or merged PR \"[release/11.0-preview1] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#11391)"},{"Id":"3858470412","IsPullRequest":true,"CreatedAt":"2026-01-27T05:34:08","Actor":"dotnet-maestro[bot]","Number":"11392","RawContent":null,"Title":"[release/11.0-preview1] Source code updates from dotnet/dotnet","State":"closed","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n[marker]: <> (Begin:876570be-5765-4db6-bab7-3a3addd9f72b)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [876570be-5765-4db6-bab7-3a3addd9f72b](https://maestro.dot.net/subscriptions?search=876570be-5765-4db6-bab7-3a3addd9f72b)\n- **Build**: [20260126.2](https://dev.azure.com/dnceng/internal/_build/results?buildId=2887733) ([298921](https://maestro.dot.net/channel/9582/github:dotnet:dotnet/build/298921))\n- **Date Produced**: January 27, 2026 12:58:52 AM UTC\n- **Commit**: [93b03446d269bf71bb3ab1cce56e696913709c8a](https://github.com/dotnet/dotnet/commit/93b03446d269bf71bb3ab1cce56e696913709c8a)\n- **Commit Diff**: [4707d71...93b0344](https://github.com/dotnet/dotnet/compare/4707d71d0936130c7ef3fe7c9e5f5f755561c8a8...93b03446d269bf71bb3ab1cce56e696913709c8a)\n- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)\n\n**Updated Dependencies**\n- From [11.0.0-beta.26071.101 to 11.0.0-beta.26076.102][1]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [11.0.0-preview.1.26071.101 to 11.0.0-preview.1.26076.102][1]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.App.Ref\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Private.Windows.Core.TestUtilities\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:876570be-5765-4db6-bab7-3a3addd9f72b)\n\n[1]: https://github.com/dotnet/dotnet/compare/4707d71d09...93b03446d2\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/arcade/compare/b92cc5b406acf996b29a653dd4454b87f1d83c5f...238bb95905161ba32b49ed7b8d6964e578652c19\n- https://github.com/dotnet/aspnetcore/compare/495aa864aefc6ac447b58524fe8fb638828340fc...7328bdb6f0cf94168f5d4133122f3734a0bb1f24\n- https://github.com/dotnet/diagnostics/compare/73f1fdca8d9fb191297a7e687790b804f4e78ef5...970c803abb1ed5657b056cdaf01f1693f437c242\n- https://github.com/dotnet/efcore/compare/37f5733cb7c7963dad6d76164b7a84d0e189cc0b...f9dad29dcf12e79c16123ba71583210e93e3864c\n- https://github.com/dotnet/emsdk/compare/36e24b2207d929b79bb48c9429e8b797bd78e467...34ea87b2e530301557526b558e89f3f031f2a8d9\n- https://github.com/dotnet/msbuild/compare/956df8d3535b74988623fcb89bfb0152a2d70fa3...f5dba4f02a84401e82864c54fc5f3c73e98d8360\n- https://github.com/nuget/nuget.client/compare/a99b70cf718ff7842466a7eaeefa99b471cad517...1e800480da7b6ee7718cdcc9d992b56e533edbb8\n- https://github.com/dotnet/razor/compare/2a02ece9f09e4840edbd63df9f07a95882e062e7...fc39ce11175b067ed0bc89acf0dc9241cfd63633\n- https://github.com/dotnet/roslyn/compare/951310ec7952a4f0f4e050f5a13a4f96e6924bc3...675c2b9ea6f3b0cf261735e9db0abb42722ebaa1\n- https://github.com/dotnet/runtime/compare/0b3ba66a27a82e8a039d32a8d9aa3bd94a4f3e4c...ef2aefa57fbcb682b256e5dea94453140f4aac69\n- https://github.com/dotnet/sdk/compare/7b832810b773255dc516c33e66ad0cda40e067b0...fbe064f58659bfd9a963bdf603b1c122228a760c\n- https://github.com/dotnet/source-build-reference-packages/compare/a0e13ff18ced8402bc99e195cbe495564966b710...ed69460b01b309a944e0f06824f7c46346b3133e\n- https://github.com/dotnet/templating/compare/c5d51362f843d69946043cede0b2a3f6f6eda9ba...b5199e1d3b6c74830c09c76ee05f8d44f5de4908\n- https://github.com/dotnet/windowsdesktop/compare/132afbade9e2ce626f26e27c136f34af73dde2f1...eee407b5298eb0d1c93e75e35dcdcc936368cc6e\n- https://github.com/dotnet/winforms/compare/26275de7f4cd06459d0f3acb820272854565ce7a...49ba9d376a8e36c4864a3c554daeb9fff15e4202\n- https://github.com/dotnet/wpf/compare/48dfd1e6a7239f5c050180699f1b9cc7fd1cb5f9...6e82b1f838430a7bcb7648c3aaf82a6d2f626c2b\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:93b03446d269bf71bb3ab1cce56e696913709c8a..https://github.com/dotnet/wpf:darc-release/11.0-preview1-ae52993d-d259-4883-a67d-79a57b4fd2ff\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11392)","Url":"https://github.com/dotnet/wpf/pull/11392","RelatedDescription":"Closed or merged PR \"[release/11.0-preview1] Source code updates from dotnet/dotnet\" (#11392)"},{"Id":"3845872061","IsPullRequest":true,"CreatedAt":"2026-01-27T05:33:59","Actor":"dotnet-maestro[bot]","Number":"11384","RawContent":null,"Title":"[main] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\n\n[marker]: <> (Begin:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\n- **Subscription**: [f8781171-8d89-4d6b-f62b-08d8e93a0c51](https://maestro.dot.net/subscriptions?search=f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n- **Build**: [20260122.5](https://dev.azure.com/dnceng/internal/_build/results?buildId=2885850) ([298549](https://maestro.dot.net/channel/8297/azdo:dnceng:internal:dotnet-wpf-int/build/298549))\n- **Date Produced**: January 23, 2026 5:01:09 AM UTC\n- **Commit**: [e199317d2067530ae8ca89dad14576ae2c2ac5d9](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?_a=history&version=GCe199317d2067530ae8ca89dad14576ae2c2ac5d9)\n- **Branch**: [refs/heads/main](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?version=GBrefs/heads/main)\n\n[DependencyUpdate]: <> (Begin)\n\n- **Dependency Updates**:\n  - From [10.0.0-rc.1.26072.1 to 10.0.0-rc.1.26072.5][1]\n     - Microsoft.DotNet.Wpf.DncEng\n\n[1]: https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int/branches?baseVersion=GCffc19671515aca189112893cf28e2e56156620ac&targetVersion=GCe199317d2067530ae8ca89dad14576ae2c2ac5d9&_a=files\n\n[DependencyUpdate]: <> (End)\n\n\n[marker]: <> (End:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11384)","Url":"https://github.com/dotnet/wpf/pull/11384","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#11384)"},{"Id":"3845479014","IsPullRequest":true,"CreatedAt":"2026-01-27T05:33:52","Actor":"dotnet-maestro[bot]","Number":"11383","RawContent":null,"Title":"[release/10.0] Source code updates from dotnet/dotnet","State":"closed","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n\n\n[marker]: <> (Begin:2d003289-13dc-445c-a652-0b25a8fa6f91)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [2d003289-13dc-445c-a652-0b25a8fa6f91](https://maestro.dot.net/subscriptions?search=2d003289-13dc-445c-a652-0b25a8fa6f91)\n- **Build**: [20260126.12](https://dev.azure.com/dnceng/internal/_build/results?buildId=2887997) ([298908](https://maestro.dot.net/channel/5173/github:dotnet:dotnet/build/298908))\n- **Date Produced**: January 26, 2026 11:30:12 PM UTC\n- **Commit**: [50eb0da036c4744046e4ef9a500d918f9bdc8e0b](https://github.com/dotnet/dotnet/commit/50eb0da036c4744046e4ef9a500d918f9bdc8e0b)\n- **Commit Diff**: [455f135...50eb0da](https://github.com/dotnet/dotnet/compare/455f1358f39b4d38fa3893c327a45027c4a81843...50eb0da036c4744046e4ef9a500d918f9bdc8e0b)\n- **Branch**: [release/10.0.1xx](https://github.com/dotnet/dotnet/tree/release/10.0.1xx)\n\n**Updated Dependencies**\n- From [10.0.0-beta.26070.104 to 10.0.0-beta.26076.112][3]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [10.0.3-servicing.26070.104 to 10.0.4-servicing.26076.112][3]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.Private.Windows.Core.TestUtilities\n- From [10.0.3 to 10.0.4][3]\n  - Microsoft.NETCore.App.Ref\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:2d003289-13dc-445c-a652-0b25a8fa6f91)\n\n\n\n[1]: https://github.com/dotnet/dotnet/compare/455f1358f3...3633524e6b\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11383)\n[2]: https://github.com/dotnet/dotnet/compare/455f1358f3...1ad3cb0c8b\n\n[3]: https://github.com/dotnet/dotnet/compare/455f1358f3...50eb0da036\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/arcade/compare/9f518f2be968c4c0102c2e3f8c793c5b7f28b731...af17297350d5e5357d2ab3d69369d2a58b8bc4ab\n- https://github.com/dotnet/aspnetcore/compare/d4361d83777feb859fcf453b00f966325ea40e9a...693d402d4e95038134acb00c5fffb10b476f8fdc\n- https://github.com/dotnet/efcore/compare/5f83f179ea87d2386e76f24deef4e86a8cbc4c17...10ac4da764d503cddb866142edd7d2c9bd264b7a\n- https://github.com/dotnet/emsdk/compare/c9497b5318dbe90a52316461514603d5c2bc9ac8...769f1f04904e2b24cd9f879e6a1e3d4bf2160fa8\n- https://github.com/dotnet/runtime/compare/dc5fd7a8dce8309e4add8fd4bd5d8718f221b15a...7b97930a18a1a43cd5aa66913fdc713cdf7b3fb0\n- https://github.com/dotnet/sdk/compare/043eaf5e6e0e4aafc28a5146a3f198fe5f835650...878d3e2175a909bc3953373de970bcb85ee4c2e4\n- https://github.com/dotnet/source-build-reference-packages/compare/ad86fd75a9bf8400b4156c70d984c4d997995472...1874f85bc4a380fd17e16a553135f18acb08e4de\n- https://github.com/dotnet/sourcelink/compare/8a4c758485a7878d6ae31f54cc8c3128ba9d0a99...bd09f317fcb2542199ee478ed4743ac5d97866e7\n- https://github.com/dotnet/templating/compare/d354fe28af14a78be9e9520618d4d210b1e933f3...22976f09c1812cdb8a27308b1893c0126022dfbd\n- https://github.com/dotnet/windowsdesktop/compare/7a871005d2720e65fab60587dc847b29fea3af07...9d7200103cb04c9089e0d93528b03c5be32a65d4\n- https://github.com/dotnet/winforms/compare/88624f3eab9b58347c738a11715a8b585cad34c5...dce856252b75780a80b956e5e968bfcc19a9e2a5\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:50eb0da036c4744046e4ef9a500d918f9bdc8e0b..https://github.com/dotnet/wpf:darc-release/10.0-3a6b4f95-a37f-4e39-9223-0e818996b889\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)","Url":"https://github.com/dotnet/wpf/pull/11383","RelatedDescription":"Closed or merged PR \"[release/10.0] Source code updates from dotnet/dotnet\" (#11383)"},{"Id":"3849934057","IsPullRequest":true,"CreatedAt":"2026-01-27T05:33:49","Actor":"dotnet-maestro[bot]","Number":"11387","RawContent":null,"Title":"[main] Source code updates from dotnet/dotnet","State":"closed","Body":"\n> [!NOTE]\n> This is a codeflow update. It may contain both source code changes from\n> [the VMR](https://github.com/dotnet/dotnet)\n> as well as dependency updates. Learn more [here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).\n\nThis pull request brings the following source code changes\n\n\n\n[marker]: <> (Begin:f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n\n## From https://github.com/dotnet/dotnet\n- **Subscription**: [f1124ab6-1481-4f33-a146-eb9bc5b1b331](https://maestro.dot.net/subscriptions?search=f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n- **Build**: [20260126.2](https://dev.azure.com/dnceng/internal/_build/results?buildId=2887733) ([298921](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/298921))\n- **Date Produced**: January 27, 2026 12:58:52 AM UTC\n- **Commit**: [93b03446d269bf71bb3ab1cce56e696913709c8a](https://github.com/dotnet/dotnet/commit/93b03446d269bf71bb3ab1cce56e696913709c8a)\n- **Commit Diff**: [4707d71...93b0344](https://github.com/dotnet/dotnet/compare/4707d71d0936130c7ef3fe7c9e5f5f755561c8a8...93b03446d269bf71bb3ab1cce56e696913709c8a)\n- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)\n\n**Updated Dependencies**\n- From [11.0.0-beta.26071.101 to 11.0.0-beta.26076.102][3]\n  - Microsoft.DotNet.Arcade.Sdk\n  - Microsoft.DotNet.CodeAnalysis\n  - Microsoft.DotNet.GenAPI\n  - Microsoft.DotNet.Helix.Sdk\n- From [11.0.0-preview.1.26071.101 to 11.0.0-preview.1.26076.102][3]\n  - Microsoft.Dotnet.WinForms.ProjectTemplates\n  - Microsoft.NETCore.App.Ref\n  - Microsoft.NETCore.Platforms\n  - Microsoft.Private.Winforms\n  - System.CodeDom\n  - System.Configuration.ConfigurationManager\n  - System.Diagnostics.EventLog\n  - System.DirectoryServices\n  - System.Drawing.Common\n  - System.Formats.Nrbf\n  - System.IO.Packaging\n  - System.Private.Windows.Core.TestUtilities\n  - System.Reflection.MetadataLoadContext\n  - System.Resources.Extensions\n  - System.Runtime.Serialization.Formatters\n  - System.Security.Cryptography.Xml\n  - System.Security.Permissions\n  - System.Windows.Extensions\n\n[marker]: <> (End:f1124ab6-1481-4f33-a146-eb9bc5b1b331)\n\n\n\n[1]: https://github.com/dotnet/dotnet/compare/4707d71d09...4c4aa36a62\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11387)\n[2]: https://github.com/dotnet/dotnet/compare/4707d71d09...aae1a9b5aa\n\n[3]: https://github.com/dotnet/dotnet/compare/4707d71d09...93b03446d2\n[marker]: <> (Start:Footer:CodeFlow PR)\n\n## Associated changes in source repos\n- https://github.com/dotnet/arcade/compare/b92cc5b406acf996b29a653dd4454b87f1d83c5f...238bb95905161ba32b49ed7b8d6964e578652c19\n- https://github.com/dotnet/aspnetcore/compare/495aa864aefc6ac447b58524fe8fb638828340fc...7328bdb6f0cf94168f5d4133122f3734a0bb1f24\n- https://github.com/dotnet/diagnostics/compare/73f1fdca8d9fb191297a7e687790b804f4e78ef5...970c803abb1ed5657b056cdaf01f1693f437c242\n- https://github.com/dotnet/efcore/compare/37f5733cb7c7963dad6d76164b7a84d0e189cc0b...f9dad29dcf12e79c16123ba71583210e93e3864c\n- https://github.com/dotnet/emsdk/compare/36e24b2207d929b79bb48c9429e8b797bd78e467...34ea87b2e530301557526b558e89f3f031f2a8d9\n- https://github.com/dotnet/msbuild/compare/956df8d3535b74988623fcb89bfb0152a2d70fa3...f5dba4f02a84401e82864c54fc5f3c73e98d8360\n- https://github.com/nuget/nuget.client/compare/a99b70cf718ff7842466a7eaeefa99b471cad517...1e800480da7b6ee7718cdcc9d992b56e533edbb8\n- https://github.com/dotnet/razor/compare/2a02ece9f09e4840edbd63df9f07a95882e062e7...fc39ce11175b067ed0bc89acf0dc9241cfd63633\n- https://github.com/dotnet/roslyn/compare/951310ec7952a4f0f4e050f5a13a4f96e6924bc3...675c2b9ea6f3b0cf261735e9db0abb42722ebaa1\n- https://github.com/dotnet/runtime/compare/0b3ba66a27a82e8a039d32a8d9aa3bd94a4f3e4c...ef2aefa57fbcb682b256e5dea94453140f4aac69\n- https://github.com/dotnet/sdk/compare/7b832810b773255dc516c33e66ad0cda40e067b0...fbe064f58659bfd9a963bdf603b1c122228a760c\n- https://github.com/dotnet/source-build-reference-packages/compare/a0e13ff18ced8402bc99e195cbe495564966b710...ed69460b01b309a944e0f06824f7c46346b3133e\n- https://github.com/dotnet/templating/compare/c5d51362f843d69946043cede0b2a3f6f6eda9ba...b5199e1d3b6c74830c09c76ee05f8d44f5de4908\n- https://github.com/dotnet/windowsdesktop/compare/132afbade9e2ce626f26e27c136f34af73dde2f1...eee407b5298eb0d1c93e75e35dcdcc936368cc6e\n- https://github.com/dotnet/winforms/compare/26275de7f4cd06459d0f3acb820272854565ce7a...49ba9d376a8e36c4864a3c554daeb9fff15e4202\n- https://github.com/dotnet/wpf/compare/48dfd1e6a7239f5c050180699f1b9cc7fd1cb5f9...6e82b1f838430a7bcb7648c3aaf82a6d2f626c2b\n\n<details>\n<summary>Diff the source with this PR branch</summary>\n\n```bash\ndarc vmr diff --name-only https://github.com/dotnet/dotnet:93b03446d269bf71bb3ab1cce56e696913709c8a..https://github.com/dotnet/wpf:darc-main-f364a0ce-02f4-47b2-8bf2-e52c678c766a\n```\n</details>\n\n[marker]: <> (End:Footer:CodeFlow PR)","Url":"https://github.com/dotnet/wpf/pull/11387","RelatedDescription":"Closed or merged PR \"[main] Source code updates from dotnet/dotnet\" (#11387)"},{"Id":"3858104507","IsPullRequest":true,"CreatedAt":"2026-01-26T23:25:50","Actor":"etvorun","Number":"11390","RawContent":null,"Title":"Fix text mapping for special characters","State":"open","Body":"Fixes #11386\r\n\r\n## Problem\r\n\r\nPR #6857 introduced a script comparison check to prevent combining marks from different scripts from staying with their base character during font fallback. While this fixed a legitimate issue, it inadvertently broke emoji sequences because:\r\n\r\n1. **Emoji keycap sequences** like \"1ï¸âƒ£\" consist of:\r\n   - A digit (e.g., '1') - Script: `Common/Digit`\r\n   - Variation Selector 16 (U+FE0F) - Script: `Inherited`\r\n   - Combining Enclosing Keycap (U+20E3) - Script: `Common/Symbol`\r\n\r\n2. The script check saw these as different scripts and broke the combining relationship, causing the text itemizer to split the sequence incorrectly, which led to a crash in Line Services.\r\n\r\n## Solution\r\n\r\nIntroduced the concept of **script-agnostic combining marks** - characters that are designed to modify any base character regardless of script. These include:\r\n\r\n- **Zero Width Joiner (ZWJ)** - U+200D\r\n- **Variation Selectors** - VS1-VS16 (U+FE00-U+FE0F) and IVS (U+E0100-U+E01EF)\r\n- **Combining Diacritical Marks Extended** - U+1AB0-U+1AFF\r\n- **Combining Diacritical Marks Supplement** - U+1DC0-U+1DFF\r\n- **Combining Diacritical Marks for Symbols** - U+20D0-U+20FF (includes U+20E3 keycap)\r\n- **Combining Half Marks** - U+FE20-U+FE2F\r\n- **Emoji Modifiers (Skin tones)** - U+1F3FB-U+1F3FF\r\n\r\nThe fix ensures these script-agnostic marks always stay with their base character, while the original PR #6857 script check still applies to regular combining marks.\r\n\r\n## Changes\r\n\r\n### Native Code (DirectWriteForwarder)\r\n\r\n| File | Change |\r\n|------|--------|\r\n| `IClassification.h` | Added `isExtended` out parameter to `GetCharAttribute` and `IsSameScript` method |\r\n| `TextAnalyzer.cpp` | Updated to use `isExtended` parameter and skip script check for script-agnostic marks |\r\n\r\n### Managed Code (PresentationCore)\r\n\r\n| File | Change |\r\n|------|--------|\r\n| `Classification.cs` | Added `IsScriptAgnosticCombining()` method, updated `GetCharAttribute()` with `isExtended` parameter, added `IsSameScript()` to `ClassificationUtility` |\r\n| `PhysicalFontFamily.cs` | Updated font mapping to use `IsScriptAgnosticCombining` for proper emoji sequence handling |\r\n\r\n\r\n## Testing\r\n\r\n### Manual Testing\r\n- Verified \"1ï¸âƒ£\" and other keycap sequences render correctly\r\n- Verified skin tone emoji modifiers work (e.g., \"ðŸ‘‹ðŸ½\")\r\n- Verified ZWJ sequences work (e.g., family emoji)\r\n- Verified the original issue from PR #6857 is still fixed (combining marks from different scripts still get proper font fallback)\r\n\r\n### Test Cases\r\n```\r\n\"1ï¸âƒ£\" - Keycap sequence (digit + VS16 + combining enclosing keycap)\r\n\"A\\u0650test\" - Latin with Arabic combining mark (should trigger font fallback - PR #6857 fix)\r\n\"ðŸ‘‹ðŸ½\" - Emoji with skin tone modifier\r\n```\r\n\r\n## Risk\r\n\r\n**Low** - The change is additive and only affects the specific case of script-agnostic combining marks. The existing script check from PR #6857 remains in place for all other combining marks.\r\n\r\n## Related Issues/PRs\r\n\r\n- Fixes #6801\r\n- Related to PR #6857 (introduced the regression)\r\n\r\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11390)","Url":"https://github.com/dotnet/wpf/pull/11390","RelatedDescription":"Open PR \"Fix text mapping for special characters\" (#11390)"},{"Id":"3856684522","IsPullRequest":false,"CreatedAt":"2026-01-26T16:28:03","Actor":"IbvChristianMeier","Number":"11389","RawContent":null,"Title":"IDataObjectAsyncCapability in .Net10","State":"open","Body":"### Description\n\nHi there\n\nThe migrating from .Net9 to .Net10 broke our DragDrop implementation for the new Outlook. We had the async DragDrop working for .Net9. But with .Net10, the ComObject needed to cast to the interface \"IDataObjectAsyncCapability\", so the (downloading) operation can be started with \"StartOperation\" (and ended with \"EndOperation) is not accessible anymore in the .Net10 context.\n\n### Reproduction Steps\n\n`        private object GetNativeIDataObject(DragEventArgs e)\n        {\n            // WPF IDataObject zu nativem COM IDataObject konvertieren\n            var wpfDataObject = e.Data;\n\n            // Reflection verwenden um an das native DataObject zu gelangen\n            var field = wpfDataObject.GetType()\n                .GetField(\"_innerData\", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);\n\n            if (field != null)\n            {\n                object innerData = field.GetValue(wpfDataObject);\n                var fields = innerData.GetType().GetFields(System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);\n\n                field = innerData.GetType().GetField(\"_innerData\", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);\n                innerData = field.GetValue(innerData);\n                return innerData;\n            }\n\n            // Alternative: OLE Clipboard verwenden\n            try\n            {\n                var oleDataObject = (System.Runtime.InteropServices.ComTypes.IDataObject)wpfDataObject;\n                return oleDataObject;\n            }\n            catch\n            {\n                return wpfDataObject;\n            }\n        }`\n\nIn .Net10 the private field \"_innerData\" of \"_innerData\" is not accessible anymore and all other available objects do not match the interface signature of \"IDataObjectAsyncCapability\". In .Net9, the object referenced in _innerData._innerData could be casted to \"IDataObjectAsyncCapability\" to download the email to a temporary folder and then processing it further from there.\n\n### Expected behavior\n\nAn ComObject able to cast to \"IDataObjectAsyncCapability\".\n\n### Actual behavior\n\nAn object which is not castable \"IDataObjectAsyncCapability\".\n\n### Regression?\n\nYes, it worked in .Net9.\n\nPlease see attached sample project. The only change has to be made in \"DragDrop_Test.csproj\", line 5:\n\n<TargetFramework>net9.0-windows</TargetFramework>\n\ndoes work\n\n<TargetFramework>net10.0-windows</TargetFramework>\n\ndoes NOT work.\n\n(Please make sure, to clean and rebuild, so VS is executing the code in the correct .Net version context.)\n\n### Known Workarounds\n\nSwitch back to .Net9\n\n### Impact\n\nNew Outlook DragDrop does not work anymore.\n\n### Configuration\n\nVisualStudio 2026 / Windows 11 Pro / .Net9 & .Net10 / WPF\n\n### Other information\n\n[DragDrop_TestSample.zip](https://github.com/user-attachments/files/24864092/DragDrop_TestSample.zip)","Url":"https://github.com/dotnet/wpf/issues/11389","RelatedDescription":"Open issue \"IDataObjectAsyncCapability in .Net10\" (#11389)"},{"Id":"3850103030","IsPullRequest":true,"CreatedAt":"2026-01-24T03:35:01","Actor":"ThomasGoulet73","Number":"11388","RawContent":null,"Title":"[Managed DWrite] Reintroduce IDWriteFactory.CreateTextAnalyzer HRESULT validation","State":"open","Body":"Contributes to dotnet/wpf#5305\r\n\r\n## Description\r\nReintroduces code in `Factory.CreateTextAnalyzer` that I inadvertently removed when migrating from C++/CLI to C# in dotnet/wpf#6171. `IDWriteFactory.CreateTextAnalyzer` doesn't do much so the chance of it returning an error is low. Still, it's better to throw early than to let `Factory.CreateTextAnalyzer` succeed and throw `NullReferenceException` when using the resulting TextAnalyzer.\r\n\r\nThis also makes the tests in dotnet/wpf#11381 that validate that `Factory.CreateTextAnalyzer`  succeeds more meaningful.\r\n\r\nOriginal C++/CLI code:\r\nhttps://github.com/dotnet/wpf/blob/07edfec90dd54bb9126aedd31b6d2a22f4249ee1/src/Microsoft.DotNet.Wpf/src/DirectWriteForwarder/CPP/DWriteWrapper/Factory.cpp#L411-L418\r\n\r\n## Customer Impact\r\nI think the impact is very low, we now get proper exceptions when creating the TextAnalyzer instead of getting a NullReferenceException when using the TextAnalyzer.\r\n\r\n## Regression\r\nYes, was introduced in .Net 9.0 though it has very low impact.\r\n\r\n## Testing\r\nTested locally with the tests from dotnet/wpf#11381.\r\n\r\n## Risk\r\nLow, reintroduces code that was removed.","Url":"https://github.com/dotnet/wpf/pull/11388","RelatedDescription":"Open PR \"[Managed DWrite] Reintroduce IDWriteFactory.CreateTextAnalyzer HRESULT validation\" (#11388)"},{"Id":"3849550507","IsPullRequest":false,"CreatedAt":"2026-01-23T22:47:35","Actor":"etvorun","Number":"11386","RawContent":null,"Title":"App crashes while line breaking text for rendering","State":"open","Body":"### Description\n\nThe issue was found by Visual Studio team while analyzing crashes related to GitHub Copilot Chat\n\n### Reproduction Steps\n\n1. Unzip and open in VS [WpfTextCrash.zip](https://github.com/user-attachments/files/24831793/WpfTextCrash.zip)\n2. Build and run\n3. Click Repro button\n\n### Expected behavior\n\nApp does not crash\n\n### Actual behavior\n\nApp crashes. 100% repro on win11 25H2 with 200% DPI monitor\n\n### Regression?\n\nRegression introduced by #6857\n\n### Known Workarounds\n\n_No response_\n\n### Impact\n\n_No response_\n\n### Configuration\n\nWin 11 25H2, 200% DPI monitor\n\n### Other information\n\n_No response_","Url":"https://github.com/dotnet/wpf/issues/11386","RelatedDescription":"Open issue \"App crashes while line breaking text for rendering\" (#11386)"},{"Id":"3846444628","IsPullRequest":true,"CreatedAt":"2026-01-23T12:38:30","Actor":"harshit7962","Number":"11385","RawContent":null,"Title":"Suppress SM04191 BinaryFormatter CodeQL Warnings","State":"closed","Body":"## Description\r\nThe following changes suppresses SM04191: Use of deserialization without Binder\r\n\r\n## Justification\r\nThis is a known issue. The NRBF deserialization does not support custom data types and is (to a majority of instance) limited to primitives data types. Since `BinaryFormatter` is now obsolete, at runtime, this should likely throw a `PlatformNotSupportedException` unless developers explicitly include unsupported package in their application. This approach ensures backward compatibility, as there are wide variety of usage around this area and we don't want to break existing applications.\r\n<!-- Give a brief summary of the issue and how the pull request is fixing it. -->\r\n\r\n## Customer Impact\r\nNone\r\n<!-- What is the impact to customers of not taking this fix? -->\r\n\r\n## Regression\r\nNo\r\n<!-- Is this fixing a problem that was introduced in the most recent release, ie., fixing a regression? -->\r\n\r\n## Testing\r\nNone\r\n<!-- What kind of testing has been done with the fix. -->\r\n\r\n## Risk\r\nLow\r\n<!-- Please assess the risk of taking this fix. Provide details backing up your assessment. -->\r\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11385)","Url":"https://github.com/dotnet/wpf/pull/11385","RelatedDescription":"Closed or merged PR \"Suppress SM04191 BinaryFormatter CodeQL Warnings\" (#11385)"},{"Id":"3844571913","IsPullRequest":false,"CreatedAt":"2026-01-22T20:11:46","Actor":"seanhalliday","Number":"11382","RawContent":null,"Title":"RenderData.GetContentBounds should cache bounds when possible","State":"open","Body":"I am drawing many lines into a DrawingVisual and based on profiling it is taking longer to compute the bounds each time Visual.PrecomputeContent is called than it is to render it!  The lines are all drawn with a frozen pen so it should be possible to know that the DrawingVisual cannot change and cache the bounding box.  I would even be willing to have a OverrideBounds property on DrawingVisual that I can set when I know the bounding box won't change.\n","Url":"https://github.com/dotnet/wpf/issues/11382","RelatedDescription":"Open issue \"RenderData.GetContentBounds should cache bounds when possible\" (#11382)"},{"Id":"3844301236","IsPullRequest":true,"CreatedAt":"2026-01-22T18:56:48","Actor":"AaronRobinsonMSFT","Number":"11381","RawContent":null,"Title":"Add DirectWriteForwarder unit tests","State":"open","Body":"Using [Visual Studio's Code Coverage tool](https://learn.microsoft.com/visualstudio/test/microsoft-code-coverage-console-tool?view=visualstudio), reported code coverage is **71.7 %**.\r\n\r\nCreated test suite for the DirectWriteForwarder project:\r\n\r\nTest coverage includes:\r\n- Font, FontFace, FontFamily, FontCollection classes\r\n- All enums and structs (FontWeight, FontStretch, FontStyle, etc.)\r\n- FontMetrics and GlyphMetrics calculations\r\n- DWriteMatrix transforms (identity, scale, rotation)\r\n- LocalizedStrings IDictionary implementation\r\n- FontFile, FontSource, FontSourceFactory infrastructure\r\n- FontFileLoader, FontFileStream, FontFileEnumerator\r\n- ItemProps, Span, and ClassificationUtility for text analysis\r\n- TrueTypeSubsetter.ComputeSubset with unsafe code\r\n- Unsafe pointer APIs (TryGetFontTable, GetGlyphIndices, GetGlyphMetrics)\r\n- TextAnalyzer integration tests (Itemize, GetGlyphs, GetGlyphPlacements)\r\n- Edge cases and error handling (boundary conditions, invalid inputs)\r\n\r\nInfrastructure changes:\r\n- Added InternalsVisibleTo for DirectWriteForwarder.Tests in DirectWriteForwarder\r\n- Added InternalsVisibleTo for DirectWriteForwarder.Tests in PresentationCore\r\n- Created test project targeting net10.0-windows with xUnit and FluentAssertions\r\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11381)","Url":"https://github.com/dotnet/wpf/pull/11381","RelatedDescription":"Open PR \"Add DirectWriteForwarder unit tests\" (#11381)"},{"Id":"3842476323","IsPullRequest":true,"CreatedAt":"2026-01-22T11:20:58","Actor":"dotnet-bot","Number":"11380","RawContent":null,"Title":"Localized file check-in by OneLocBuild Task: Build definition ID 217: Build ID 2890397","State":"open","Body":"This is the pull request automatically created by the OneLocBuild task in the build process to check-in localized files generated based upon translation source files (.lcl files) handed-back from the downstream localization pipeline. If there are issues in translations, visit https://aka.ms/icxLocBug and log bugs for fixes. The OneLocBuild wiki is https://aka.ms/onelocbuild and the localization process in general is documented at https://aka.ms/AllAboutLoc.\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11380)","Url":"https://github.com/dotnet/wpf/pull/11380","RelatedDescription":"Open PR \"Localized file check-in by OneLocBuild Task: Build definition ID 217: Build ID 2890397\" (#11380)"},{"Id":"3841422504","IsPullRequest":true,"CreatedAt":"2026-01-22T10:52:14","Actor":"dotnet-maestro[bot]","Number":"11379","RawContent":null,"Title":"[main] Update dependencies from dnceng/internal/dotnet-wpf-int","State":"closed","Body":"This pull request updates the following dependencies\n\n[marker]: <> (Begin:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n## From https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int\n- **Subscription**: [f8781171-8d89-4d6b-f62b-08d8e93a0c51](https://maestro.dot.net/subscriptions?search=f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n- **Build**: [20260122.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2885014) ([298390](https://maestro.dot.net/channel/8297/azdo:dnceng:internal:dotnet-wpf-int/build/298390))\n- **Date Produced**: January 22, 2026 9:14:49 AM UTC\n- **Commit**: [ffc19671515aca189112893cf28e2e56156620ac](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?_a=history&version=GCffc19671515aca189112893cf28e2e56156620ac)\n- **Branch**: [refs/heads/main](https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int?version=GBrefs/heads/main)\n\n[DependencyUpdate]: <> (Begin)\n\n- **Dependency Updates**:\n  - From [10.0.0-rc.1.26069.4 to 10.0.0-rc.1.26072.1][2]\n     - Microsoft.DotNet.Wpf.DncEng\n\n[2]: https://dev.azure.com/dnceng/internal/_git/dotnet-wpf-int/branches?baseVersion=GC467ed5ec008e771dc26913a39f5e38e2f8a4dd3d&targetVersion=GCffc19671515aca189112893cf28e2e56156620ac&_a=files\n\n[DependencyUpdate]: <> (End)\n\n\n[marker]: <> (End:f8781171-8d89-4d6b-f62b-08d8e93a0c51)\n\n\n\n ###### Microsoft Reviewers: [Open in CodeFlow](https://microsoft.github.io/open-pr/?codeflow=https://github.com/dotnet/wpf/pull/11379)\n\n\n","Url":"https://github.com/dotnet/wpf/pull/11379","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dnceng/internal/dotnet-wpf-int\" (#11379)"}],"ResultType":"GitHubIssue"}},"RunOn":"2026-02-02T03:30:32.8806604Z","RunDurationInMilliseconds":571}