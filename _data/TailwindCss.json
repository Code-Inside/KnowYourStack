{"Data":{"TailwindCss-Issues":{"Issues":[{"Id":"2551619128","IsPullRequest":false,"CreatedAt":"2024-09-26T22:20:15","Actor":"blaketradedev","Number":"14533","RawContent":null,"Title":"Tailwind 4.0.0-alpha.25 crashes my 5.0.0-next.259 app on hot reload","State":"open","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\n\"@tailwindcss/postcss\": \"4.0.0-alpha.25\",\r\n\"@tailwindcss/vite\": \"4.0.0-alpha.25\",\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\npnpm 8.15.4, vite 5.4.8, @sveltejs/vite-plugin-svelte 4.0.0-next.7, \r\n\r\n**What version of Node.js are you using?**\r\n\r\nv21.7.1\r\n\r\n**What operating system are you using?**\r\n\r\nmacOS\r\n\r\n**Describe your issue**\r\n\r\nI had tailwind 4.0.0-alpha.19, when I upgraded to .25, the app started to crash every time I saved a file in my sveltekit 5 app, I guess you call it hot reload? I downgraded and the problem went away, so would be great if you guys could check that out ","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14533","RelatedDescription":"Open issue \"Tailwind 4.0.0-alpha.25 crashes my 5.0.0-next.259 app on hot reload\" (#14533)"},{"Id":"2551276647","IsPullRequest":true,"CreatedAt":"2024-09-26T21:50:31","Actor":"PolyMeilex","Number":"14530","RawContent":null,"Title":"Use official FxHash crate","State":"closed","Body":"`fxhash` is an old (and abandoned?) crate that simply extracts the fxhash implementation from rustc. These days, rustc has an official fxhash crate, that is actively maintained by the rust-lang organization.\r\n\r\nIn practice this does not really matter, aside from the new crate having one less dependency (`byteorder`), but I think it's generally a good idea to use something straight from the rust team.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14530","RelatedDescription":"Closed or merged PR \"Use official FxHash crate\" (#14530)"},{"Id":"2551418205","IsPullRequest":true,"CreatedAt":"2024-09-26T20:02:44","Actor":"depfu[bot]","Number":"14532","RawContent":null,"Title":"Update @types/react 18.3.3 ‚Üí 18.3.9 (patch)","State":"closed","Body":"\n\n\n\n\nHere is everything you need to know about this update. Please take a good look at what changed and the test results before merging this pull request.\n\n### What changed?\n\n\n\n\n#### ‚ú≥Ô∏è @‚Äãtypes/react (18.3.3 ‚Üí 18.3.9) ¬∑ [Repo](https://github.com/DefinitelyTyped/DefinitelyTyped)\n\n\n\n\n\nSorry, we couldn't find anything useful about this release.\n\n\n\n\n\n\n\n\n\n\n\n---\n![Depfu Status](https://depfu.com/badges/edd6acd35d74c8d41cbb540c30442adf/stats.svg)\n\n[Depfu](https://depfu.com) will automatically keep this PR conflict-free, as long as you don't add any commits to this branch yourself. You can also trigger a rebase manually by commenting with `@depfu rebase`.\n\n<details><summary>All Depfu comment commands</summary>\n<blockquote><dl>\n<dt>@‚Äãdepfu rebase</dt><dd>Rebases against your default branch and redoes this update</dd>\n<dt>@‚Äãdepfu recreate</dt><dd>Recreates this PR, overwriting any edits that you've made to it</dd>\n<dt>@‚Äãdepfu merge</dt><dd>Merges this PR once your tests are passing and conflicts are resolved</dd>\n<dt>@‚Äãdepfu cancel merge</dt><dd>Cancels automatic merging of this PR</dd>\n<dt>@‚Äãdepfu close</dt><dd>Closes this PR and deletes the branch</dd>\n<dt>@‚Äãdepfu reopen</dt><dd>Restores the branch and reopens this PR (if it's closed)</dd>\n<dt>@‚Äãdepfu pause</dt><dd>Ignores all future updates for this dependency and closes this PR</dd>\n<dt>@‚Äãdepfu pause [minor|major]</dt><dd>Ignores all future minor/major updates for this dependency and closes this PR</dd>\n<dt>@‚Äãdepfu resume</dt><dd>Future versions of this dependency will create PRs again (leaves this PR as is)</dd>\n</dl></blockquote>\n</details>\n\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14532","RelatedDescription":"Closed or merged PR \"Update @types/react 18.3.3 ‚Üí 18.3.9 (patch)\" (#14532)"},{"Id":"2551327205","IsPullRequest":true,"CreatedAt":"2024-09-26T18:57:34","Actor":"thecrypticace","Number":"14531","RawContent":null,"Title":"Remove `process.env.VERSION` check","State":"open","Body":"Fixes #14523","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14531","RelatedDescription":"Open PR \"Remove `process.env.VERSION` check\" (#14531)"},{"Id":"2551150134","IsPullRequest":false,"CreatedAt":"2024-09-26T17:56:43","Actor":"AlemTuzlak","Number":"14527","RawContent":null,"Title":"There seems to be an issue with tailwindcss/nesting plugin","State":"closed","Body":"\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\n3.4.13\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\npostcss 8.4.29\r\n\r\n**What version of Node.js are you using?**\r\n\r\n20\r\n\r\n**What browser are you using?**\r\n\r\nChrome\r\n\r\n**What operating system are you using?**\r\n\r\nWindows\r\n\r\n**Reproduction URL**\r\n\r\n https://github.com/forge42dev/Remix-Dev-Tools/pull/150\r\n\r\n**Describe your issue**\r\n\r\nSo I have a very unique use-case with tailwind, I use it to style `remix-development-tools` which is an OSS library and as such it can't override global styles or anything on the users project/app. I decided to create a class on the root called \"remix-dev-tools\" and use the tailwind nesting plugin to append it to every class generated by tailwind so it does not conflict with users config in any way. This works great for 90% of classes but I've noticed that modifiers such as hover, after, before etc do not get nested, here is an example output of the script:\r\n```css\r\n// this part works awesome!\r\n.remix-dev-tools .transition-all {\r\n  transition-property: all;\r\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\r\n  transition-duration: 150ms;\r\n}\r\n.remix-dev-tools .transition-transform {\r\n  transition-property: transform;\r\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\r\n  transition-duration: 150ms;\r\n}\r\n.remix-dev-tools .duration-1000 {\r\n  transition-duration: 1000ms;\r\n}\r\n.remix-dev-tools .duration-200 {\r\n  transition-duration: 200ms;\r\n}\r\n// this part doesn't :(\r\n.after\\:absolute::after {\r\n  content: var(--tw-content);\r\n  position: absolute;\r\n}\r\n.after\\:-left-2::after {\r\n  content: var(--tw-content);\r\n  left: -0.5rem;\r\n}\r\n.after\\:top-1\\/2::after {\r\n  content: var(--tw-content);\r\n  top: 50%;\r\n}\r\n.after\\:h-0::after {\r\n  content: var(--tw-content);\r\n  height: 0px;\r\n}\r\n.after\\:w-0::after {\r\n  content: var(--tw-content);\r\n  width: 0px;\r\n}\r\n.after\\:-translate-y-1\\/2::after {\r\n  content: var(--tw-content);\r\n  --tw-translate-y: -50%;\r\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\r\n}\r\n.after\\:-rotate-90::after {\r\n  content: var(--tw-content);\r\n  --tw-rotate: -90deg;\r\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\r\n}\r\n.after\\:border-x-4::after {\r\n  content: var(--tw-content);\r\n  border-left-width: 4px;\r\n  border-right-width: 4px;\r\n}\r\n.after\\:border-b-\\[6px\\]::after {\r\n  content: var(--tw-content);\r\n  border-bottom-width: 6px;\r\n}\r\n.after\\:border-x-transparent::after {\r\n  content: var(--tw-content);\r\n  border-left-color: transparent;\r\n  border-right-color: transparent;\r\n}\r\n.after\\:border-b-gray-700::after {\r\n  content: var(--tw-content);\r\n  --tw-border-opacity: 1;\r\n  border-bottom-color: rgb(55 65 81 / var(--tw-border-opacity));\r\n}\r\n.hover\\:cursor-pointer:hover {\r\n  cursor: pointer;\r\n}\r\n.hover\\:bg-\\[\\#121212\\]:hover {\r\n  --tw-bg-opacity: 1;\r\n  background-color: rgb(18 18 18 / var(--tw-bg-opacity));\r\n}\r\n.hover\\:bg-\\[\\#212121\\]\\/50:hover {\r\n  background-color: rgb(33 33 33 / 0.5);\r\n}\r\n.hover\\:text-gray-500:hover {\r\n  --tw-text-opacity: 1;\r\n  color: rgb(107 114 128 / var(--tw-text-opacity));\r\n}\r\n.hover\\:text-green-600:hover {\r\n  --tw-text-opacity: 1;\r\n  color: rgb(22 163 74 / var(--tw-text-opacity));\r\n}\r\n.hover\\:text-red-600:hover {\r\n  --tw-text-opacity: 1;\r\n  color: rgb(220 38 38 / var(--tw-text-opacity));\r\n}\r\n.hover\\:opacity-50:hover {\r\n  opacity: 0.5;\r\n}\r\n.hover\\:ring-2:hover {\r\n  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\r\n  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);\r\n  box-shadow:\r\n    var(--tw-ring-offset-shadow),\r\n    var(--tw-ring-shadow),\r\n    var(--tw-shadow, 0 0 #0000);\r\n}\r\n.hover\\:ring-offset-2:hover {\r\n  --tw-ring-offset-width: 2px;\r\n}\r\n.focus\\:bg-\\[\\#121212\\]:focus {\r\n  --tw-bg-opacity: 1;\r\n  background-color: rgb(18 18 18 / var(--tw-bg-opacity));\r\n}\r\n.focus\\:outline-none:focus {\r\n  outline: 2px solid transparent;\r\n  outline-offset: 2px;\r\n}\r\n.focus\\:ring-2:focus {\r\n  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\r\n  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);\r\n  box-shadow:\r\n    var(--tw-ring-offset-shadow),\r\n    var(--tw-ring-shadow),\r\n    var(--tw-shadow, 0 0 #0000);\r\n}\r\n.focus\\:ring-offset-2:focus {\r\n  --tw-ring-offset-width: 2px;\r\n}\r\n.disabled\\:cursor-not-allowed:disabled {\r\n  cursor: not-allowed;\r\n}\r\n.disabled\\:opacity-50:disabled {\r\n  opacity: 0.5;\r\n}\r\n.group:hover .group-hover\\:visible {\r\n  visibility: visible;\r\n}\r\n.group:hover .group-hover\\:opacity-100 {\r\n  opacity: 1;\r\n}\r\n.data-\\[disabled\\]\\:pointer-events-none[data-disabled] {\r\n  pointer-events: none;\r\n}\r\n.data-\\[side\\=bottom\\]\\:translate-y-1[data-side=bottom] {\r\n  --tw-translate-y: 0.25rem;\r\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\r\n}\r\n.data-\\[side\\=left\\]\\:-translate-x-1[data-side=left] {\r\n  --tw-translate-x: -0.25rem;\r\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\r\n}\r\n.data-\\[side\\=right\\]\\:translate-x-1[data-side=right] {\r\n  --tw-translate-x: 0.25rem;\r\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\r\n}\r\n.data-\\[side\\=top\\]\\:-translate-y-1[data-side=top] {\r\n  --tw-translate-y: -0.25rem;\r\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\r\n}\r\n@keyframes accordion-up {\r\n  from {\r\n    height: var(--radix-accordion-content-height);\r\n  }\r\n  to {\r\n    height: 0;\r\n  }\r\n}\r\n.data-\\[state\\=closed\\]\\:animate-accordion-up[data-state=closed] {\r\n  animation: accordion-up 0.2s ease-out;\r\n}\r\n@keyframes accordion-down {\r\n  from {\r\n    height: 0;\r\n  }\r\n  to {\r\n    height: var(--radix-accordion-content-height);\r\n  }\r\n}\r\n.data-\\[state\\=open\\]\\:animate-accordion-down[data-state=open] {\r\n  animation: accordion-down 0.2s ease-out;\r\n}\r\n.data-\\[disabled\\]\\:opacity-50[data-disabled] {\r\n  opacity: 0.5;\r\n}\r\n@media (min-width: 1024px) {\r\n  .lg\\:\\!flex-row {\r\n    flex-direction: row !important;\r\n  }\r\n}\r\n.\\[\\&\\[data-state\\=open\\]\\>svg\\]\\:rotate-180[data-state=open] > svg {\r\n  --tw-rotate: 180deg;\r\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\r\n}\r\n\r\n```\r\nhere is my PostCSS config:\r\n```ts\r\nimport tailwindcss from \"tailwindcss\";\r\nimport tailwindcssNesting from \"tailwindcss/nesting/index.js\";\r\nimport autoprefixer from \"autoprefixer\";\r\nimport config from \"./tailwind.config.js\";\r\nexport default {\r\n  plugins: [tailwindcss(config),tailwindcssNesting(), autoprefixer()],\r\n};\r\n```\r\nand tailwind.config.js:\r\n```ts\r\n/** @type {import('tailwindcss').Config} */\r\nexport default {\r\n  content: [\"./src/**/*.{tsx,ts,js}\"],\r\n  theme: {\r\n    extend: {\r\n      colors: {\r\n        popover: \"#212121\",\r\n        main: \"#212121\",\r\n        \"popover-foreground\": \"#fff\",\r\n      },\r\n      keyframes: {\r\n        \"accordion-down\": {\r\n          from: { height: 0 },\r\n          to: { height: \"var(--radix-accordion-content-height)\" },\r\n        },\r\n        \"accordion-up\": {\r\n          from: { height: \"var(--radix-accordion-content-height)\" },\r\n          to: { height: 0 },\r\n        },\r\n        \"fade-in-left\": {\r\n          \"0%\": { opacity: 0, transform: \"translateX(-100%)\" },\r\n          \"100%\": { opacity: 1, transform: \"translateX(0)\" },\r\n        },\r\n        \"fade-in\": {\r\n          \"0%\": { opacity: 0 },\r\n          \"100%\": { opacity: 1 },\r\n        },\r\n      },\r\n      animation: {\r\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\r\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\r\n        \"fade-in-left\": \"fade-in-left 0.5s ease-in\",\r\n        \"fade-in\": \"fade-in 0.5s ease-in\",\r\n      },\r\n    },\r\n  }, \r\n  plugins: [await import(\"tailwindcss-animate\")],\r\n \r\n};\r\n\r\n```\r\n\r\nI guess my question is: \r\nIs this some sort of misconfiguration on my end where I'm missing something obvious as the docs are very minimal in terms of GOTCHAs? Or is there some sort of limitation/restriction I'm not aware of that causes this behavior? I've provided the url so you can see it, it's enough to run npm install and npm run build and open up `dist/client.css`","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14527","RelatedDescription":"Closed issue \"There seems to be an issue with tailwindcss/nesting plugin\" (#14527)"},{"Id":"2550891507","IsPullRequest":true,"CreatedAt":"2024-09-26T15:53:41","Actor":"RobinMalfait","Number":"14525","RawContent":null,"Title":"Ensure that `@utility` is top-level and cannot be nested","State":"closed","Body":"This PR fixes an issue where we expect the `@utility` to be top-level, but we didn't enforce it. This PR enforces that the `@utility` is top-level.\n\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14525","RelatedDescription":"Closed or merged PR \"Ensure that `@utility` is top-level and cannot be nested\" (#14525)"},{"Id":"2550923673","IsPullRequest":true,"CreatedAt":"2024-09-26T15:27:38","Actor":"philipp-spiess","Number":"14526","RawContent":null,"Title":"Template migrations: Add automatic var injection codemods","State":"open","Body":"In v4, we're [removing automatic var injection](https://github.com/tailwindlabs/tailwindcss/pull/13657) (please refer to this PR for more detail as to why). \r\n\r\nAutomatic var injection made it so that if you have a candidate like `bg-[--my-color]`, v3 would automatically wrap the content of the arbitrary section with a `var(‚Ä¶)`, resulting in the same as typing `bg-[var(--my-color)]`.\r\n\r\nThis PR adds codemods that go over various arbitrary fields and does the `var(‚Ä¶)` injection for you. To be precise, we will add `var(‚Ä¶)` to:\r\n\r\n- Modifiers, e.g.: `bg-red-500/[var(--my-opacity)]`\r\n- Variants, e.g.:  `supports-[var(--test)]:flex`\r\n- Arbitrary candidates, e.g.: `[color:var(--my-color)]`\r\n- Arbitrary values for functional candidates, e.g.: `bg-[var(--my-color)]`\r\n\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14526","RelatedDescription":"Open PR \"Template migrations: Add automatic var injection codemods\" (#14526)"},{"Id":"2550556927","IsPullRequest":true,"CreatedAt":"2024-09-26T13:13:28","Actor":"philipp-spiess","Number":"14524","RawContent":null,"Title":"Template migrations: Add variant order codemods","State":"open","Body":"One of the breaking changes of v4 is the [inversion of variant order application](https://github.com/tailwindlabs/tailwindcss/pull/13478). In v3, variants are applied \"inside-out\".\r\n\r\n\r\nFor example a candidate like `*:first:underline` would produce the following CSS in v3:\r\n\r\n```css\r\n.\\*\\:first\\:underline:first-child > * {\r\n  text-decoration-line: underline;\r\n}\r\n```\r\n\r\nTo get the same behavior in v4, you would need to invert the candidate order to `first:*:underline`. This would generate the following CSS in v4:\r\n\r\n```css\r\n:where(.first\\:\\*\\:underline:first-child > *) {\r\n  text-decoration-line: underline;\r\n}\r\n```\r\n\r\n## The Migration\r\n\r\nThe most naive approach would be to invert the variants for every candidate with at least two variants. This, however, runs into one issue and some unexpected inconsistencies. I have identified the following areas:\r\n\r\n1. Some pseudo class variants _must appear at the end of the selector_. v3 was patching over this by doing some manual reordering in for these variants. For example, in v3, both of these variants create the same output CSS: `hover:before:underline` and `before:hover:underline`. In v4 we simplified this system though and no longer generate the same output in both cases. Instead, you'd always want to write `hover:before:underline`, ensuring that these variants will appear at the end.\r\n   \r\n   For an exact list of which variants these affect, take a look [at this diff](https://github.com/tailwindlabs/tailwindcss/pull/13478/files#diff-7779a0eebf6b980dd3abd63b39729b3023cf9a31c91594f5a25ea020b066e1c0L228-L246). \r\n\r\n2. The `dark` variant and other media query variants are usually written before other variants. This is more of a recommendation to make it easier to read candidates rather than a difference in behavior as `@media` queries are hoisted by the engine. For this reason, both of these variants are _correct_ yet in real applications we prefer the first one: `lg:hover:underline`, `hover:lg:underline`. \r\n   \r\n   To avoid shuffling these rules across all candidates during the migration, we bucket `dark` and other `@media` variants into a special bucket that will not have their order changed (since people wrote stacks like `sm:max-lg:` before and we want to keep them as-is) and appear before all other variants.\r\n\r\n3. For some variant stacks, the order does not matter. E.g.: `focus:hover:underline` and `hover:focus:underline` will be the same. We don't want to needlessly shuffle their order if we have to. \r\n\r\nWith these considerations, the migration now works as follows:\r\n\r\n- If there is less then two variants, we do not need to migrate the candidate\r\n- If _every_ variant in the stack is an order-independent variant, we do not need to migrate the candidate\r\n  - _Note that this is currently hardcoded to only support `&:hover` and `&:focus`._\r\n- Otherwise, we loop over the candidates and put them into three buckets:\r\n  - `mediaVariants` hold variants that only contribute `@media` rules _and_ the `dark` variant.\r\n  - `pseudoElementVariants` hold variants that _must appear at the end of the selector_. This is based on the allow list from v3/early v4.\r\n  - `regularVariants` contains the rest.\r\n-  With this list of variants, we now construct the new order of variants as:\r\n   \r\n   ```ts\r\n   [...mediaVariants, ...regularVariants.reverse(), ...pseudoElementVariants.reverse()]\r\n   ```\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14524","RelatedDescription":"Open PR \"Template migrations: Add variant order codemods\" (#14524)"},{"Id":"2550212475","IsPullRequest":false,"CreatedAt":"2024-09-26T10:43:24","Actor":"aaronadamsCA","Number":"14523","RawContent":null,"Title":"Fix compiler in non-Node.js environments?","State":"open","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\nSince `v4.0.0-alpha.21`\r\n\r\n<!-- **What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\nN/A\r\n\r\n**What version of Node.js are you using?**\r\n\r\nN/A\r\n\r\n**What browser are you using?**\r\n\r\nN/A\r\n\r\n**What operating system are you using?**\r\n\r\nCloudflare Workers -->\r\n\r\n**Reproduction URL**\r\n\r\nI'm not sure it's necessary, plus let's first confirm you even want to support this scenario.\r\n\r\n**Describe your issue**\r\n\r\nUntil recently I could `import { compile } from \"tailwindcss\"` in a worker (or, presumably, browser) runtime and build a Tailwind stylesheet from my own list of candidate classes. This was awesome because we could compile certain Tailwind styles at runtime instead of build time.\r\n\r\nStarting with `v4.0.0-alpha.21` this is broken because of a new unguarded reference to `process.env`:\r\n\r\nhttps://app.renovatebot.com/package-diff?name=tailwindcss&from=4.0.0-alpha.20&to=4.0.0-alpha.21\r\n\r\nI'm not sure this is a bug _per se_, because I don't know if you officially support running the compiler directly in non-Node.js environments.\r\n\r\nBut‚Ä¶ could you? Would you? Our use case doesn't require a scanner, because our classes are in pure HTML, where a regex works flawlessly; we just need the compiler to build the CSS (AFAIK the same is true for Tailwind Play).\r\n\r\nObviously we can polyfill `process` to work around this for now, but I wanted to get your POV here. It seems to me if the compiler could pass tests in both Node.js and browser environments, you'd have a pure ESM package that could run anywhere, including worker runtimes. I just don't know if it's something you want to support.","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14523","RelatedDescription":"Open issue \"Fix compiler in non-Node.js environments?\" (#14523)"},{"Id":"2549821464","IsPullRequest":false,"CreatedAt":"2024-09-26T10:32:47","Actor":"bep","Number":"14521","RawContent":null,"Title":"cli: Reading from stdin is broken in 4.0.0-alpha.25","State":"closed","Body":"\r\n```\r\nmkdir tailwindtest\r\ncd tailwindtest\r\nnpm i @tailwindcss/cli@4.0.0-alpha.25 tailwindcss@4.0.0-alpha.25 --save-dev\r\necho \"@import 'tailwindcss';\" > foo.css\r\n\r\n```\r\nThis works:\r\n\r\n```\r\nnpx tailwindcss  -i foo.css -o bar.css\r\n```\r\n\r\nThis fails:\r\n\r\n```\r\nnpx tailwindcss  --input=- -o bar.css < foo.css\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n~/d/tailwindbug ‚ùØ‚ùØ‚ùØ npx tailwindcss  --input=- -o bar.css < foo.css                                                                             main ‚ú± ‚óº\r\n/Users/bep/dump/tailwindbug/node_modules/enhanced-resolve/lib/Resolver.js:564\r\n\t\t\tconst error = new Error(\"Can't \" + message);\r\n\t\t\t             ^\r\n\r\nError: Can't resolve 'tailwindcss' in '/Users/bep/dump'\r\n    at finishWithoutResolve (/Users/bep/dump/tailwindbug/node_modules/enhanced-resolve/lib/Resolver.js:564:18)\r\n    at /Users/bep/dump/tailwindbug/node_modules/enhanced-resolve/lib/Resolver.js:656:15\r\n    at /Users/bep/dump/tailwindbug/node_modules/enhanced-resolve/lib/Resolver.js:718:5\r\n    at eval (eval at create (/Users/bep/dump/tailwindbug/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1)\r\n    at /Users/bep/dump/tailwindbug/node_modules/enhanced-resolve/lib/Resolver.js:718:5\r\n    at eval (eval at create (/Users/bep/dump/tailwindbug/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:16:1)\r\n    at /Users/bep/dump/tailwindbug/node_modules/enhanced-resolve/lib/Resolver.js:718:5\r\n    at eval (eval at create (/Users/bep/dump/tailwindbug/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1)\r\n    at /Users/bep/dump/tailwindbug/node_modules/enhanced-resolve/lib/Resolver.js:718:5\r\n    at eval (eval at create (/Users/bep/dump/tailwindbug/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1) {\r\n  details: \"resolve 'tailwindcss' in '/Users/bep/dump'\\n\" +\r\n    '  Parsed request is a module\\n' +\r\n    '  No description file found in /Users/bep/dump or above\\n' +\r\n    '  resolve as module\\n' +\r\n    \"    /Users/bep/dump/node_modules doesn't exist or is not a directory\\n\" +\r\n    \"    /Users/bep/node_modules doesn't exist or is not a directory\\n\" +\r\n    \"    /Users/node_modules doesn't exist or is not a directory\\n\" +\r\n    \"    /node_modules doesn't exist or is not a directory\"\r\n```\r\n\r\nDowngrading to alpha 24 and it works:\r\n\r\n```\r\nnpm i @tailwindcss/cli@4.0.0-alpha.24 tailwindcss@4.0.0-alpha.24 --save-dev\r\nnpx tailwindcss  --input=- -o bar.css < foo.css\r\n```","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14521","RelatedDescription":"Closed issue \"cli: Reading from stdin is broken in 4.0.0-alpha.25\" (#14521)"},{"Id":"2550018447","IsPullRequest":true,"CreatedAt":"2024-09-26T10:32:46","Actor":"philipp-spiess","Number":"14522","RawContent":null,"Title":"CLI: Use the right `base` when loading files from `stdin`","State":"closed","Body":"Fixes #14521\r\n\r\nWhen using the CLI to read files from `stdin` like this:\r\n\r\n```bash\r\nnpx tailwindcss  --input=- -o bar.css < foo.css\r\n```\r\n\r\nWe need to set the `base` path to be the current working directory (`process.cwd()`). However, `cwd()` already _is_ a directory and calling `dirname()` on it did go to the parent directory _which might not have the `tailwindcss` dependency installed.\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14522","RelatedDescription":"Closed or merged PR \"CLI: Use the right `base` when loading files from `stdin`\" (#14522)"},{"Id":"2548259465","IsPullRequest":true,"CreatedAt":"2024-09-25T16:39:01","Actor":"RobinMalfait","Number":"14518","RawContent":null,"Title":"CSS codemod: ensure we don't lose selectors","State":"closed","Body":"This PR fixes an issue where a CSS rule with a selector that contains multiple selectors lost everything but the last selector.\n\nWhile testing the `npx @tailwindcss/upgrade` codemods on real world projects, I noticed that we lost one of the selectors in the `docker/docs` repository. \n\n```diff\ndiff --git a/assets/css/toc.css b/assets/css/toc.css\nindex 91ff92d7cd..3b2432e913 100644\n--- a/assets/css/toc.css\n+++ b/assets/css/toc.css\n@@ -2,7 +2,7 @@\n   #TableOfContents {\n     .toc a {\n       @apply block max-w-full truncate py-1 pl-2 hover:font-medium hover:no-underline;\n-      &[aria-current=\"true\"],\n+      \n       &:hover {\n         @apply border-l-2 border-l-gray-light bg-gradient-to-r from-gray-light-100 font-medium text-black dark:border-l-gray-dark dark:from-gray-dark-200 dark:text-white;\n       }\n```\n\nThis PR fixes the issue by not overriding the `node.selector` internally with the last selector we handled. Instead, we let the selector parser handle it entirely.\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14518","RelatedDescription":"Closed or merged PR \"CSS codemod: ensure we don't lose selectors\" (#14518)"},{"Id":"2548301709","IsPullRequest":true,"CreatedAt":"2024-09-25T15:24:33","Actor":"thecrypticace","Number":"14519","RawContent":null,"Title":"CSS codemod: Add `prefix(‚Ä¶)` to necessary CSS imports when a prefix is used.","State":"open","Body":"If your config file has the `prefix` option specified:\r\n\r\n```ts\r\n/* tailwind.config.js */\r\nexport default {\r\n  prefix: 'tw-',\r\n};\r\n```\r\n\r\nWe'll migrate it to the new `prefix` option in CSS:\r\n\r\n```css\r\n/* app.css */\r\n@import 'tailwindcss' prefix(tw);\r\n```\r\n\r\nNote: we error on invalid prefixes currently, so if you have a prefix that is not valid, you'll need to update it to a valid one before running the migration.\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14519","RelatedDescription":"Open PR \"CSS codemod: Add `prefix(‚Ä¶)` to necessary CSS imports when a prefix is used.\" (#14519)"},{"Id":"2545173827","IsPullRequest":true,"CreatedAt":"2024-09-25T14:20:14","Actor":"philipp-spiess","Number":"14502","RawContent":null,"Title":"Add setup for template migrations","State":"closed","Body":"This PR adds the initial setup and a first codemod for the template migrations. These are a new set of migrations that operate on files defined in the Tailwind v3 config as part of the `content` option (so your HTML, JavaScript, TSX files etc.).\r\n\r\nThe migration for this is integrated in the new `@tailwindcss/upgrade` package and will require pointing the migration to an input JavaScript config file, like this:\r\n\r\n```\r\nnpx @tailwindcss/upgrade --config tailwind.config.js\r\n```\r\n\r\nThe idea of template migrations is to apply breaking changes from the v3 to v4 migration within your template files.\r\n\r\n## Migrating !important syntax\r\n\r\nThe first migration that I‚Äôm adding with this PR is to ensure we use the v4 important syntax that has the exclamation mark at the end of the utility. \r\n\r\nFor example, this:\r\n\r\n```html\r\n<div class=\"!flex sm:!block\"></div>\r\n```\r\n\r\nWill now turn into:\r\n\r\n```html\r\n<div class=\"flex! sm:block!\"></div>\r\n```\r\n\r\n## Architecture considerations\r\n\r\nImplementation wise, we make use of Oxide to scan the content files fast and efficiently. By relying on the same scanner als Tailwind v4, we guarantee that all candidates that are part of the v4 output will have gone through a migration. \r\n\r\nMigrations itself operate on the abstract `Candidate` type, similar to the type we use in the v4 codebase. It will parse the candidate into its parts so they can easily be introspected/modified. Migrations are typed as:\r\n\r\n```ts\r\ntype TemplateMigration = (candidate: Candidate) => Candidate | null\r\n``` \r\n\r\n`null` should be returned if the `Candidate` does not need a migration. \r\n\r\nWe currently use the v4 `parseCandidate` function to get an abstract definition of the candidate rule that we can operate on. _This will likely need to change in the future as we need to fork `parseCandidate` for v3 specific syntax_. \r\n\r\nAdditionally, we're inlining a `printCandidate` function that can stringify the abstract `Candidate` type. It is not guaranteed that this is an identity function since some information can be lost during the parse step. This is not a problem though, because migrations will only run selectively and if none of the selectors trigger, the candidates are not updated. h/t to @RobinMalfait for providing the printer.\r\n\r\nSo the overall flow of a migration looks like this:\r\n\r\n- Scan the config file for `content` files\r\n- Use Oxide to extract a list of candidate and their positions from these `content` files\r\n- Run a few migrations that operate on the `Candidate` abstract type.\r\n- Print the updated `Candidate` back into the original `content` file.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14502","RelatedDescription":"Closed or merged PR \"Add setup for template migrations\" (#14502)"},{"Id":"2543819364","IsPullRequest":true,"CreatedAt":"2024-09-25T14:06:37","Actor":"thecrypticace","Number":"14501","RawContent":null,"Title":"Add support for prefixes","State":"closed","Body":"This PR adds support for requiring a custom prefix on utility classes.\r\n\r\nPrefixes work a bit differently in v4 than they did in v3:\r\n- They look like a custom variant: `tw:bg-white`\r\n- It is always first in a utility ‚Äî even before other variants: `tw:hover:bg-white`\r\n- It is required on **all** utility classes ‚Äî even arbitrary properties: `tw:[color:red]`\r\n- Prefixes also apply to generated CSS variables which will be separated by a dash: `--tw-color-white: #fff;`\r\n- Only alpha (a-z) characters are allowed in a prefix ‚Äî so no `#tw#` or `__` or similar prefixes are allowed\r\n\r\nTo configure a prefix you can use add `prefix(tw)` to your theme or when importing Tailwind CSS like so:\r\n\r\n```css\r\n/* when importing `tailwindcss` */\r\n@import 'tailwindcss' prefix(tw);\r\n\r\n/* when importing the theme separately */\r\n@import 'tailwindcss/theme' prefix(tw);\r\n\r\n/* or when using an entirely custom theme */\r\n@theme prefix(tw) {\r\n  --color-white: #fff;\r\n  --breakpoint-sm: 640px;\r\n  /* ‚Ä¶ */\r\n}\r\n```\r\n\r\nThis will configure Tailwind CSS to require a prefix on all utility classes when used in HTML:\r\n\r\n```html\r\n<div class=\"tw:bg-white tw:p-4\">\r\n  This will have a white background and 4 units of padding.\r\n</div>\r\n\r\n<div class=\"bg-white p-4\">\r\n  This will not because the prefix is missing.\r\n</div>\r\n```\r\n\r\nand when used in CSS via `@apply`:\r\n```css\r\n.my-class {\r\n  @apply tw:bg-white tw:p-4;\r\n}\r\n```\r\n\r\nAdditionally, the prefix will be added to the generated CSS variables. You **do not** need to prefix the variables in the `@theme` block yourself ‚Äî Tailwind CSS handles this automatically.\r\n\r\n```css\r\n:root {\r\n  --tw-color-white: #fff;\r\n  --tw-breakpoint-sm: 640px;\r\n}\r\n```\r\n\r\nA prefix is not necessary when using the `theme(‚Ä¶)` function in your CSS or JS given that plugins will not know what the current prefix is and must work with or without a prefix:\r\n\r\n```css\r\n.my-class {\r\n  color: theme(--color-white);\r\n}\r\n```\r\n\r\nHowever, because the variables themselves are prefixed when outputting the CSS, you **do** need to prefix the variables when using `var(‚Ä¶)` in your CSS:\r\n\r\n```css\r\n.my-class {\r\n  color: var(--tw-color-white);\r\n}\r\n```\r\n\r\nIf you want to customize the prefix itself change `tw` to something else:\r\n\r\n```css\r\n/* my:underline, my:hover:bg-red-500, etc‚Ä¶ */\r\n@import 'tailwindcss' prefix(my);\r\n```","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14501","RelatedDescription":"Closed or merged PR \"Add support for prefixes\" (#14501)"},{"Id":"2547823713","IsPullRequest":true,"CreatedAt":"2024-09-25T12:58:06","Actor":"RobinMalfait","Number":"14517","RawContent":null,"Title":"CSS codemod: do not wrap comment nodes in `@layer`","State":"closed","Body":"When CSS exists between two tailwind directives, then the CSS will be wrapped in an `@layer` to ensure it all ends up in the correct location in the final CSS file.\n\nHowever, if the only thing between two tailwind directives is a comment, then the comment will also be wrapped in an `@layer` directive.\n\nE.g.:\n```css\n@tailwind base;\n/* This is a comment */\n@tailwind components;\n/* This is another comment */\n@tailwind utilities;\n```\n\nResults in:\n```css\n@import \"tailwindcss\";\n@layer base {\n  /* This is a comment */\n}\n@layer components {\n  /* This is another comment */\n}\n```\n\nIn this case, the layers don't matter, so this can be simplified to:\n```css\n@import \"tailwindcss\";\n/* This is a comment */\n/* This is another comment */\n```\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14517","RelatedDescription":"Closed or merged PR \"CSS codemod: do not wrap comment nodes in `@layer`\" (#14517)"},{"Id":"2547438688","IsPullRequest":true,"CreatedAt":"2024-09-25T12:48:22","Actor":"RobinMalfait","Number":"14514","RawContent":null,"Title":"CSS codemod: Migrate `@import \"tailwindcss/tailwind.css\"` to `@import \"tailwindcss\"`","State":"closed","Body":"This PR adds an additional step to ensure we migrate:\n```css\n@import \"tailwindcss/tailwind.css\";\n```\n\nTo:\n```css\n@import \"tailwindcss\";\n```\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14514","RelatedDescription":"Closed or merged PR \"CSS codemod: Migrate `@import \"tailwindcss/tailwind.css\"` to `@import \"tailwindcss\"`\" (#14514)"},{"Id":"2547752282","IsPullRequest":false,"CreatedAt":"2024-09-25T12:11:55","Actor":"tokmo","Number":"14515","RawContent":null,"Title":"Add extend screen disable min-[*px] class","State":"closed","Body":"**What version of Tailwind CSS are you using?**\r\nv3.4.13\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\nNext.js v14.2.11, postcss v8.4.47\r\n\r\n**What version of Node.js are you using?**\r\nv20.17\r\n\r\n**What browser are you using?**\r\nChrome\r\n\r\n**What operating system are you using?**\r\nMacOS\r\n\r\n**Describe your issue**\r\nWhen I add extended screens inside the Tailwind config, it disables the min-[*px] class in the HTML.","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14515","RelatedDescription":"Closed issue \"Add extend screen disable min-[*px] class\" (#14515)"},{"Id":"2547373655","IsPullRequest":true,"CreatedAt":"2024-09-25T11:48:14","Actor":"RobinMalfait","Number":"14513","RawContent":null,"Title":"CSS codemod: Fix incorrect empty `layer()` at the end of `@import` at-rules","State":"closed","Body":"This PR fixes an issue where some `@import` at-rules had an empty `layer()` attached at the end of the `@import` string. \n\nWe should only add that if a Tailwind directive or Tailwind import such as `@tailwind base` or `@import \"tailwindcss/base\"` preceded the current `@import` at-rule. If there was no Tailwind directive, the `lastLayer` will be empty and we don't need to attach it to the `@import` string.\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14513","RelatedDescription":"Closed or merged PR \"CSS codemod: Fix incorrect empty `layer()` at the end of `@import` at-rules\" (#14513)"},{"Id":"2547329527","IsPullRequest":true,"CreatedAt":"2024-09-25T08:42:19","Actor":"RobinMalfait","Number":"14512","RawContent":null,"Title":"Improve missing layer codemod","State":"closed","Body":"This PR improves the missing layers codemod where everything after the last Tailwind directive can stay as-is without wrapping it in a `@layer` directive.\n\nThe `@layer` at-rules are only important for CSS that exists between Tailwind directives.\n\nE.g.:\n```css\n@tailwind base;\n\nhtml {}\n\n@tailwind components;\n\n.btn {}\n\n@tailwind utilities;\n\n.foo {}\n\n.bar {}\n```\n\nWas transformed into:\n```css\n@import \"tailwindcss\";\n\n@layer base {\n  html {}\n}\n\n@layer components {\n  .btn {}\n}\n\n@layer utilities {\n  .foo {}\n  \n  .bar {}\n}\n```\n\nBut the last `@layer utilities` is already in the correct spot, so we can simplify this to just this instead:\n```css\n@import \"tailwindcss\";\n\n@layer base {\n  html {}\n}\n\n@layer components {\n  .btn {}\n}\n\n.foo {}\n\n.bar {}\n```\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14512","RelatedDescription":"Closed or merged PR \"Improve missing layer codemod\" (#14512)"},{"Id":"2545905286","IsPullRequest":true,"CreatedAt":"2024-09-24T17:03:00","Actor":"RobinMalfait","Number":"14507","RawContent":null,"Title":"Release v4.0.0-alpha.25","State":"closed","Body":"","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14507","RelatedDescription":"Closed or merged PR \"Release v4.0.0-alpha.25\" (#14507)"},{"Id":"2545525759","IsPullRequest":true,"CreatedAt":"2024-09-24T16:32:51","Actor":"RobinMalfait","Number":"14504","RawContent":null,"Title":"Add CSS codemod for missing `@layer`","State":"closed","Body":"This PR adds a codemod that ensures that some parts of your stylesheet are wrapped in an `@layer`.\n\nThis is a follow-up PR of #14411, in that PR we migrate `@tailwind` directives to imports.\n\nAs a quick summary, that will turn this:\n```css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\nInto:\n```css\n@import 'tailwindcss';\n```\n\nBut there are a few issues with that _if_ we have additional CSS on the page. For example let's imagine we had this:\n```css\n@tailwind base;\n\nbody {\n  background-color: red;\n}\n\n@tailwind components;\n\n.btn {}\n\n@tailwind utilities;\n```\n\nThis will now be turned into:\n```css\n@import 'tailwindcss';\n\nbody {\n  background-color: red;\n}\n\n.btn {}\n```\n\nBut in v4 we use real layers, in v3 we used to replace the directive with the result of that layer. This means that now the `body` and `.btn` styles are in the incorrect spot.\n\nTo solve this, we have to wrap them in a layer. The `body` should go in an `@layer base`, and the `.btn` should be in an `@layer components` to make sure it's in the same spot as it was before.\n\nThat's what this PR does, the original input will now be turned into:\n\n```css\n@import 'tailwindcss';\n\n@layer base {\n  body {\n    background-color: red;\n  }\n}\n\n@layer components {\n  .btn {\n  }\n}\n```\n\nThere are a few internal refactors going on as well, but those are less important.\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14504","RelatedDescription":"Closed or merged PR \"Add CSS codemod for missing `@layer`\" (#14504)"},{"Id":"2543631877","IsPullRequest":true,"CreatedAt":"2024-09-24T15:43:57","Actor":"adamwathan","Number":"14500","RawContent":null,"Title":"Only apply hover on devices that support hover","State":"closed","Body":"This PR updates the `hover` variant to only apply when `@media (hover: hover)` matches.\r\n\r\n```diff\r\n  .hover\\:bg-black {\r\n    &:hover {\r\n+     @media (hover: hover) {\r\n        background: black;\r\n+     }\r\n    }\r\n  }\r\n```\r\n\r\nThis is technically a breaking change because you may have built your site in a way where some interactions depend on hover (like opening a dropdown menu), and were relying on the fact that tapping on mobile triggers hover.\r\n\r\nTo bring back the old hover behavior, users can override the `hover` variant in their CSS file back to the simpler implementation:\r\n\r\n```css\r\n@import \"tailwindcss\";\r\n@variant hover (&:hover);\r\n```\r\n\r\nI've opted to go with just `@media (hover: hover)` for this because it seems like the best trade-off between the available options. Using `(any-hover: hover)` would mean users would get sticky hover states when tapping on an iPad if they have a mouse or trackpad connected, which feels wrong to me because in those cases touch is still likely the primary method of interaction.\r\n\r\nSites built with this feature in mind will be treating hover styles as progressive enhancement, so it seems better to me that using an iPad with a mouse would not have hover styles, vs. having sticky hover styles in the same situation.\r\n\r\nOf course users can always override this with whatever they want, so making this the default isn't locking anyone in to a particular choice.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14500","RelatedDescription":"Closed or merged PR \"Only apply hover on devices that support hover\" (#14500)"},{"Id":"2545618143","IsPullRequest":false,"CreatedAt":"2024-09-24T15:25:34","Actor":"samouri","Number":"14505","RawContent":null,"Title":"Tailwind Base CSS Variable Performance","State":"closed","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\nFor example: v3.4.13\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\nN/A\r\n\r\n**What version of Node.js are you using?**\r\n\r\nN/A\r\n\r\n**What browser are you using?**\r\n\r\nLatest Chrome\r\n\r\n**What operating system are you using?**\r\n\r\nWindows\r\n\r\n**Reproduction URL**\r\n\r\nhttps://play.tailwindcss.com/, no modifications needed\r\n\r\n**Describe your issue**\r\n\r\nüëã Hi all.\r\n\r\nFirst off I'd like to thank y'all for tailwind. I really love using it.\r\n\r\nWhile diagnosing performance problems on a closed-source app I develop, I realized that `@base` is adding a host of css variables to the `*` selector. I'm confused why it's targeted this way instead of [:root](https://developer.mozilla.org/en-US/docs/Web/CSS/:root#examples).\r\n\r\nI *think* targeting `*` is an issue for css variables in particular because it appears to redefine the variable at every single node. That's why when inspecting any element on the page and looking at the variable definitions, you'll often see dozens of overriden definitions. Not only is this noisy, but I've measured a significant performance impact to `Recalculate Styles` in Chrome Devtools.\r\n\r\n*Performance impact details*\r\n\r\nIt's likely a different level of impact for every app, but I'm measuring around a ~2.5x hit to Recalculate Styles on Tailwind Play. The closed-source app I develop involves a page with a supidly large number of DOM elements and has a larger impact. It likely scales with the depth of nodes. See the attached screenshots for traces I took on Tailwind Play with the css vars applied to `*` vs. `:root`.\r\n\r\n\r\n| * selector  |  :root selector |\r\n| ------------- | ------------- |\r\n| 5.18ms  | 1.96ms |\r\n\r\nRepro steps: do the below steps for both default and after modifying the css var initialization selector to `:root`.\r\n1. Go to https://play.tailwindcss.com/.\r\n2. Click the \"Preview only\" button.\r\n3. Now start a performance trace and click the \"Vertical Split\" option.\r\n4. Stop the trace and examine \"Recalculate Styles\".\r\n\r\n*Applied to star (current behavior)*\r\n<img width=\"1919\" alt=\"applied-to-star\" src=\"https://github.com/user-attachments/assets/03805a34-b6cf-4772-8930-7b2022016bf1\">\r\n\r\n\r\n*Applied to root*\r\n<img width=\"1920\" alt=\"applied-to-root\" src=\"https://github.com/user-attachments/assets/d52e1255-a373-44b4-aa79-aa9aae2906e9\">\r\n\r\n*Request for advice*\r\n\r\nI'm considering manually injecting the required css variables to `:root` to solve these issues instead of using `@base`.\r\nDo y'all think that's an ok workaround? Are there things I should be wary of?","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14505","RelatedDescription":"Closed issue \"Tailwind Base CSS Variable Performance\" (#14505)"},{"Id":"2545257128","IsPullRequest":true,"CreatedAt":"2024-09-24T12:23:57","Actor":"MartijnCuppens","Number":"14503","RawContent":null,"Title":"Use a default line height","State":"open","Body":"This is a slimmer version of #14335, which only includes the default line heights & the `<small>` fix.\r\n\r\nIn this PR:\r\n- Fixed line heights are replaced by a default line height css function.\r\n- This removes the need of adding fixed line heights to each font size.\r\n- It's still possible to use fixed line heights the way it worked before.\r\n- Custom font sizes will now have a better line height by default. For example, `text-[2.4rem]` will have a calculated line height of `2.625rem`, instead of `3.6rem`. \r\n- The default values are calculated in CSS, which means you can use arbitrary values in combination with custom properties (eg `text-[length:var(--title-font-size)]`). \r\n- Relative font sizes like `text-[1.5em]` or `text-[larger]` will now use a recalculated line height.\r\n- Only breaking change is the line height of `lg` (also see #14223).\r\n- The line heights are always rounded to even pixels (2px), so that you never have vertical alignment issues. Even if you use viewport relative units.\r\n\r\nHere's have an overview of which line height will be used for each font size range:\r\n\r\n| Font size range | Line height |\r\n| --- | --- |\r\n| `0rem` - `.5rem` * | `1em`  |\r\n| `.5rem` - `1rem` | `2em - .5rem` |\r\n| `1rem` - `2rem` | `1em + .5rem` |\r\n| `2rem` - `3rem` | `2em / 3 + 1rem` |\r\n|  ‚â•`3rem` | `1em` |\r\n\r\n<sub>* These font sizes are not used in Tailwind by default</sub>\r\n\r\nCloses #14484, #14223","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14503","RelatedDescription":"Open PR \"Use a default line height\" (#14503)"},{"Id":"2543589048","IsPullRequest":false,"CreatedAt":"2024-09-23T20:24:05","Actor":"andronocean","Number":"14499","RawContent":null,"Title":"oklch color definitions don't work with color/opacity syntax ‚Äî classes missing or incomplete","State":"open","Body":"**What version of Tailwind CSS are you using?**\r\n\r\nv3.4.13\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\nTested with Bud.js 6.23.3 (using postcss 8.4.24) and Tailwind Playground.\r\n\r\n**What version of Node.js are you using?**\r\n\r\nv20.16.0\r\n\r\n**What browser are you using?**\r\n\r\nN/A\r\n\r\n**What operating system are you using?**\r\n\r\nmacOS Sonoma 14.7\r\n\r\n**Reproduction URL**\r\nhttps://play.tailwindcss.com/dDmsole8X3\r\n\r\n**Describe your issue**\r\n\r\nWhen colors are added to a Tailwind config using the standard [`oklch()` function](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/oklch), the resulting color classes do not work with Tailwind's methods of controlling opacity. For a color like `primary: \"oklch(68% 0.15 237.33)\"`, these two issues appear:\r\n1. The simple color classes generated are missing the opacity properties like `var(--tw-bg-opacity)` and `var(--tw-text-opacity)` ‚Äî it seems that Tailwind just copies the value directly.\r\n2. Tailwind completely fails to generate modified-opacity classes for these colors, like `bg-primary/50`.\r\n\r\nThe same problems occur if I explicitly declare an opacity in the color definition: `primary: \"oklch(68% 0.15 237.33 / 1)\"`.\r\n\r\nClasses _ARE_ generated correctly if I use the `<alpha-value>` placeholder in color definitions: `primary: \"oklch(68% 0.15 237.33 / <alpha-value>)\"`. **However, this magic is not explained anywhere in Tailwind's color documentation:** https://tailwindcss.com/docs/customizing-colors\r\n\r\nThe playground link shows both issues and contrasts the correct behavior of colors defined using `rgb(r g b / a)` notation.","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14499","RelatedDescription":"Open issue \"oklch color definitions don't work with color/opacity syntax ‚Äî classes missing or incomplete\" (#14499)"},{"Id":"2543355210","IsPullRequest":false,"CreatedAt":"2024-09-23T19:45:01","Actor":"Daniel777y","Number":"14497","RawContent":null,"Title":"Background gradient `bg-gradient` display error","State":"closed","Body":"**What version of Tailwind CSS are you using?**\r\n\r\nFor example: v3.4.1\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\npostcss8, Next.js 14.2.5\r\n\r\n**What version of Node.js are you using?**\r\n\r\nv20.10.0\r\n\r\n**What browser are you using?**\r\n\r\nChrome, Safari\r\n\r\n**What operating system are you using?**\r\n\r\nmacOS, Windows, iOS, Android\r\n\r\n**Reproduction URL**\r\n\r\nWe did see this issue once on some scenarios, but we can't reproduce it consistently. For now, this issue is only on mobile (including iOS and Android).\r\n\r\n**Describe your issue**\r\n\r\nI use `bg-gradient` on buttons and text ([Tailwind Play](https://play.tailwindcss.com/BBH4fYGGGN)):\r\n\r\n```\r\n<div class=\"flex h-screen w-screen items-center justify-center bg-[#101414]\">\r\n  <div class=\"flex h-full w-full flex-col items-center justify-center gap-4\">\r\n    <button class=\"group relative z-0\">\r\n      <div class=\"absolute inset-0 -z-10 rounded-full bg-gradient-to-br from-[#EFFF00] via-[#15FFEE] to-[#15C1FF]\"></div>\r\n      <div class=\"m-[1.5px] rounded-full bg-[#101414] px-4 py-2 transition duration-300 ease-in-out group-hover:bg-gray-800\">\r\n        <span class=\"h-full w-full rounded-full bg-gradient-to-br from-[#EFFF00] via-[#15FFEE] to-[#15C1FF] bg-clip-text font-light text-transparent\"> Button </span>\r\n      </div>\r\n    </button>\r\n\r\n    <p class=\"text-5xl bg-gradient-to-br from-[#EFFF00] via-[#15FFEE] to-[#15C1FF] bg-clip-text text-transparent\">Text</p>\r\n  </div>\r\n</div>\r\n```\r\n\r\nOn our website, it should look like:\r\n\r\n<img width=\"394\" alt=\"image\" src=\"https://github.com/user-attachments/assets/603baa3e-eddf-4061-a4b4-c3d3941bf0c4\">\r\n\r\n<img width=\"322\" alt=\"image\" src=\"https://github.com/user-attachments/assets/5cb64fe8-c1fc-4f95-8257-98a8cc223adb\">\r\n\r\n\r\nBut some of our users told us they saw these:\r\n\r\n<img width=\"461\" alt=\"image\" src=\"https://github.com/user-attachments/assets/64cbd725-3f8e-4802-b56d-bac99f87ac90\">\r\n\r\n<img width=\"541\" alt=\"image\" src=\"https://github.com/user-attachments/assets/b2092644-4f45-4d18-b1b5-f2d86ca0b663\">\r\n\r\n\r\n# Environment\r\n\r\n`package.json`:\r\n\r\n```\r\n  \"dependencies\": {\r\n    \"@next/third-parties\": \"^14.2.5\",\r\n    \"@wcj/html-to-markdown\": \"^2.1.1\",\r\n    \"date-fns-tz\": \"^3.1.3\",\r\n    \"file-saver\": \"^2.0.5\",\r\n    \"framer-motion\": \"^11.3.24\",\r\n    \"html-react-parser\": \"^5.1.12\",\r\n    \"ics\": \"^3.7.6\",\r\n    \"next\": \"^14.2.5\",\r\n    \"react\": \"^18\",\r\n    \"react-dom\": \"^18\",\r\n    \"react-markdown\": \"^9.0.1\",\r\n    \"react-medium-image-zoom\": \"^5.2.8\",\r\n    \"react-share\": \"^5.1.0\",\r\n    \"remark-gfm\": \"^4.0.0\",\r\n    \"sharp\": \"^0.33.4\",\r\n    \"swr\": \"^2.2.5\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"eslint\": \"^8\",\r\n    \"eslint-config-next\": \"14.2.4\",\r\n    \"eslint-config-prettier\": \"^9.1.0\",\r\n    \"eslint-plugin-react\": \"^7.34.3\",\r\n    \"eslint-plugin-react-hooks\": \"^4.6.2\",\r\n    \"eslint-plugin-react-refresh\": \"^0.4.7\",\r\n    \"next-sitemap\": \"^4.2.3\",\r\n    \"postcss\": \"^8\",\r\n    \"prettier\": \"^3.3.2\",\r\n    \"tailwindcss\": \"^3.4.1\"\r\n  }\r\n```\r\n\r\nSince this issue only appears occasionally, do anyone know what's going on here and how to fix it?","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14497","RelatedDescription":"Closed issue \"Background gradient `bg-gradient` display error\" (#14497)"},{"Id":"2540478023","IsPullRequest":true,"CreatedAt":"2024-09-23T14:43:28","Actor":"adamwathan","Number":"14490","RawContent":null,"Title":"Preserve explicit transition duration and timing function when overriding transition property","State":"closed","Body":"This PR changes the behavior of the `transition-{property}` utilities to respect any explicit timing function or duration set by the user using the `ease-*` and `duration-*` utilities.\r\n\r\nSay you have this HTML:\r\n\r\n```html\r\n<div class=\"transition-colors duration-500 ease-out lg:transition-all\">\r\n```\r\n\r\nCurrently, the `transition-duration` and `transition-timing-functions` will be reset to their default values at the `lg` breakpoint even though you've provided explicit values for them.\r\n\r\nAfter this PR is merged, those values will be preserved at the `lg` breakpoint.\r\n\r\nThis PR also adds `duration-initial` and `ease-initial` utilities to \"unset\" explicit duration/timing-function values so that the defaults from classes like `transition-all` will kick in, without having to specify their explicit values.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14490","RelatedDescription":"Closed or merged PR \"Preserve explicit transition duration and timing function when overriding transition property\" (#14490)"},{"Id":"2541129476","IsPullRequest":false,"CreatedAt":"2024-09-22T16:28:48","Actor":"muellerluke","Number":"14494","RawContent":null,"Title":"--watch Not Rebuilding Upon Save","State":"closed","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\nv3.4.12\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\nGolang http/template\r\n\r\n**What version of Node.js are you using?**\r\n\r\nv20.14.0\r\n\r\n**What browser are you using?**\r\n\r\nN/A\r\n\r\n**What operating system are you using?**\r\n\r\nWindows 11 Pro (Snapdragon X Elite ARM processor)\r\n\r\n**Reproduction URL**\r\n\r\nhttp://localhost:8080\r\n\r\n**Describe your issue**\r\n\r\nUpon changes to the /templates directory, tailwind does not rebuild. It's pretty simple.","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14494","RelatedDescription":"Closed issue \"--watch Not Rebuilding Upon Save\" (#14494)"},{"Id":"2540777241","IsPullRequest":true,"CreatedAt":"2024-09-22T13:54:34","Actor":"shulandmimi","Number":"14492","RawContent":null,"Title":"fix: avoid `require` not exists","State":"closed","Body":"avoiding the absence of `require.cache` in some runtime environments","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14492","RelatedDescription":"Closed or merged PR \"fix: avoid `require` not exists\" (#14492)"}],"ResultType":"GitHubIssue"}},"RunOn":"2024-09-27T03:30:25.7936269Z","RunDurationInMilliseconds":545}