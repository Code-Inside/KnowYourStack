{"Data":{"TailwindCss-Issues":{"Issues":[{"Id":"2616200876","IsPullRequest":true,"CreatedAt":"2024-10-29T00:17:25","Actor":"RobinMalfait","Number":"14802","RawContent":null,"Title":"Internal refactor, introduce `AtRule`","State":"closed","Body":"This PR introduces an internal refactor where we introduce the `AtRule` CSS Node in our AST.\r\n\r\nThe motivation for this is that in a lot of places we need to differentiate between a `Rule` and an `AtRule`. We often do this with code that looks like this:\r\n\r\n```ts\r\nrule.selector[0] === '@' && rule.selector.startsWith('@media')\r\n```\r\n\r\nAnother issue we have is that we often need to check for `'@media '` including the space, because we don't want to match `@mediafoobar` if somebody has this in their CSS. Alternatively, if you CSS is minified then it could be that you have a rule that looks like `@media(width>=100px)`, in this case we _also_ have to check for `@media(`.\r\n\r\nHere is a snippet of code that we have in our codebase:\r\n\r\n```ts\r\n// Find at-rules rules\r\nif (node.kind === 'rule') {\r\n  if (\r\n    node.selector[0] === '@' &&\r\n    (node.selector.startsWith('@media ') ||\r\n      node.selector.startsWith('@media(') ||\r\n      node.selector.startsWith('@custom-media ') ||\r\n      node.selector.startsWith('@custom-media(') ||\r\n      node.selector.startsWith('@container ') ||\r\n      node.selector.startsWith('@container(') ||\r\n      node.selector.startsWith('@supports ') ||\r\n      node.selector.startsWith('@supports(')) &&\r\n    node.selector.includes(THEME_FUNCTION_INVOCATION)\r\n  ) {\r\n    node.selector = substituteFunctionsInValue(node.selector, resolveThemeValue)\r\n  }\r\n}\r\n```\r\n\r\nWhich will now be replaced with a much simpler version:\r\n```ts\r\n// Find at-rules rules\r\nif (node.kind === 'at-rule') {\r\n  if (\r\n    (node.name === '@media' ||\r\n      node.name === '@custom-media' ||\r\n      node.name === '@container' ||\r\n      node.name === '@supports') &&\r\n    node.params.includes(THEME_FUNCTION_INVOCATION)\r\n  ) {\r\n    node.params = substituteFunctionsInValue(node.params, resolveThemeValue)\r\n  }\r\n}\r\n```\r\n\r\nChecking for all the cases from the first snippet is not the end of the world, but it is error prone. It's easy to miss a case.\r\n\r\nA direct comparison is also faster than comparing via the `startsWith(‚Ä¶)` function.\r\n\r\n---\r\n\r\nNote: this is only a refactor without changing other code _unless_ it was required to make the tests pass. The tests themselves are all passing and none of them changed (because the behavior should be the same).\r\nThe one exception is the tests where we check the parsed AST, which now includes `at-rule` nodes instead of `rule` nodes when we have an at-rule.\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14802","RelatedDescription":"Closed or merged PR \"Internal refactor, introduce `AtRule`\" (#14802)"},{"Id":"2619823868","IsPullRequest":false,"CreatedAt":"2024-10-29T00:09:45","Actor":"rajatgupta-dev","Number":"14816","RawContent":null,"Title":"Tailwind cdn url is not working","State":"open","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**Version of Tailwind CSS - v3.4.13** \r\n\r\n**Browser - Chrome, and Firefox** \r\n\r\n**Operating system - Ubntu v22.04.4**\r\n\r\n**URL - https://cdn.tailwindcss.com** \r\n\r\n**Describe your issue**\r\n\r\nWhen hitting this URL in browser it is not working. it showing error for the check the below screenshot from chrome & firefox\r\n\r\n![Screenshot from 2024-10-29 04-55-59](https://github.com/user-attachments/assets/33da2444-5027-446a-9e2e-3a796041756f)\r\n\r\n![image](https://github.com/user-attachments/assets/98420d28-0dc9-44fe-a317-a00518a151ff)\r\n\r\n![image](https://github.com/user-attachments/assets/399343d1-0ffd-4e01-a45c-680aa67809d6)\r\n\r\n![image](https://github.com/user-attachments/assets/e8c57970-634c-4d28-84f2-64741559db5e)\r\n\r\n**I am following the official documentation**\r\n\r\n![image](https://github.com/user-attachments/assets/15b2d149-add8-4633-80c3-788bb04e4b1b)\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14816","RelatedDescription":"Open issue \"Tailwind cdn url is not working\" (#14816)"},{"Id":"2618473824","IsPullRequest":true,"CreatedAt":"2024-10-28T23:46:24","Actor":"RobinMalfait","Number":"14808","RawContent":null,"Title":"Bump `prettier-plugin-tailwindcss` to latest version during upgrade","State":"closed","Body":"This PR adds a migration to bump the `prettier-plugin-tailwindcss` version to the latest version when upgrading your project. This is to ensure that the plugin is compatible with the latest version of Tailwind CSS.\n\nNote: we will only do this _if_ you already used the `prettier-plugin-tailwindcss` plugin in your project.\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14808","RelatedDescription":"Closed or merged PR \"Bump `prettier-plugin-tailwindcss` to latest version during upgrade\" (#14808)"},{"Id":"2619687458","IsPullRequest":true,"CreatedAt":"2024-10-28T22:21:26","Actor":"RobinMalfait","Number":"14815","RawContent":null,"Title":"Handle `source(none)` in Vite","State":"open","Body":"","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14815","RelatedDescription":"Open PR \"Handle `source(none)` in Vite\" (#14815)"},{"Id":"2619687362","IsPullRequest":true,"CreatedAt":"2024-10-28T22:21:21","Actor":"RobinMalfait","Number":"14814","RawContent":null,"Title":"`@source` globs should apply auto source detection","State":"open","Body":"","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14814","RelatedDescription":"Open PR \"`@source` globs should apply auto source detection\" (#14814)"},{"Id":"2619645759","IsPullRequest":true,"CreatedAt":"2024-10-28T21:55:30","Actor":"depfu[bot]","Number":"14813","RawContent":null,"Title":"Update bun 1.1.29 ‚Üí 1.1.33 (patch)","State":"open","Body":"\n\n\n\n\nHere is everything you need to know about this update. Please take a good look at what changed and the test results before merging this pull request.\n\n### What changed?\n\n\n\n\n#### ‚ú≥Ô∏è bun (1.1.29 ‚Üí 1.1.33) ¬∑ [Repo](https://github.com/oven-sh/bun)\n\n\n\n\n\nSorry, we couldn't find anything useful about this release.\n\n\n\n\n\n\n\n\n\n\n\n---\n![Depfu Status](https://depfu.com/badges/edd6acd35d74c8d41cbb540c30442adf/stats.svg)\n\n[Depfu](https://depfu.com) will automatically keep this PR conflict-free, as long as you don't add any commits to this branch yourself. You can also trigger a rebase manually by commenting with `@depfu rebase`.\n\n<details><summary>All Depfu comment commands</summary>\n<blockquote><dl>\n<dt>@‚Äãdepfu rebase</dt><dd>Rebases against your default branch and redoes this update</dd>\n<dt>@‚Äãdepfu recreate</dt><dd>Recreates this PR, overwriting any edits that you've made to it</dd>\n<dt>@‚Äãdepfu merge</dt><dd>Merges this PR once your tests are passing and conflicts are resolved</dd>\n<dt>@‚Äãdepfu cancel merge</dt><dd>Cancels automatic merging of this PR</dd>\n<dt>@‚Äãdepfu close</dt><dd>Closes this PR and deletes the branch</dd>\n<dt>@‚Äãdepfu reopen</dt><dd>Restores the branch and reopens this PR (if it's closed)</dd>\n<dt>@‚Äãdepfu pause</dt><dd>Ignores all future updates for this dependency and closes this PR</dd>\n<dt>@‚Äãdepfu pause [minor|major]</dt><dd>Ignores all future minor/major updates for this dependency and closes this PR</dd>\n<dt>@‚Äãdepfu resume</dt><dd>Future versions of this dependency will create PRs again (leaves this PR as is)</dd>\n</dl></blockquote>\n</details>\n\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14813","RelatedDescription":"Open PR \"Update bun 1.1.29 ‚Üí 1.1.33 (patch)\" (#14813)"},{"Id":"2619579132","IsPullRequest":true,"CreatedAt":"2024-10-28T21:22:14","Actor":"thecrypticace","Number":"14812","RawContent":null,"Title":"Update crates/oxide/src/lib.rs","State":"closed","Body":"<!--\n\nüëã Hey, thanks for your interest in contributing to Tailwind!\n\n**Please ask first before starting work on any significant new features.**\n\nIt's never a fun experience to have your pull request declined after investing a lot of time and effort into a new feature. To avoid this from happening, we request that contributors create an issue to first discuss any significant new features. This includes things like adding new utilities, creating new at-rules, or adding new component examples to the documentation.\n\nhttps://github.com/tailwindcss/tailwindcss/blob/master/.github/CONTRIBUTING.md\n\n-->\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14812","RelatedDescription":"Closed or merged PR \"Update crates/oxide/src/lib.rs\" (#14812)"},{"Id":"2619427345","IsPullRequest":true,"CreatedAt":"2024-10-28T20:05:45","Actor":"depfu[bot]","Number":"14811","RawContent":null,"Title":"Update turbo 2.1.3 ‚Üí 2.2.3 (minor)","State":"open","Body":"\n\n\n\n\nHere is everything you need to know about this update. Please take a good look at what changed and the test results before merging this pull request.\n\n### What changed?\n\n\n\n\n#### ‚ú≥Ô∏è turbo (2.1.3 ‚Üí 2.2.3) ¬∑ [Repo](https://github.com/turborepo/turbo)\n\n\n\n\n\nSorry, we couldn't find anything useful about this release.\n\n\n\n\n\n\n\n\n\n\n\n---\n![Depfu Status](https://depfu.com/badges/edd6acd35d74c8d41cbb540c30442adf/stats.svg)\n\n[Depfu](https://depfu.com) will automatically keep this PR conflict-free, as long as you don't add any commits to this branch yourself. You can also trigger a rebase manually by commenting with `@depfu rebase`.\n\n<details><summary>All Depfu comment commands</summary>\n<blockquote><dl>\n<dt>@‚Äãdepfu rebase</dt><dd>Rebases against your default branch and redoes this update</dd>\n<dt>@‚Äãdepfu recreate</dt><dd>Recreates this PR, overwriting any edits that you've made to it</dd>\n<dt>@‚Äãdepfu merge</dt><dd>Merges this PR once your tests are passing and conflicts are resolved</dd>\n<dt>@‚Äãdepfu cancel merge</dt><dd>Cancels automatic merging of this PR</dd>\n<dt>@‚Äãdepfu close</dt><dd>Closes this PR and deletes the branch</dd>\n<dt>@‚Äãdepfu reopen</dt><dd>Restores the branch and reopens this PR (if it's closed)</dd>\n<dt>@‚Äãdepfu pause</dt><dd>Ignores all future updates for this dependency and closes this PR</dd>\n<dt>@‚Äãdepfu pause [minor|major]</dt><dd>Ignores all future minor/major updates for this dependency and closes this PR</dd>\n<dt>@‚Äãdepfu resume</dt><dd>Future versions of this dependency will create PRs again (leaves this PR as is)</dd>\n</dl></blockquote>\n</details>\n\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14811","RelatedDescription":"Open PR \"Update turbo 2.1.3 ‚Üí 2.2.3 (minor)\" (#14811)"},{"Id":"2616813831","IsPullRequest":true,"CreatedAt":"2024-10-28T17:08:39","Actor":"adamwathan","Number":"14805","RawContent":null,"Title":"Use `inline` and `block` for x/y utilities","State":"closed","Body":"This PR updates all of our x/y named utilities (like `px-*`, `my-*`, `inset-y-*`, `scroll-px-*`, etc.) to use logical properties like `padding-inline` instead of separate `padding-left` and `padding-right` properties.\r\n\r\nWe held off on this originally for a while because `inline` doesn't really mean _horizontal_ like the \"x\" in `px-*` implies, but I think in practice this change is fine ‚Äî I'm comfortable with \"x\" meaning \"in the inline direction\" and \"y\" meaning \"in the block direction\" in Tailwind.\r\n\r\nThis is technically a breaking change if anyone was depending on the fact that `px-*` for instance was always explicitly setting `padding-left` and `padding-right` even when building something in a vertical writing mode, but I kinda doubt there's a single real project on the internet that will actually be affected, so not too worried about it.\r\n\r\nIf someone _really_ wants to set `padding-left` and `padding-right` they can always use `pl-4 pr-4` instead of `px-4`.\r\n\r\nNice thing about this change is it produces quite a bit less CSS.\r\n\r\nTo test this change, I re-generated all of the snapshots and made sure none of the generated utilities changed position or anything in the output (initially they did before I updated `property-order.ts` to add some missing properties).\r\n\r\nI also created a little demo locally in the Vite playground to test things manually and make sure I didn't make any obvious typos or anything that could slip through the snapshots:\r\n\r\n<img width=\"1223\" alt=\"image\" src=\"https://github.com/user-attachments/assets/0e9854ba-2b5b-4c8c-87b6-6eb7b7da84f2\">\r\n\r\n<details>\r\n<summary>Show code for playground demo</summary>\r\n\r\n```jsx\r\nimport React from 'react'\r\n\r\nexport function App() {\r\n  return (\r\n    <div className=\"p-12 gap-10 grid grid-cols-2 items-start\">\r\n      <div className=\"grid grid-cols-1 gap-10 justify-start\">\r\n        <div className=\"space-y-6\">\r\n          <p className=\"font-semibold mb-6\">Border Width</p>\r\n          <div className=\"border-x w-48 h-12 flex items-center justify-center\">border-x</div>\r\n          <div className=\"border-y w-48 h-12 flex items-center justify-center\">border-y</div>\r\n        </div>\r\n        <div className=\"space-y-6\">\r\n          <p className=\"font-semibold mb-6\">Border Color</p>\r\n          <div className=\"border-2 border-x-red-500 w-48 h-12 flex items-center justify-center\">\r\n            border-x-red-500\r\n          </div>\r\n          <div className=\"border-2 border-y-red-500 w-48 h-12 flex items-center justify-center\">\r\n            border-y-red-500\r\n          </div>\r\n        </div>\r\n        <div className=\"space-y-6\">\r\n          <p className=\"font-semibold mb-6\">Padding</p>\r\n          <div>\r\n            <div className=\"px-8 bg-yellow-300 inline-flex items-center justify-center\">px-8</div>\r\n          </div>\r\n          <div>\r\n            <div className=\"py-8 bg-yellow-300 inline-flex items-center justify-center\">py-8</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 gap-10 justify-start\">\r\n        <div className=\"space-y-6\">\r\n          <p className=\"font-semibold mb-6\">Margin</p>\r\n          <div>\r\n            <div className=\"bg-red-400 inline-flex\">\r\n              <div className=\"mx-8 bg-yellow-300 inline-flex items-center justify-center\">mx-8</div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div className=\"bg-red-400 inline-flex\">\r\n              <div className=\"my-8 bg-yellow-300 inline-flex items-center justify-center\">my-8</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"space-y-6\">\r\n          <p className=\"font-semibold mb-6\">Inset</p>\r\n          <div className=\"relative bg-red-400 w-48 h-48\">\r\n            <div className=\"inset-x-8 absolute bg-yellow-300 inline-flex items-center justify-center\">\r\n              inset-x-8\r\n            </div>\r\n          </div>\r\n          <div className=\"relative bg-red-400 w-48 h-48\">\r\n            <div className=\"inset-y-8 absolute bg-yellow-300 inline-flex items-center justify-center\">\r\n              inset-y-8\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n```\r\n\r\n</details>\r\n\r\nI didn't manually test the scroll padding or scroll margin utilities because they are more annoying to set up, but I probably should.\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14805","RelatedDescription":"Closed or merged PR \"Use `inline` and `block` for x/y utilities\" (#14805)"},{"Id":"2615112040","IsPullRequest":false,"CreatedAt":"2024-10-28T16:06:03","Actor":"adamwathan","Number":"14797","RawContent":null,"Title":"`config` is not fully compatible in plugin layer","State":"closed","Body":"Just linking to an issue posted on react-spectrum:\r\n\r\nhttps://github.com/adobe/react-spectrum/issues/7263\r\n\r\nDon't have time to dig deeper but dropping here so we don't forget to investigate!","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14797","RelatedDescription":"Closed issue \"`config` is not fully compatible in plugin layer\" (#14797)"},{"Id":"2615423259","IsPullRequest":true,"CreatedAt":"2024-10-28T16:06:01","Actor":"thecrypticace","Number":"14799","RawContent":null,"Title":"Make `config()` path arg optional in v4 plugin API","State":"closed","Body":"Fixes #14797\r\n\r\nThe `config()` function in v3 had an optional `path` argument and when it wasn't provided it returned the resolved config directly so we need to do the same here.\r\n\r\nI've also added a `future` key to the config objects / types.\r\n\r\ncc @adamwathan any objection to adding this or do you think we can get by without it?","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14799","RelatedDescription":"Closed or merged PR \"Make `config()` path arg optional in v4 plugin API\" (#14799)"},{"Id":"2618816323","IsPullRequest":false,"CreatedAt":"2024-10-28T15:47:31","Actor":"saadeghi","Number":"14809","RawContent":null,"Title":"`@tailwindcss/vite@alpha` Vite error if using `[&_div]:flex` and `url()` with encoded content in plugins","State":"open","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\n@tailwindcss/vite `4.0.0-alpha.30`\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\nvite 5, svelte 5\r\n\r\n**What version of Node.js are you using?**\r\n\r\nv22.10.0\r\n\r\n**What operating system are you using?**\r\n\r\nFor example: macOS\r\n\r\n**Reproduction URL**\r\n\r\nhttps://github.com/saadeghi/tw4alpha-vite-url-bug\r\nit's an empty Vite/Svelte project.  \r\n```\r\nnpm i\r\nnpm run dev\r\n```\r\nThere's `[&_div]:flex` class in `src/routes/+page.svelte`\r\nThere's a Tailwind plugin in `src/myplugin.js`\r\n\r\n**Describe your issue**\r\n\r\n‚úÖ Having a Tailwind plugin like this works as expected\r\n```js\r\nexport default ({ addComponents }) => {\r\n  addComponents({\r\n    \".circlemask\": {\r\n      \"mask-image\": \"url(\\\"data:image/svg+xml,%3csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle fill='black' cx='100' cy='100' r='100' fill-rule='evenodd'/%3e%3c/svg%3e\\\")\"\r\n    }\r\n  })\r\n}\r\n```\r\n‚úÖ An arbitrary class name like `[&_div]:flex` works as expected.\r\n\r\n‚ùå But having both in the same project using `@tailwindcss/vite@4.0.0-alpha.30` causes Vite error:\r\n```\r\n[plugin:vite:css] [postcss] /src/tailwind.css:615:5: Unknown word\r\n```\r\n‚úÖ This wasn't an issue in Tailwind CSS 3\r\n‚úÖ The issue doesn't happen with `@tailwindcss/cli@4.0.0-alpha.30`  \r\nIt was really hard to debug for me because Vite just says `Unknown word`. No more details. After days I found that arbitrary class names with `[]` and `&` cause the issue if there's a plugin including `url()` with encoded image in it.","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14809","RelatedDescription":"Open issue \"`@tailwindcss/vite@alpha` Vite error if using `[&_div]:flex` and `url()` with encoded content in plugins\" (#14809)"},{"Id":"2618093106","IsPullRequest":false,"CreatedAt":"2024-10-28T11:21:46","Actor":"trytofinderror","Number":"14807","RawContent":null,"Title":"Responsive order arbitrary values","State":"closed","Body":"","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14807","RelatedDescription":"Closed issue \"Responsive order arbitrary values\" (#14807)"},{"Id":"2615684644","IsPullRequest":false,"CreatedAt":"2024-10-26T09:22:39","Actor":"binajmen","Number":"14800","RawContent":null,"Title":"[v4] Tailwind CSS classes not updating in output when adding previously unused classes - requires server restart","State":"open","Body":"**What version of Tailwind CSS are you using?**\r\n\r\n```\r\n\"@tailwindcss/vite\": \"^4.0.0-alpha.30\",\r\n\"tailwindcss\": \"^4.0.0-alpha.30\"\r\n```\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\n```\r\n\"@solidjs/start\": \"^1.0.9\",\r\n\"vinxi\": \"^0.4.3\"\r\n```\r\n\r\n**What version of Node.js are you using?**\r\n\r\n```\r\n\"node\": \">=18\"\r\n```\r\n\r\n**What browser are you using?**\r\n\r\nFirefox\r\n\r\n**What operating system are you using?**\r\n\r\nmacOS\r\n\r\n**Reproduction URL**\r\n\r\nSince SolidStart isn't currently working on Stackblitz, please test locally:\r\n\r\n1. Clone the repository: `git clone https://github.com/binajmen/bun-solidstart-tw4`\r\n2. Install dependencies and start the dev server: `bun install && bun dev`\r\n3. You should see a colored background on the index page\r\n4. Try changing the background color class in `app.tsx` (e.g., to bg-blue-400) and save the file\r\n5. The background will turn white instead of updating to the new color\r\n6. Only after manually restarting bun dev will the new background color appear\r\n\r\n**Describe your issue**\r\n\r\nWhen adding Tailwind classes that weren't previously used anywhere in the codebase, these new classes aren't being included in the generated CSS file. The changes only take effect after manually restarting the development server.","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14800","RelatedDescription":"Open issue \"[v4] Tailwind CSS classes not updating in output when adding previously unused classes - requires server restart\" (#14800)"},{"Id":"2615141923","IsPullRequest":true,"CreatedAt":"2024-10-26T00:46:45","Actor":"luisrudge","Number":"14798","RawContent":null,"Title":"[Failing Test] - Fix multiple data attributes","State":"closed","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\nFor example: v4.0.0-alpha.30\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\nFor example: \"postcss\": \"^8.4.47\",\r\n\r\n**Describe your issue**\r\n\r\n<img width=\"1828\" alt=\"image\" src=\"https://github.com/user-attachments/assets/d5aead10-99f6-4075-99b6-33cd91c26cd1\">\r\n\r\nThe upgrade was successful, however I can see in the diffs that only the first instance of the attribute was updated, not the other ones.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14798","RelatedDescription":"Closed or merged PR \"[Failing Test] - Fix multiple data attributes\" (#14798)"},{"Id":"2614977107","IsPullRequest":false,"CreatedAt":"2024-10-25T19:47:39","Actor":"sceee","Number":"14796","RawContent":null,"Title":"@tailwindcss/vite 4.0.0-alpha.25 and above breaks Scoped CSS styles in Vue production builds (whereas in dev-builds they work)","State":"open","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\nCurrently using `4.0.0-alpha.30` but the issue occurs since `4.0.0-alpha.25`.\r\nThe issue is **not** present in `4.0.0-alpha.24`\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\n`vite 5.4.10`\r\n\r\n**What version of Node.js are you using?**\r\n\r\n`v20.18.0`\r\n\r\n**What browser are you using?**\r\n\r\nChrome\r\n\r\n**What operating system are you using?**\r\n\r\nWindows\r\n\r\n**Reproduction URL**\r\n\r\nhttps://github.com/sceee/tailwind-vue-scoped-build-issue\r\n\r\nReproduction steps:\r\n1. Clone repo\r\n2. `npm i`\r\n3. `npm run dev`\r\n4. Check browser page, focus on the links beneath \"You did it\" - it displays the \"Vite + Vue 3\" links green and the \"Some fancy link\" red\r\n![image](https://github.com/user-attachments/assets/3c9df78c-eb60-4768-b158-324a984a94a9)\r\nThis is expected as the \"Some fancy link\" receives a scoped style that can also be seen in the devtools\r\n![image](https://github.com/user-attachments/assets/d083c324-d5d0-493d-8410-53a7e37ebbbd)\r\nwhich is defined as scoped here:\r\nhttps://github.com/sceee/tailwind-vue-scoped-build-issue/blob/31c440f57f16fef1671da722f2c6921f08f7ac2d/src/App.vue#L21-L24\r\n\r\n5. Stop HMR webserver\r\n6. Run `npm run build`\r\n7. Run `npm run preview` to serve the production build\r\n8. Check browser page of the preview - it now displays the \"Vite + Vue3\" links also (incorrectly) red\r\n![image](https://github.com/user-attachments/assets/8823566e-f2ad-4f58-8978-e72703abfb72)\r\nSee that the (initially) style is now no longer scoped in the browser devtools:\r\n![image](https://github.com/user-attachments/assets/7ebeb21f-3ce3-450d-b5ca-ae4996e91ae9)\r\nInstead it is now a global style.\r\n\r\nAs written above, this was introduced with `4.0.0-alpha.25`.\r\nIf you downgrade to `4.0.0-alpha.24`, this issue no longer happens and the scoped style remains during production builds.\r\n\r\n_I could imagine it has something to do with the dependency changes for @tailwindcss/vite from .24 to .25 (regarding the `postcss` removal) but this is just a random guess._\r\n\r\n**Describe your issue**\r\n\r\nThe issue is that css defined in a scoped `<style scoped> ... </style>` tag results only in scoped css when being served as dev builds.\r\nIn production builds, these styles are no longer scoped, instead they are just \"global\" css and therefore unintentionally affect other elements.\r\n\r\nSee reproduction steps abov - both (dev and production builds) should emit the same scoped css like\r\n![image](https://github.com/user-attachments/assets/543f9ccb-e776-425e-b1aa-8d24b4346c19)\r\ninstead of being different between dev and production builds.","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14796","RelatedDescription":"Open issue \"@tailwindcss/vite 4.0.0-alpha.25 and above breaks Scoped CSS styles in Vue production builds (whereas in dev-builds they work)\" (#14796)"},{"Id":"2613515751","IsPullRequest":true,"CreatedAt":"2024-10-25T09:31:34","Actor":"philipp-spiess","Number":"14792","RawContent":null,"Title":"Revert \"Fix Astro integration test by pinning `zod-to-json-schema`\"","State":"closed","Body":"Reverts tailwindlabs/tailwindcss#14780\r\n\r\nThe version pin is no longer needed. üôÇ \r\n\r\n## Test Plan\r\n\r\nCI is green again.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14792","RelatedDescription":"Closed or merged PR \"Revert \"Fix Astro integration test by pinning `zod-to-json-schema`\"\" (#14792)"},{"Id":"2613543665","IsPullRequest":true,"CreatedAt":"2024-10-25T09:13:51","Actor":"philipp-spiess","Number":"14793","RawContent":null,"Title":"Plugin API: Allow custom utilities to start with `@`","State":"open","Body":"Closes #14791\n\nAdd support to the JS Plugin interop layer for utilities that _start with_ `@`. This ensures no breaking when trying to load plugins that contribute utilities like `@container` from `@tailwindcss/container-queries` (even though the `@container` utility is now part of core).\n\n## Test Plan\n\nAdded the `@tailwindcss/container-queries` plugin to to the Vite example:\n![Screenshot 2024-10-25 at 11.18.19.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/0Y77ilPI2WoJfMLFiAEw/3761c0a8-8c54-42eb-a1fd-213c4215c024.png)\n\nHowever, in order for the Vite example to load the extension, I also had to apply the following patch:\n\n![Screenshot 2024-10-25 at 11.18.54.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/0Y77ilPI2WoJfMLFiAEw/bd151684-ff7b-4805-b305-71ac0378c610.png)\n\nI think this is related to our dev system though, the compiled plugin file is going to be a flat file with no requires in our public release.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14793","RelatedDescription":"Open PR \"Plugin API: Allow custom utilities to start with `@`\" (#14793)"},{"Id":"2612920442","IsPullRequest":false,"CreatedAt":"2024-10-25T02:30:11","Actor":"ziloen","Number":"14791","RawContent":null,"Title":"[v4] `@container` is an invalid utility name","State":"open","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\nv4.0.0-alpha.30\r\n\r\n**Reproduction URL**\r\n\r\n**Describe your issue**\r\n\r\nI am trying to upgrade to v4, but encountered the following error when using `@tailwindcss/container-queries`:\r\n```\r\n`matchUtilities({ '@container' : ‚Ä¶ })` defines an invalid utility name. Utilities should be alphanumeric and start with a lowercase letter, eg. `scrollbar`\r\n```\r\n\r\nhttps://github.com/tailwindlabs/tailwindcss/blob/10a8f1a7257ccd893ea2251279018c8da5541d90/packages/tailwindcss/src/compat/plugin-api.ts#L78","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14791","RelatedDescription":"Open issue \"[v4] `@container` is an invalid utility name\" (#14791)"},{"Id":"2612480450","IsPullRequest":true,"CreatedAt":"2024-10-24T20:22:08","Actor":"thecrypticace","Number":"14789","RawContent":null,"Title":"Prepare v4.0.0-alpha.30 release","State":"closed","Body":"","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14789","RelatedDescription":"Closed or merged PR \"Prepare v4.0.0-alpha.30 release\" (#14789)"},{"Id":"2612463611","IsPullRequest":true,"CreatedAt":"2024-10-24T20:11:59","Actor":"RobinMalfait","Number":"14788","RawContent":null,"Title":"Handle feedback from #14783","State":"closed","Body":"This PR is a continuation of #14783 to handle the feedback on that PR.\n\n1. Update the test to be more realistic\n2. Updated the comment\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14788","RelatedDescription":"Closed or merged PR \"Handle feedback from #14783\" (#14788)"},{"Id":"2612452664","IsPullRequest":true,"CreatedAt":"2024-10-24T20:10:20","Actor":"adamwathan","Number":"14787","RawContent":null,"Title":"Sort text wrapping utilities with typography utilities","State":"closed","Body":"This PR implements some changes to the way we sort typography utilities, inspired by #14715.\r\n\r\nPrior to this PR, utilities like `text-balance`, `break-words`, and `text-center` were sorted very early, even before things like border utilities:\r\n\r\n```html\r\n<div class=\"text-balance break-words border-2 border-blue-500 text-center indent-5 text-2xl font-medium capitalize leading-6 tracking-tight text-red-500 underline\"></div>\r\n```\r\n\r\nThis PR changes the sort order to co-locate these with other typography utilities which feels a lot more natural:\r\n\r\n```html\r\n<div class=\"border-2 border-blue-500 text-center indent-5 text-2xl leading-6 font-medium tracking-tight text-balance break-words text-red-500 capitalize underline\"></div>\r\n```\r\n\r\nI've also made some small adjustments to how other typography properties are sorted based on pairing with @reinink and just deciding what felt the most intuitive to us and matched the order we'd likely type things in manually.\r\n\r\nTo test this change I temporarily added a new test to `sort.test.ts` to make sure the classes were sorted in the expected order:\r\n\r\n```js\r\n  [\r\n    // Input\r\n    'text-red-500 text-center capitalize text-2xl break-words text-balance underline font-medium tracking-tight leading-6 indent-5',\r\n\r\n    // Expected\r\n    'text-center indent-5 text-2xl leading-6 font-medium tracking-tight text-balance break-words text-red-500 capitalize underline',\r\n  ],\r\n```\r\n\r\nDidn't keep the test around because there's no real logic to test here (it just matches the order in the `property-order.ts` file) and we don't have any other tests like this.\r\n\r\nI've also made some minor unrelated changes here like deleting legacy properties from `property-order.ts` that are never used, and fixing a typo where we wrote `work-break` instead of `word-break`.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14787","RelatedDescription":"Closed or merged PR \"Sort text wrapping utilities with typography utilities\" (#14787)"},{"Id":"2612395256","IsPullRequest":true,"CreatedAt":"2024-10-24T20:07:10","Actor":"thecrypticace","Number":"14786","RawContent":null,"Title":"Fix `word-break` typo","State":"closed","Body":"Fixes #14715","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14786","RelatedDescription":"Closed or merged PR \"Fix `word-break` typo\" (#14786)"},{"Id":"2612289292","IsPullRequest":true,"CreatedAt":"2024-10-24T18:50:21","Actor":"thecrypticace","Number":"14785","RawContent":null,"Title":"Update changelog details and naming around the new `not-*` variant","State":"closed","Body":"I've tweaked the changelog with suggestions from @adamwathan to improve clarity around what the actual changes are.\r\n\r\nI also renamed `compoundWith` back to `compound` ‚Äî I felt that it made sense at the time but keeping the old name definitely feels better the more I think about it.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14785","RelatedDescription":"Closed or merged PR \"Update changelog details and naming around the new `not-*` variant\" (#14785)"},{"Id":"2612055165","IsPullRequest":true,"CreatedAt":"2024-10-24T18:33:10","Actor":"RobinMalfait","Number":"14783","RawContent":null,"Title":"Ensure `layer(‚Ä¶)` on `@import` is only removed when `@utility` is present","State":"closed","Body":"This PR fixes an issue where `layer(‚Ä¶)` next to imports were removed where they shouldn't have been removed.\r\n\r\nThe issue exists if _any_ of the `@import` nodes in a file contains `@utility`, if that's the case then we removed the `layer(‚Ä¶)` next to _all_ `@import` nodes.\r\n\r\nBefore we were checking if the current sheet contained `@utility` or in any of its children (sub-`@import` nodes).\r\n\r\nThis fixes that by looping over the `@import` nodes in the current sheet, and looking for the `@utility` in the associated/imported file. This way we update each node individually.\r\n\r\nTest plan:\r\n---\r\n\r\nAdded a dedicated integration test to make sure all codemods together result in the correct result. Input:\r\nhttps://github.com/tailwindlabs/tailwindcss/blob/96e890837809487fecdd713695294cb9961cc1d6/integrations/upgrade/index.test.ts#L2076-L2108\r\n\r\nOutput:\r\nhttps://github.com/tailwindlabs/tailwindcss/blob/96e890837809487fecdd713695294cb9961cc1d6/integrations/upgrade/index.test.ts#L2116-L2126","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14783","RelatedDescription":"Closed or merged PR \"Ensure `layer(‚Ä¶)` on `@import` is only removed when `@utility` is present\" (#14783)"},{"Id":"2611857376","IsPullRequest":true,"CreatedAt":"2024-10-24T16:49:23","Actor":"philipp-spiess","Number":"14778","RawContent":null,"Title":"Upgrade: Ensure underscores in url() and var() are not escaped","State":"closed","Body":"This PR fixes an issue where currently a `theme()` function call inside an arbitrary value that used a dot in the key path:\n\n```jsx\nlet className = \"ml-[theme(spacing[1.5])]\"\n```\n\nWas causing issues when going though the codemod. The issue is that for candidates, we require `_` to be _escaped_, since otherwise they will be replaced with underscore. When going through the codemods, the above candidate would be translated to the following CSS variable access:\n\n```js\nlet className = \"ml-[var(--spacing-1\\_5))\"\n```\n\nBecause the underscore was escaped, we now have an invalid string inside a JavaScript file (as the `\\` would escape inside the quoted string. \n\nTo resolve this, we decided that this common case (as its used by the Tailwind CSS default theme) should work without escaping. In https://github.com/tailwindlabs/tailwindcss/pull/14776, we made the changes that CSS variables used via `var()` no longer unescape underscores. This PR extends that so that the Variant printer (that creates the serialized candidate representation after the codemods make changes) take this new encoding into account.\n\nThis will result in the above example being translated into:\n\n```js\nlet className = \"ml-[var(--spacing-1_5))\"\n```\n\nWith no more escaping. Nice!\n\n## Test Plan\n\nI have added test for this to the kitchen-sink upgrade tests. Furthermore, to ensure this really works full-stack, I have updated the kitchen-sink test to _actually build the migrated project with Tailwind CSS v4_. After doing so, we can assert that we indeed have the right class name in the generated CSS.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14778","RelatedDescription":"Closed or merged PR \"Upgrade: Ensure underscores in url() and var() are not escaped\" (#14778)"},{"Id":"2611985993","IsPullRequest":true,"CreatedAt":"2024-10-24T16:49:05","Actor":"philipp-spiess","Number":"14781","RawContent":null,"Title":"Ensure underscore in theme() are also preserved","State":"closed","Body":"Quick follow-up to #14776 to treat the `theme()` function the same way.","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14781","RelatedDescription":"Closed or merged PR \"Ensure underscore in theme() are also preserved\" (#14781)"},{"Id":"2612011287","IsPullRequest":false,"CreatedAt":"2024-10-24T16:39:57","Actor":"sntran","Number":"14782","RawContent":null,"Title":"[v4]: combine `peer-` with other variants","State":"closed","Body":"<!-- Please provide all of the information requested below. We're a small team and without all of this information it's not possible for us to help and your bug report will be closed. -->\r\n\r\n**What version of Tailwind CSS are you using?**\r\n\r\ntailwindcss v4.0.0-alpha.29\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\n@tailwindcss/cli v4.0.0-alpha.29\r\n\r\n**What version of Node.js are you using?**\r\n\r\nNode v20.12.2\r\n\r\n**What browser are you using?**\r\n\r\nChrome\r\n\r\n**What operating system are you using?**\r\n\r\nmacOS\r\n\r\n**Reproduction URL**\r\n\r\nhttps://play.tailwindcss.com/hqwKODvklG\r\n\r\n**Describe your issue**\r\n\r\nA variant such as `is-summary` should be combinable with `peer-` to be effective, e.g. `peer-is-summary:bg-amber-400`.\r\n\r\nCurrently, the generated CSS is\r\n\r\n```css\r\n.\\*\\:peer-is-summary\\:bg-amber-400 {\r\n  :where(& > *) {\r\n    &:is(:where(.peer):is(summary) ~ *) {\r\n      background-color: var(--color-amber-400, oklch(0.828 0.189 84.429));\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nWhile that is correct with `peer-` expecting a previous sibling with `.peer` class, I can't find a way to add that when I don't have control over the markup. `*:is-summary:peer` does not work.\r\n\r\nIn this particular use case, `is-` variants are special because they already target a certain element, so requiring `.peer` may not be necessary.\r\n\r\nWould this be a use case to have `is-*` varirants (with `*` can be any arbitrary selector) built in Tailwind? ","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14782","RelatedDescription":"Closed issue \"[v4]: combine `peer-` with other variants\" (#14782)"},{"Id":"2612068126","IsPullRequest":false,"CreatedAt":"2024-10-24T16:29:08","Actor":"slavarazum","Number":"14784","RawContent":null,"Title":"[4 alpha] breaks the default Vite `url(...)` references in imported CSS files.","State":"open","Body":"**What version of Tailwind CSS are you using?**\r\n\r\nFor example: alpha.29 (latest)\r\n\r\n**What build tool (or framework if it abstracts the build tool) are you using?**\r\n\r\nFor example: Vite 5.4.10 (latest)\r\n\r\n**What version of Node.js are you using?**\r\n\r\nFor example: v20.9.0\r\n\r\n**What browser are you using?**\r\n\r\nMainly Safari, however it's not related to the issue üôÉ\r\n\r\n**What operating system are you using?**\r\n\r\nMacOS\r\n\r\n**Reproduction URL**\r\n\r\nhttps://github.com/slavarazum/tailwind4-alpha-vite/\r\n\r\n**Describe your issue**\r\n\r\nVite provides [@import inline and rebasing](https://vite.dev/guide/features.html#import-inlining-and-rebasing) for CSS.\r\nI'm trying to import font from the Fontsource library: https://fontsource.org/fonts/nunito which references font files using `url(...)`.\r\n\r\nAs a result we have such rebased urls:\r\n![CleanShot 2024-10-24 at 17 32 22@2x](https://github.com/user-attachments/assets/3fad2d36-a1ab-48c2-89d1-34484a90edf4)\r\n\r\nAfter installing Tailwind, importing it, and enabling the Vite plugin, the URLs remain with the default related paths:\r\n![CleanShot 2024-10-24 at 17 35 46@2x](https://github.com/user-attachments/assets/c24fa7a4-707c-45c7-842a-efef23990390)\r\n","Url":"https://github.com/tailwindlabs/tailwindcss/issues/14784","RelatedDescription":"Open issue \"[4 alpha] breaks the default Vite `url(...)` references in imported CSS files.\" (#14784)"},{"Id":"2611904315","IsPullRequest":true,"CreatedAt":"2024-10-24T15:18:57","Actor":"philipp-spiess","Number":"14780","RawContent":null,"Title":"Fix Astro integration test by pinning `zod-to-json-schema`","State":"closed","Body":"A regression in one of the dependencies of `astro` has broken our integration tests. An upstream issue already exists and is tracked as https://github.com/StefanTerdell/zod-to-json-schema/issues/151.\n\nThis PR pins `zod-to-json-schema` to unblock the issue.\n\n## Test Plan\n\n1. I made sure that `pnpm test:integrations astro` fails locally as well\n2. After the change, it passes again:\n    ![Screenshot 2024-10-24 at 17.16.27.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/0Y77ilPI2WoJfMLFiAEw/3a35eca7-8d31-41e0-b961-c1fd1ed55ba6.png)\n\n","Url":"https://github.com/tailwindlabs/tailwindcss/pull/14780","RelatedDescription":"Closed or merged PR \"Fix Astro integration test by pinning `zod-to-json-schema`\" (#14780)"}],"ResultType":"GitHubIssue"}},"RunOn":"2024-10-29T03:30:22.4886278Z","RunDurationInMilliseconds":491}