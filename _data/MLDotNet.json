{"Data":{"GitHub":{"Issues":[{"Id":"732842412","IsPullRequest":true,"CreatedAt":"2020-11-05T00:16:04","Actor":"frank-dong-ms","Number":"5468","RawContent":null,"Title":"fix issue 5020, allow ML.NET to load tf model with primitive input and output column","State":"closed","Body":"Fix issue 5020, enable tensorflow transformer take primitive type as input column.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5468","RelatedDescription":"Closed or merged PR \"fix issue 5020, allow ML.NET to load tf model with primitive input and output column\" (#5468)"},{"Id":"736405475","IsPullRequest":true,"CreatedAt":"2020-11-04T20:33:49","Actor":"michaelgsharp","Number":"5475","RawContent":null,"Title":"Added test key.","State":"open","Body":"Added back in the test key to fix the extension issue.","Url":"https://github.com/dotnet/machinelearning/pull/5475","RelatedDescription":"Open PR \"Added test key.\" (#5475)"},{"Id":"736350973","IsPullRequest":true,"CreatedAt":"2020-11-04T18:58:52","Actor":"Lynx1820","Number":"5474","RawContent":null,"Title":"Fix for #5469","State":"open","Body":"This PR fixes #5469 by fixing a bug where some code was not getting reached when the image was already the resized dimensions. ","Url":"https://github.com/dotnet/machinelearning/pull/5474","RelatedDescription":"Open PR \"Fix for #5469\" (#5474)"},{"Id":"735932441","IsPullRequest":false,"CreatedAt":"2020-11-04T17:38:26","Actor":"fuomag9","Number":"5473","RawContent":null,"Title":"Is it possible to convert a ml.net model (.zip) to ONNX or tensorflow model?","State":"closed","Body":"### System information\r\n\r\n- **Win 10 10.0.19041**:\r\n- **.NET Version 3.1.402**: \r\n\r\n### Issue\r\n\r\nIs it possible to convert a ml.net model (.zip) to ONNX or tensorflow model? I've found various APIs but they were either removed or I didn't know how to make them work.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5473","RelatedDescription":"Closed issue \"Is it possible to convert a ml.net model (.zip) to ONNX or tensorflow model?\" (#5473)"},{"Id":"735708463","IsPullRequest":true,"CreatedAt":"2020-11-03T23:45:11","Actor":"mstfbl","Number":"5472","RawContent":null,"Title":"Arcade CI Testing","State":"open","Body":"Arcade CI Testing Draft PR","Url":"https://github.com/dotnet/machinelearning/pull/5472","RelatedDescription":"Open PR \"Arcade CI Testing\" (#5472)"},{"Id":"731603007","IsPullRequest":true,"CreatedAt":"2020-11-03T21:16:16","Actor":"michaelgsharp","Number":"5464","RawContent":null,"Title":"The `-test` command for windows. Nuget packages","State":"closed","Body":"The `-test` command works for windows. CI doesn't work yet as the CI pipeline hasn't been updated. Neither does nightly.\r\n\r\nNuget packages can now be created. Symbols packages are not working yet.","Url":"https://github.com/dotnet/machinelearning/pull/5464","RelatedDescription":"Closed or merged PR \"The `-test` command for windows. Nuget packages\" (#5464)"},{"Id":"733837804","IsPullRequest":false,"CreatedAt":"2020-11-03T18:56:51","Actor":"liugaocn","Number":"5470","RawContent":null,"Title":"No multinomial logistic regression algorithm","State":"closed","Body":"I didn't find multinomial logistic regression algorithm. Is it with a different name?\r\n\r\nMultinomial logistic regression is used to predict probabilities for more than two classes.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5470","RelatedDescription":"Closed issue \"No multinomial logistic regression algorithm\" (#5470)"},{"Id":"726827215","IsPullRequest":true,"CreatedAt":"2020-11-03T18:40:18","Actor":"mstfbl","Number":"5445","RawContent":null,"Title":"Use Timer and ctx.CancelExecution() to fix AutoML max-time experiment bug","State":"closed","Body":"Fix #5437 \r\n\r\nThis PR utilizes `Timer` and `ctx.CancelExecution` in AutoML's `Experiment` to listen for and cancel ongoing experiment after given `MaxExperimentTime` has elapsed.","Url":"https://github.com/dotnet/machinelearning/pull/5445","RelatedDescription":"Closed or merged PR \"Use Timer and ctx.CancelExecution() to fix AutoML max-time experiment bug\" (#5445)"},{"Id":"735179198","IsPullRequest":true,"CreatedAt":"2020-11-03T09:57:08","Actor":"justinormont","Number":"5471","RawContent":null,"Title":"MaxModels exit criteria for AutoML unit test","State":"open","Body":"Small update to https://github.com/dotnet/machinelearning/pull/5163.\r\n\r\nUses the internal [`maxModels`](https://github.com/dotnet/machinelearning/blob/e50c4d20012e0d62852f404ae443afca7dad043e/src/Microsoft.ML.AutoML/API/ExperimentSettings.cs#L60) parameter instead of `MaxExperimentTimeInSeconds` for the exit criteria of AutoML. \r\n\r\nThis is to increase the test stability incase the test is run on a slower machine.","Url":"https://github.com/dotnet/machinelearning/pull/5471","RelatedDescription":"Open PR \"MaxModels exit criteria for AutoML unit test\" (#5471)"},{"Id":"728773405","IsPullRequest":false,"CreatedAt":"2020-11-02T21:10:20","Actor":"deiruch","Number":"5456","RawContent":null,"Title":"Doc: Example for LoadRawImageBytes does not contain a call to LoadRawImageBytes","State":"closed","Body":"\r\nThe example shown in the documentation of the LoadRawImageBytes method does not contain a single reference to this method. I think an example calling this method would be more helpful.\r\n\r\n\r\n---\r\n#### Document Details\r\n\r\n⚠ *Do not edit this section. It is required for docs.microsoft.com ➟ GitHub issue linking.*\r\n\r\n* ID: 935b3cba-8385-d7b1-0d1c-92ce1e5b6bef\r\n* Version Independent ID: f4c01ba9-1f3e-03fa-48ea-1a62a13e11b4\r\n* Content: [ImageEstimatorsCatalog.LoadRawImageBytes(TransformsCatalog, String, String, String) Method (Microsoft.ML)](https://docs.microsoft.com/en-us/dotnet/api/microsoft.ml.imageestimatorscatalog.loadrawimagebytes?view=ml-dotnet)\r\n* Content Source: [dotnet/xml/Microsoft.ML/ImageEstimatorsCatalog.xml](https://github.com/dotnet/ml-api-docs/blob/live/dotnet/xml/Microsoft.ML/ImageEstimatorsCatalog.xml)\r\n* Product: **dotnet-ml-api**\r\n* GitHub Login: @natke\r\n* Microsoft Alias: **nakersha**","Url":"https://github.com/dotnet/machinelearning/issues/5456","RelatedDescription":"Closed issue \"Doc: Example for LoadRawImageBytes does not contain a call to LoadRawImageBytes\" (#5456)"},{"Id":"730729894","IsPullRequest":true,"CreatedAt":"2020-11-02T19:29:53","Actor":"Lynx1820","Number":"5460","RawContent":null,"Title":"Changing LoadRawImages Sample","State":"closed","Body":"To resolve issue #5456\r\n\r\nSince the image is raw, what other info should I print to make this sample more useful? ","Url":"https://github.com/dotnet/machinelearning/pull/5460","RelatedDescription":"Closed or merged PR \"Changing LoadRawImages Sample\" (#5460)"},{"Id":"731400231","IsPullRequest":false,"CreatedAt":"2020-11-02T18:55:54","Actor":"PMGruber","Number":"5463","RawContent":null,"Title":"How to read all data from output shapes of a node?","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**:\r\nWindows 10\r\n- **.NET Version**: \r\n.net Core 3.1\r\n- **ML.NET Version**:\r\nML.NET 1.5.2 \r\n- **Further packages**:\r\nSciSharp.TensorFlow.Redist 2.3.1\r\n\r\n### Issue\r\n\r\n- **What did you do?**\r\nWith my ML.NET code I load an existing TensorFlow Model for object detection and run it. It's an own pretrained model and there is no further training in my code. The execution of the model works fine. The model provides several result information: coordinates, confidences, class ids, number of found objects\r\n- **What happened?**\r\nWhen I try to read data after inference I only get coordinates.\r\n- **What did you expect?**\r\nGetting all data of node.\r\n\r\n### Source code / logs\r\nThe special thing about the model is the shape of output node. In all examples I saw so far, it was always e.g. a list of floats. In this specific model the shape are several lists containing the data.\r\n\r\nWhen I have a look at the output node of the model with Netron it looks like this\r\n![image](https://user-images.githubusercontent.com/8576966/97433888-7ce49300-191e-11eb-9500-207614a7130d.png)\r\n\r\nMy colleagues, consuming the model with python, just call it with something like\r\n`coords, confidence, class_ids,  nums  = model( input_image)`\r\nand receive the results. \r\n\r\nSo far I defined my result class as\r\n```C#\r\npublic class ImagePrediction\r\n{\r\n    [ColumnName(\"StatefulPartitionedCall\")]\r\n    public float[] Coordinates;\r\n}\r\n```\r\nso it makes sense that only the first list is available as result.\r\n\r\nUnfortunately I have no idea what I have do change to get all provided information in ML.NET\r\n\r\nRest of execution code is quite the same like classification sample with a TensorFlow model.\r\n\r\nI uploaded model and code to a repository. Since I am not allowed to make the model public, it is a private repo. Please let me know when someone wants to have a deeper look in code/model.\r\n\r\nI appreciate any ideas what I can try or even if it is possible/supported at all.\r\n\r\nThanks and regards","Url":"https://github.com/dotnet/machinelearning/issues/5463","RelatedDescription":"Closed issue \"How to read all data from output shapes of a node?\" (#5463)"},{"Id":"731805648","IsPullRequest":false,"CreatedAt":"2020-11-02T18:30:22","Actor":"devedse","Number":"5466","RawContent":null,"Title":"Trying to implement YoloV4 in ML.NET but running into some trouble (I'm quite new to all of this)","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**: Windows 10 20H2\r\n- **.NET Version (eg., dotnet --info)**: 3.1.9\r\n\r\n### Introduction\r\n\r\nI'm currently trying to use the YoloV4 model inside ML.NET but whenever I try to put an image through the model I get very strange results from the model. (It mainly finds backpacks, handbags, some apples and some other unexpected results). The image I'm using:\r\n![dog](https://user-images.githubusercontent.com/2350015/97497833-66185d80-196b-11eb-8c96-ce7ed676cbd6.jpg)\r\n\r\nI created a repository to reproduce my issue as well:\r\nhttps://github.com/devedse/DeveMLNetTest\r\n\r\nDisclaimer: I'm quite new to all of this :smile:\r\n\r\n### Steps I've taken\r\n\r\nI first wanted to obtain a pre-trained model which I was sure worked so I did the following steps:\r\n1. Cloned: https://github.com/Tianxiaomo/pytorch-YOLOv4\r\n1. Installed requirements + pytorch + cuda etc.\r\n1. Downloaded the Yolov4_epoch1.pth model and put it in `checkpoints\\Yolov4_epoch1.pth`\r\n1. Ran `demo_pytorch2onnx.py` with debug enabled.\r\n\r\nWhen you do this you can step through the code where the output from the model is parsed (this shows the labels for all boxes with a confidence higher then 0.6):\r\n![image](https://user-images.githubusercontent.com/2350015/97498111-e212a580-196b-11eb-83b3-013f905eec5e.png)\r\n\r\nWhen we look up these labels, we can see that (all +1 since it's a 0-index array):\r\n```\r\n1: bicycle\r\n8: truck\r\n16: dog\r\n```\r\n\r\nSo the results in Python seem to be correct. This python script first converts the model to an ONNX model and then uses that model to do the inference.\r\n\r\nWhen I now start using the model inside C# though and try to parse through the results in exactly the same way I find completely different results:\r\n![image](https://user-images.githubusercontent.com/2350015/97498763-0622b680-196d-11eb-91b9-bb02374e7e39.png)\r\n\r\nCould it be that the model is somehow creating garbage data?\r\n\r\nAnyway, here's the code that I'm \r\n\r\nMLContext:\r\n```\r\nvar pipeline = mlContext.Transforms.LoadImages(outputColumnName: \"image\", imageFolder: \"\", inputColumnName: nameof(ImageNetData.ImagePath))\r\n                .Append(mlContext.Transforms.ResizeImages(outputColumnName: \"image\", imageWidth: ImageNetSettings.imageWidth, imageHeight: ImageNetSettings.imageHeight, inputColumnName: \"image\"))\r\n                .Append(mlContext.Transforms.ExtractPixels(outputColumnName: \"input\", inputColumnName: \"image\"))\r\n                .Append(mlContext.Transforms.ApplyOnnxModel(\r\n                    modelFile: modelLocation,\r\n                    outputColumnNames: new[] { \"boxes\", \"confs\" },\r\n                    inputColumnNames: new[] { \"input\" }\r\n                    ));\r\n```\r\n\r\nCode to parse model output:\r\n```\r\npublic IList<YoloBoundingBox> ParseOutputs(float[] boxes, float[] confs, float threshold = .6F)\r\n{\r\n\tvar boxesUnflattened = new List<BoundingBoxDimensions>();\r\n\tfor (int i = 0; i < boxes.Length; i += 4)\r\n\t{\r\n\t\tboxesUnflattened.Add(new BoundingBoxDimensions()\r\n\t\t{\r\n\t\t\tX = boxes[i],\r\n\t\t\tY = boxes[i + 1],\r\n\t\t\tWidth = boxes[i + 2] - boxes[i],\r\n\t\t\tHeight = boxes[i + 3] - boxes[i + 1],\r\n\t\t\tOriginalStuff = boxes.Skip(i).Take(4).ToArray()\r\n\t\t});\r\n\t}\r\n\r\n\tvar confsUnflattened = new List<float[]>();\r\n\tfor (int i = 0; i < confs.Length; i += 80)\r\n\t{\r\n\t\tconfsUnflattened.Add(confs.Skip(i).Take(80).ToArray());\r\n\t}\r\n\r\n\tvar maxConfidencePerBox = confsUnflattened.Select(t => t.Select((n, i) => (Number: n, Index: i)).Max()).ToList();\r\n\tvar boxesNumbered = boxesUnflattened.Select((b, i) => (Box: b, Index: i)).ToList();\r\n\r\n\tvar boxesIndexWhichHaveHighConfidence = maxConfidencePerBox.Where(t => t.Number > threshold).ToList();\r\n\tvar allBoxesThemselvesWithHighConfidence = boxesIndexWhichHaveHighConfidence.Join(boxesNumbered, t => t.Index, t => t.Index, (l, r) => (Box: r, Conf: l)).ToList();\r\n\r\n\r\n\tConsole.WriteLine(\"I would expect a bike, dog and car here\");\r\n\tConsole.WriteLine(\"Instead we got:\");\r\n\r\n\tforeach (var b in allBoxesThemselvesWithHighConfidence)\r\n\t{\r\n\t\tvar startString = $\"{b.Conf.Number}: {labels[b.Conf.Index]}\";\r\n\t\tConsole.WriteLine($\"{startString.PadRight(30, ' ')}({string.Join(\",\", b.Box.Box.OriginalStuff)})\");\r\n\t}\r\n\r\n\tthrow new InvalidOperationException(\"Everything below this doesn't work anyway\");\r\n```\r\n\r\nCan someone give me some hints / ideas on why I could be running into this issue?\r\n\r\nAlso feel free to clone the repo and press F5. It should simply build / run.\r\nhttps://github.com/devedse/DeveMLNetTest","Url":"https://github.com/dotnet/machinelearning/issues/5466","RelatedDescription":"Closed issue \"Trying to implement YoloV4 in ML.NET but running into some trouble (I'm quite new to all of this)\" (#5466)"},{"Id":"731667035","IsPullRequest":false,"CreatedAt":"2020-10-30T23:14:05","Actor":"pavel-rev","Number":"5465","RawContent":null,"Title":"Bayesian Optimization with Gaussian Processes","State":"closed","Body":"Are there any implementations of aforementioned methods with \"same process space\" interface to C# by Microsoft or Microsoft sponsored project or similar? Basically I am interested in anything solid/more or less ready to be used \"out of the box\". Tree-based regression under the hood will also work.","Url":"https://github.com/dotnet/machinelearning/issues/5465","RelatedDescription":"Closed issue \"Bayesian Optimization with Gaussian Processes\" (#5465)"},{"Id":"731089609","IsPullRequest":true,"CreatedAt":"2020-10-30T20:09:44","Actor":"antoniovs1029","Number":"5462","RawContent":null,"Title":"Add AutoML culture issue test","State":"closed","Body":"Follow up of #5163 \r\n\r\nHere I add the changes on PR #5163 and a test to actually show that the changes worked correctly. The plan is to merge that other PR and then add this PR for the test.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5462","RelatedDescription":"Closed or merged PR \"Add AutoML culture issue test\" (#5462)"},{"Id":"728633113","IsPullRequest":true,"CreatedAt":"2020-10-30T18:02:44","Actor":"frank-dong-ms","Number":"5455","RawContent":null,"Title":"handle exception during GetNextPipeline for AutoML","State":"closed","Body":"fix part of issue found from #5428 \r\n\r\nhandle exception during GetNextPipeline for AutoML experiment to avoid exception crash the whole AutoML pipeline.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5455","RelatedDescription":"Closed or merged PR \"handle exception during GetNextPipeline for AutoML\" (#5455)"},{"Id":"733080581","IsPullRequest":false,"CreatedAt":"2020-10-30T11:00:23","Actor":"BobLd","Number":"5469","RawContent":null,"Title":"ResizeImages() raise System.ArgumentException when resizing image already at correct size","State":"open","Body":"### System information\r\n\r\n- **OS version/distro**: Windows 10, 10.0.19041\r\n- **.NET Version (eg., dotnet --info)**:  .NET Core 3.1.403\r\n\r\n### Issue\r\n\r\n- **What did you do?**\r\nDoing inference on an image, with `ResizeImages()` part of the pipeline. The processed image is already at the correct size (1300x1300, i.e. no resizing needed). Also occurs with different pipeline/images when image already at `ResizeImages()` output size.\r\n\r\n- **What happened?**\r\nProgram raised an exception: `System.ArgumentException: 'Parameter is not valid.'`\r\n(No exception for other images, and for same image with a different size).\r\n\r\n- **What did you expect?**\r\nNo exception.\r\n\r\n### Source code / logs\r\n```csharp\r\n// Define scoring pipeline\r\nvar pipeline = mlContext.Transforms.ResizeImages(inputColumnName: \"bitmap\", outputColumnName: \"image\",\r\n                                             imageWidth: 1300, imageHeight: 1300,\r\n                                             resizing: ResizingKind.IsoPad)\r\n                            .Append(mlContext.Transforms.ExtractPixels(outputColumnName: \"image\", scaleImage: 1f / 255f))\r\n                            .Append(mlContext.Transforms.ApplyOnnxModel(inputColumnNames: new[] { \"image\" },\r\n                                                                        outputColumnNames: new[] { \"boxes\", \"labels\", \"scores\", \"masks\" },\r\n                                                                        modelFile: modelLocation));\r\n// Fit on empty list to obtain input data schema\r\nvar model = pipeline.Fit(mlContext.Data.LoadFromEnumerable(new List<InputBitmapData>()));\r\n\r\n// Create prediction engine\r\nvar predictionEngine = mlContext.Model.CreatePredictionEngine<InputBitmapData, OutputPrediction>(model);\r\n\r\nusing (var bitmap = new Bitmap(Image.FromFile(imagePath)))\r\n{\r\n      var prediction = predictionEngine.Predict(new InputBitmapData() { Image = bitmap }); // <- error raised\r\n}\r\n\r\n```\r\n\r\n```\r\nSystem.ArgumentException\r\n  HResult=0x80070057\r\n  Message=Parameter is not valid.\r\n  Source=System.Drawing.Common\r\n  StackTrace:\r\n   at System.Drawing.Image.get_Height()\r\n   at Microsoft.ML.Transforms.Image.ImageResizingTransformer.Mapper.<>c__DisplayClass3_0.<MakeGetter>b__1(Bitmap& dst)\r\n   at Microsoft.ML.Transforms.Image.ImagePixelExtractingTransformer.Mapper.<>c__DisplayClass5_0`1.<GetGetterCore>b__1(VBuffer`1& dst)\r\n   at Microsoft.ML.Transforms.Onnx.OnnxTransformer.Mapper.NamedOnnxValueGetterVec`1.GetNamedOnnxValue()\r\n   at Microsoft.ML.Transforms.Onnx.OnnxTransformer.Mapper.UpdateCacheIfNeeded(Int64 position, INamedOnnxValueGetter[] srcNamedOnnxValueGetters, String[] activeOutputColNames, OnnxRuntimeOutputCacher outputCache)\r\n   at Microsoft.ML.Transforms.Onnx.OnnxTransformer.Mapper.<>c__DisplayClass12_0`1.<MakeTensorGetter>b__0(VBuffer`1& dst)\r\n   at Microsoft.ML.Data.TypedCursorable`1.TypedRowBase.<>c__DisplayClass8_0`1.<CreateDirectVBufferSetter>b__0(TRow row)\r\n   at Microsoft.ML.Data.TypedCursorable`1.TypedRowBase.FillValues(TRow row)\r\n   at Microsoft.ML.Data.TypedCursorable`1.RowImplementation.FillValues(TRow row)\r\n   at Microsoft.ML.PredictionEngineBase`2.FillValues(TDst prediction)\r\n   at Microsoft.ML.PredictionEngine`2.Predict(TSrc example, TDst& prediction)\r\n   at Microsoft.ML.PredictionEngineBase`2.Predict(TSrc example)\r\n```\r\n\r\nGuess: the problem might come from here:\r\nhttps://github.com/dotnet/machinelearning/blob/a9ab7fc530ba9a2a519aaca70862ee67f42bf712/src/Microsoft.ML.ImageAnalytics/ImageResizer.cs#L301-L305","Url":"https://github.com/dotnet/machinelearning/issues/5469","RelatedDescription":"Open issue \"ResizeImages() raise System.ArgumentException when resizing image already at correct size\" (#5469)"},{"Id":"729845023","IsPullRequest":false,"CreatedAt":"2020-10-30T02:12:56","Actor":"karanjakhar","Number":"5458","RawContent":null,"Title":"Error while loading yolov4 model ","State":"closed","Body":"![Screenshot from 2020-10-27 00-56-53](https://user-images.githubusercontent.com/29913676/97219090-84594e80-17ef-11eb-923e-7e9dfda0d3f7.png)\r\nI am new to this. I have experience with Python but with this, I have no idea. Please help. What is this error indicating?","Url":"https://github.com/dotnet/machinelearning/issues/5458","RelatedDescription":"Closed issue \"Error while loading yolov4 model \" (#5458)"},{"Id":"731822738","IsPullRequest":true,"CreatedAt":"2020-10-29T04:10:28","Actor":"mstfbl","Number":"5467","RawContent":null,"Title":"Fixed MacOS daily & nightly builds due to Homebrew bug","State":"closed","Body":"Similar to Issue #5457, the nightly ML.NET MacOS builds are failing due to the `openssl` package that is due to be removed from the MacOS images and an outdated standard Homebrew installation on CI's MacOS images, as discussed in the original MacOS-Homebrew GitHub [issue](https://github.com/actions/virtual-environments/issues/1811). This PR adds the fix for this issue.\r\n\r\nIt is said [in this comment](https://github.com/actions/virtual-environments/issues/1811#issuecomment-717348403) that the fix for this issue will be deployed in a few days, until which the changes in this PR will remain on main.","Url":"https://github.com/dotnet/machinelearning/pull/5467","RelatedDescription":"Closed or merged PR \"Fixed MacOS daily & nightly builds due to Homebrew bug\" (#5467)"},{"Id":"731013105","IsPullRequest":true,"CreatedAt":"2020-10-28T01:58:08","Actor":"mstfbl","Number":"5461","RawContent":null,"Title":"Debugging Arcade MacOS","State":"open","Body":"Debugging Arcade MacOS runs to see run results on CI, and to see potential differences between local vs CI runs.\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5461","RelatedDescription":"Open PR \"Debugging Arcade MacOS\" (#5461)"},{"Id":"730164397","IsPullRequest":false,"CreatedAt":"2020-10-27T06:45:44","Actor":"iluveu28","Number":"5459","RawContent":null,"Title":"Make TextLoader infer column information from a CSV file header","State":"open","Body":"### System information\r\n\r\n- **OS version/distro**: Windows 10\r\n- **.NET Version (eg., dotnet --info)**: 3.1\r\n\r\n### Issue\r\n\r\nI couldn't find the channel to submit a request so I apologise if this isnt the right place.\r\n\r\nI have a web portal that customers upload csv files to train and predict using multiclass-classification algo. However, ML.NET requires a concrete class for the Input Model with properties hard coded to the columns of the csv. \r\n\r\nCould you enhance the LoadFromText method so that it can accept an argument for the label header name and then just read the features from the headers of the rest of the csv file without having to create a class? This way nothing is hard coded and it can work with any csv file that my customers upload.\r\n\r\n### Source code / logs\r\n\r\nPlease paste or attach the code or logs or traces that would be helpful to diagnose the issue you are reporting.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5459","RelatedDescription":"Open issue \"Make TextLoader infer column information from a CSV file header\" (#5459)"},{"Id":"726911615","IsPullRequest":false,"CreatedAt":"2020-10-27T00:46:56","Actor":"bsambrone","Number":"5446","RawContent":null,"Title":"Multidimensional Vectors causing AutoML to throw null reference exception","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**: Win10\r\n- **.NET Version (eg., dotnet --info)**: 3.1.7\r\n\r\n### Issue\r\n\r\n- **What did you do?**\r\nTried to use a 2 dimensional float array as a vector\r\n- **What happened?**\r\nGot a null reference exception when trying to run an experiment\r\n- **What did you expect?**\r\nTh experiment to run\r\n\r\nThe documentation seems to indicate my setup is correct: https://docs.microsoft.com/en-us/dotnet/api/microsoft.ml.data.vectortypeattribute.-ctor?view=ml-dotnet#Microsoft_ML_Data_VectorTypeAttribute__ctor_System_Int32___\r\n\r\nTo fix my multidimension vector problem, I've tried:\r\n* Adding/Removing the float[,] initializers in InputData\r\n* Specifying the exact size with [VectorType(3,60)]\r\n* Leaving the [VectorType] attribute off altogether and using autoschema to set it.\r\n* Leaving the [VectorType] attribute off altogether and not using autoschema to let ML.net figure it out on its own\r\n* Adding just [VectorType()], although the docs say that is for single dimension arrays.\r\n\r\n### Source code / logs\r\n\r\nHere is a minimal reproduction of the issue:\r\n```\r\nclass Program\r\n{\r\n    static void Main(string[] args)\r\n    {\r\n        var mlContext = new MLContext();\r\n\r\n        // create schema for multidimensional vector\r\n        var autoSchema = SchemaDefinition.Create(typeof(InputData));\r\n        var col = autoSchema[1];\r\n        col.ColumnType = new VectorDataViewType(NumberDataViewType.Single, 3, 60);\r\n\r\n        // fabricate some data\r\n        var trainingData = new List<InputData>();\r\n        var inputData = new InputData();\r\n        inputData.MultiDimensional = new float[20,20];\r\n        for (int i = 0; i < inputData.MultiDimensional.GetUpperBound(0); i++)\r\n        {\r\n            for (int j = 0; j < inputData.MultiDimensional.GetUpperBound(1); j++)\r\n            {\r\n                inputData.MultiDimensional[i,j] = 5; // doesn't matter\r\n            }\r\n        }\r\n        trainingData.Add(inputData);\r\n\r\n        // setup a data view\r\n        IDataView trainingDataView = mlContext.Data.LoadFromEnumerable<InputData>(trainingData, autoSchema);\r\n\r\n        // preview it (goes BOOM)\r\n        var preview = trainingDataView.Preview();\r\n\r\n        // run the experiment\r\n        var settings = new BinaryExperimentSettings();\r\n        settings.MaxExperimentTimeInSeconds = 60;\r\n        ExperimentResult<BinaryClassificationMetrics> experimentResult = mlContext.Auto()\r\n            .CreateBinaryClassificationExperiment(settings)\r\n            .Execute(trainingDataView);\r\n    }\r\n}\r\n\r\npublic class InputData\r\n{\r\n    public bool Label { get; set; }\r\n    public float[,] MultiDimensional { get; set; }\r\n}\r\n```\r\n\r\nPlease paste or attach the code or logs or traces that would be helpful to diagnose the issue you are reporting.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5446","RelatedDescription":"Closed issue \"Multidimensional Vectors causing AutoML to throw null reference exception\" (#5446)"},{"Id":"729300422","IsPullRequest":true,"CreatedAt":"2020-10-26T17:34:36","Actor":"mstfbl","Number":"5457","RawContent":null,"Title":"Fixed MacOS CI Pipeline builds","State":"closed","Body":"This PR adds build workarounds for the recently-failing MacOS builds. As discussed in the main MacOS-Homebrew GitHub [issue](https://github.com/actions/virtual-environments/issues/1811), the `openssl` package that is due to be removed from the MacOS images and an outdated standard Homebrew installation on CI's MacOS images were causing the builds to fail.","Url":"https://github.com/dotnet/machinelearning/pull/5457","RelatedDescription":"Closed or merged PR \"Fixed MacOS CI Pipeline builds\" (#5457)"},{"Id":"728503780","IsPullRequest":true,"CreatedAt":"2020-10-26T06:59:38","Actor":"mstfbl","Number":"5454","RawContent":null,"Title":"Fix MacOS Pipelines build","State":"closed","Body":"We are excited to review your PR.\r\n\r\nSo we can do the best job, please check:\r\n\r\n- [ ] There's a descriptive title that will make sense to other developers some time from now. \r\n- [ ] There's associated issues. All PR's should have issue(s) associated - unless a trivial self-evident change such as fixing a typo. You can use the format `Fixes #nnnn` in your description to cause GitHub to automatically close the issue(s) when your PR is merged.\r\n- [ ] Your change description explains what the change does, why you chose your approach, and anything else that reviewers should know.\r\n- [ ] You have included any necessary tests in the same PR.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5454","RelatedDescription":"Closed or merged PR \"Fix MacOS Pipelines build\" (#5454)"},{"Id":"727317860","IsPullRequest":false,"CreatedAt":"2020-10-23T20:26:42","Actor":"Gaopeng-Bai","Number":"5449","RawContent":null,"Title":"Unable to load DLL 'tensorflow' or one of its dependencies","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**: Azure windows app service\r\n- **.NET Version (eg., dotnet --info)**:  3.1 \r\n- **ASP.NET Version (eg., dotnet --info)**:  3.1.7\r\n#### Packages\r\n- Microsoft.ML                          1.5.2\r\n- Microsoft.ML.ImageAnalytics 1.5.2\r\n- Microsoft.ML.Vision               1.5.2\r\n- Microsoft.ML.TensorFlow        1.5.2\r\n\r\n- SciSharp.TensorFlow.Redist     2.3.0\r\n- TensorFlow.NET                       0.21.0\r\n\r\n### Issue\r\nI create a web application with ML.Net. Everything works on my local machine,  But the Azure server catch the error when I debugged on app service.\r\n\r\n`System.FormatException: Tensorflow exception triggered while loading model. ---> System.DllNotFoundException: Unable to load DLL 'tensorflow' or one of its dependencies: The specified module could not be found. (Exception from HRESULT: 0x8007007E)\r\n   at Tensorflow.c_api.TF_NewGraph()\r\n   at Tensorflow.Graph..ctor()`\r\n\r\n- **What did you do?**\r\nDeploy a web application with ML.NET to azure.\r\n- **What happened?**\r\nSystem.DllNotFoundException: Unable to load DLL 'tensorflow' or one of its dependencies\r\n- **What did you expect?**\r\nThe program can run the same as local.\r\n\r\n### Source code / logs\r\n\r\nPlease paste or attach the code or logs or traces that would be helpful to diagnose the issue you are reporting.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5449","RelatedDescription":"Closed issue \"Unable to load DLL 'tensorflow' or one of its dependencies\" (#5449)"},{"Id":"727741648","IsPullRequest":true,"CreatedAt":"2020-10-23T03:34:42","Actor":"frank-dong-ms","Number":"5453","RawContent":null,"Title":"issue 5336","State":"closed","Body":"fix issue #5336 \r\n1. use byte array to create tensor instead of string\r\n2. use Unicode encode instead of UTF8\r\n\r\nThis issue is little bit complicated so please read through below:\r\n\r\nUser want to load a pb model in ML.NET, the input tensor looks like below which is a serialized Example object (a binary buffer, not a text string):\r\n`\r\n      inputs['inputs'] tensor_info:\r\n      dtype: DT_STRING\r\n      shape: (-1)\r\n      name: input_example_tensor:0\r\n`\r\n\r\nI find a workable solution is first convert Example object to protobuf encoded byte array using:\r\n`\r\nexample.ToByteArray()\r\n`\r\nthen convert byte array to string (char array) using some sort of reliable encoding (ideally Unicode or Base64 encoding):\r\n`\r\nEncoding.Unicode.GetString(example.ToByteArray())\r\n`\r\nThen ML.NET will convert the string back to byte array with same encoding and pass to tf.net:\r\n`\r\nEncoding.Unicode.GetBytes(((ReadOnlyMemory<char>)(object)data[i]).ToArray());\r\n`\r\n\r\nThe method ML.NET uses to create Tensor is [CastDataAndReturnAsTensor](https://github.com/dotnet/machinelearning/blob/release/1.5.2/src/Microsoft.ML.TensorFlow/TensorflowTransform.cs#L808), previously we are using [UTF8](https://github.com/dotnet/machinelearning/blob/release/1.5.2/src/Microsoft.ML.TensorFlow/TensorflowTransform.cs#L832-L838) to decode the string and convert to byte array, UTF8 is not reliable encoding as I described in this [comment](https://github.com/dotnet/machinelearning/issues/5336#issuecomment-714278364) so I would like to change the encoding to Unicode.\r\nAlso, recently Xiaoyun upgrade our TF version in this [PR](https://github.com/dotnet/machinelearning/pull/5404) and changed to use string[] instead of byte[][] to create Tensor, in this case we need to use byte[][] as the input string itself is converted from binary buffer(protobuf encoded). ","Url":"https://github.com/dotnet/machinelearning/pull/5453","RelatedDescription":"Closed or merged PR \"issue 5336\" (#5453)"},{"Id":"727336968","IsPullRequest":false,"CreatedAt":"2020-10-22T22:17:36","Actor":"WEMAPP","Number":"5450","RawContent":null,"Title":"how to use FastTextWikipedia300D","State":"closed","Body":"Hi if I wanted to use a pre-trained file, for example Wiki word vectors by fasttext is it possible? and how?","Url":"https://github.com/dotnet/machinelearning/issues/5450","RelatedDescription":"Closed issue \"how to use FastTextWikipedia300D\" (#5450)"},{"Id":"727538486","IsPullRequest":false,"CreatedAt":"2020-10-22T21:55:39","Actor":"galeese","Number":"5451","RawContent":null,"Title":"Parameter mapping betbeen python Booster model and ML.Trainers.LightGbm.GradientBooster object","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**: Win10\r\n- **.NET Version (eg., dotnet --info)**: 3.1.3\r\n\r\n### Issue\r\n\r\n- **What did you do?** I trained a model within python LGBM API via Byessian optimization\r\n- **What happened?** I've received from the optimization a model file with the defined parameters. I want to train this optimized model within the ML.NET environment. The obstacle is: a confusion, that I can't make confindent matching between  parameters presented on the page https://lightgbm.readthedocs.io/en/latest/Parameters.html  and the properties of  the  ML.Trainers.LightGbm.GradientBooster object:\r\n \r\n                    FeatureFraction  \r\n                    L1Regularization  \r\n                    L2Regularization  \r\n                    MaximumTreeDepth \r\n                    MinimumChildWeight \r\n                    MinimumSplitGain  \r\n                    SubsampleFraction   \r\n                    SubsampleFrequency \r\n \r\n- **What did you expect?** So below is presented my matching between python parameters and GradientBooster object, I want you to verify whether my matching is correct , and point out how is the \"SubsampleFraction \" named in python parameters.\r\n\r\n### Source code / logs\r\n\r\n            var options = new LightGbmBinaryTrainer.Options\r\n            {\r\n                Booster = new Microsoft.ML.Trainers.LightGbm.GradientBooster.Options   \r\n                {\r\n                    FeatureFraction = 0.855937, //   -- > feature_fraction \r\n                    L1Regularization = 0.973817, // ---> lambda_l1 \r\n                    L2Regularization = 2.27,    // ---> lambda_l2\r\n                    MaximumTreeDepth = 8, //   -- > max_depth \r\n                    MinimumChildWeight = 17.9015, //    -- > min_sum_hessian_in_leaf \r\n                    MinimumSplitGain = 0.076047,  //    -- >  min_gain_to_split\r\n                    SubsampleFraction =1,  // ???? can't determine the analoguos within https://lightgbm.readthedocs.io/en/latest/Parameters.html \r\n                    SubsampleFrequency = 10, //     -- > bagging_fraction\r\n                }\r\n            };\r\n\r\nThe criterion of the successful answer is: \r\nThe two models give the same classification probabilities  trained in python and with GradientBooster object. Wen you present me the correct matching of the parameters, i run the two models, and check the output difference. \r\nThank you!","Url":"https://github.com/dotnet/machinelearning/issues/5451","RelatedDescription":"Closed issue \"Parameter mapping betbeen python Booster model and ML.Trainers.LightGbm.GradientBooster object\" (#5451)"},{"Id":"727671075","IsPullRequest":false,"CreatedAt":"2020-10-22T19:40:58","Actor":"galeese","Number":"5452","RawContent":null,"Title":"BinaryClassification.Trainer  produces System.ArgumentOutOfRangeException: 'Not large enough to hold these values. Parameter Name: destinantion","State":"open","Body":"### System information\r\n\r\n- **OS version/distro**: win 10 \r\n- **.NET Version (eg., dotnet --info)**: 3.3\r\n\r\n### Issue\r\n\r\n- **What did you do?** i'm running my c# script , which takes the two(training and validation ) plain files containing  more than 10 000 features in each of files.\r\n- **What happened?**  the script string \"var model = pipeline.Fit( trainingData, validationData);\"   produced: System.ArgumentOutOfRangeException: 'Not large enough to hold these values. Parameter's name: destinantion\r\n- **What did you expect?** I expect  you to see the ecnlosed code \"mlnet.txt\" and the zipped source data which i use for training and validation.\r\n\r\n\r\n\r\n### Source code / logs\r\n\r\nPlease paste or attach the code or logs or traces that would be helpful to diagnose the issue you are reporting.\r\n[source_data.zip](https://github.com/dotnet/machinelearning/files/5425302/source_data.zip)\r\n\r\n[mlnet.txt](https://github.com/dotnet/machinelearning/files/5425306/mlnet.txt)\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5452","RelatedDescription":"Open issue \"BinaryClassification.Trainer  produces System.ArgumentOutOfRangeException: 'Not large enough to hold these values. Parameter Name: destinantion\" (#5452)"},{"Id":"726983837","IsPullRequest":false,"CreatedAt":"2020-10-22T02:07:04","Actor":"gharibkhani","Number":"5447","RawContent":null,"Title":"System.InvalidOperationException: 'LightGBM Error, code is -1 (LightGbm 3.0.0)","State":"open","Body":"- Tested on Windows 10 and Server 2019:\r\n- .NET 4.7: \r\n- Microsoft.ML (1.5.2) \r\n- Microsoft.ML.LightGbm (1.5.2)\r\n- LightGbm (3.0.0)\r\n\r\n**Issue**\r\nIt crashes in this line \r\n\r\n- var model = pipeline.Fit(trainData);\r\n\r\n- I get this error: System.InvalidOperationException: 'LightGBM Error, code is -1, error message is 'Unknown importance type: only support split=0 and gain=1'.'\r\n\r\nThis error can be reproduced by an example. I just used the example in docs.microsoft.com and able to reproduce it.\r\n\r\nhttps://docs.microsoft.com/en-us/dotnet/api/microsoft.ml.lightgbmextensions.lightgbm?view=ml-dotnet\r\n\r\nI created a console app and you can access it from the link below:\r\n\r\nhttps://drive.google.com/drive/folders/1-wc04CM75-IGoxjRAniDuhqI-zrHTWwM?usp=sharing\r\n\r\nI talked to the LightGBM team and they mentioned this issue exists in .Net code and not theirs. This is the third time this issue has been reported (#5431 and #5382) and each time it has been closed without any resolution.","Url":"https://github.com/dotnet/machinelearning/issues/5447","RelatedDescription":"Open issue \"System.InvalidOperationException: 'LightGBM Error, code is -1 (LightGbm 3.0.0)\" (#5447)"}],"ResultType":"GitHubIssue"}},"RunOn":"2020-11-05T05:30:34.2027751Z","RunDurationInMilliseconds":716}