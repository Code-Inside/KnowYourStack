{"Data":{"GitHub":{"Issues":[{"Id":"2574492091","IsPullRequest":true,"CreatedAt":"2024-10-09T00:53:39","Actor":"tarekgh","Number":"7264","RawContent":null,"Title":"Misc Changes","State":"open","Body":"The changes here include the following:\r\n\r\n- Support `o1` model labels in the Tiktoken tokenizer\r\n- Replace the usage of the Tuple in the `EncodedToken` with the `Range` and remove the `TorchSharp` `Range/Index` implementation\r\n- Rename the `SentencePieceBpeTokenizer` to allow adding more models to it in the future\r\n- Make the `Tokenizer.Decode` method return a non-nullable string\r\n- Add support for added tokens in the BPE tokenizer\r\n\r\nEvery commit in the PR is representing one of the listed changes. Reviewing every commit separately will make it easier to have a clear understanding of the changes.","Url":"https://github.com/dotnet/machinelearning/pull/7264","RelatedDescription":"Open PR \"Misc Changes\" (#7264)"},{"Id":"2560059313","IsPullRequest":true,"CreatedAt":"2024-10-07T21:33:42","Actor":"ericstj","Number":"7253","RawContent":null,"Title":"Update wording in LDA docs","State":"closed","Body":"Update the wording mentioning countries.  This is actually a quote, but it need not mention `countries`  - the actual source of this quote has since been updated.  \r\nhttps://en.wikipedia.org/w/index.php?title=Earth_Day&oldid=824511329 (which was pulled from an old version of earthday.org).\r\n\r\nI didn't bother updating the values in the comment - I'm not sure if they need to be accurate to get the point across.  @michaelgsharp if you think they should be updated please let me know and help me recompute them.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7253","RelatedDescription":"Closed or merged PR \"Update wording in LDA docs\" (#7253)"},{"Id":"2513948053","IsPullRequest":true,"CreatedAt":"2024-10-07T19:41:07","Actor":"WeihanLi","Number":"7236","RawContent":null,"Title":"docs: update nuget package badge","State":"closed","Body":"update nuget package badge\r\n\r\n- link to the absolute latest version for the preview package\r\n- add stable version","Url":"https://github.com/dotnet/machinelearning/pull/7236","RelatedDescription":"Closed or merged PR \"docs: update nuget package badge\" (#7236)"},{"Id":"2513903268","IsPullRequest":true,"CreatedAt":"2024-10-07T19:40:50","Actor":"dotnet-maestro[bot]","Number":"7235","RawContent":null,"Title":"[main] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c692823c-b896-437f-4f57-08dc434cc8f6)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: c692823c-b896-437f-4f57-08dc434cc8f6\r\n- **Build**: 20241004.4\r\n- **Date Produced**: October 4, 2024 10:13:12 PM UTC\r\n- **Commit**: f209a925b15bc66ecb9a8825bd9595937bbe3aa1\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 10.0.0-beta.24476.2 to 10.0.0-beta.24504.4][4]\r\n  - **Microsoft.DotNet.Build.Tasks.Feed**: [from 10.0.0-beta.24476.2 to 10.0.0-beta.24504.4][4]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 10.0.0-beta.24476.2 to 10.0.0-beta.24504.4][4]\r\n  - **Microsoft.DotNet.SignTool**: [from 10.0.0-beta.24476.2 to 10.0.0-beta.24504.4][4]\r\n  - **Microsoft.DotNet.SwaggerGenerator.MSBuild**: [from 10.0.0-beta.24476.2 to 10.0.0-beta.24504.4][4]\r\n  - **Microsoft.DotNet.XliffTasks**: [from 10.0.0-beta.24476.2 to 10.0.0-beta.24504.4][4]\r\n  - **Microsoft.DotNet.XUnitExtensions**: [from 10.0.0-beta.24476.2 to 10.0.0-beta.24504.4][4]\r\n\r\n[4]: https://github.com/dotnet/arcade/compare/7e8b8f4f32...f209a925b1\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c692823c-b896-437f-4f57-08dc434cc8f6)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7235","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/arcade\" (#7235)"},{"Id":"2564792599","IsPullRequest":true,"CreatedAt":"2024-10-07T19:39:15","Actor":"stephentoub","Number":"7255","RawContent":null,"Title":"Update tiktoken regexes","State":"closed","Body":"This updates two of the regexes to match the changes made in https://github.com/openai/tiktoken/commit/9f7f69d62d6052dcc2fd54357df6ae9ae2590518.\r\n\r\nOn .NET Core, these changes are mostly nops, as the main thing they're doing is changing some loops to be atomic, and the auto-atomicity logic in the regex optimizer was already noticing that could be done and doing it automatically. On .NET Framework, it's a bigger deal, as those loops will now be atomic where they weren't previously.\r\n\r\nIf nothing else, it keeps the regexes in sync with the reference implementation.","Url":"https://github.com/dotnet/machinelearning/pull/7255","RelatedDescription":"Closed or merged PR \"Update tiktoken regexes\" (#7255)"},{"Id":"2571146644","IsPullRequest":false,"CreatedAt":"2024-10-07T18:22:55","Actor":"luisquintanilla","Number":"7263","RawContent":null,"Title":"Enable custom token counting","State":"open","Body":"Currently, Tokenizer returns counts strictly based on tokens.\r\n\r\nHowever, there are scenarios where library authors may want / need to implement their own custom token counting function. \r\n\r\nOne such scenario is providing token counts for image inputs. In such cases, AI service providers provide an arbitrary way of calculating cost based on a fixed token count. \r\n\r\n| Provider | Cost calculations | Does tokenization |  Link |\r\n| --- | --- | --- | --- |\r\n| OpenAI | Fixed | No | https://platform.openai.com/docs/guides/vision/calculating-costs | \r\n| Claude | Fixed | No | https://docs.anthropic.com/en/docs/build-with-claude/vision#calculate-image-costs |\r\n| Gemini | Fixed | No | https://ai.google.dev/gemini-api/docs/tokens?lang=python#multimodal-tokens | \r\n| Cohere | N/A | N/A | https://docs.cohere.com/docs/tokens | \r\n| Mistral | N/A | N/A | https://docs.mistral.ai/guides/tokenization/#tokens-count | \r\n","Url":"https://github.com/dotnet/machinelearning/issues/7263","RelatedDescription":"Open issue \"Enable custom token counting\" (#7263)"},{"Id":"2568882983","IsPullRequest":true,"CreatedAt":"2024-10-06T20:34:06","Actor":"vthemelis","Number":"7262","RawContent":null,"Title":"Add support for Arrow Timestamp and Date32 in DataFrame","State":"open","Body":"Fixes: https://github.com/dotnet/machinelearning/issues/7260 \r\nFixes: https://github.com/dotnet/machinelearning/issues/7261\r\n\r\nTimestamp contains UTC information so it makes sense to capture it in `DateTimeOffset` rather than `DateTime`.\r\n\r\nAlso, capture `Date32` as a `DateOnly` if we're in .NET 6 (`DateOnly` is missing from .NET standard at this point).\r\n\r\n\r\n\r\n--------------------------------------------------\r\nWe are excited to review your PR.\r\n\r\nSo we can do the best job, please check:\r\n\r\n- [x] There's a descriptive title that will make sense to other developers some time from now. \r\n- [x] There's associated issues. All PR's should have issue(s) associated - unless a trivial self-evident change such as fixing a typo. You can use the format `Fixes #nnnn` in your description to cause GitHub to automatically close the issue(s) when your PR is merged.\r\n- [x] Your change description explains what the change does, why you chose your approach, and anything else that reviewers should know.\r\n- [x] You have included any necessary tests in the same PR.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7262","RelatedDescription":"Open PR \"Add support for Arrow Timestamp and Date32 in DataFrame\" (#7262)"},{"Id":"2568882915","IsPullRequest":false,"CreatedAt":"2024-10-06T20:33:57","Actor":"vthemelis","Number":"7261","RawContent":null,"Title":"Decode Date32 arrow type in DataFrame","State":"open","Body":"**Is your feature request related to a problem? Please describe.**\r\nAt the moment, it looks like it's not possible to read `RecordBatch`es of `Date32`s:\r\n\r\n```csharp\r\nusing Apache.Arrow;\r\nusing Microsoft.Data.Analysis;\r\n\r\nvar batch = new RecordBatch.Builder()\r\n    .Append(\"DateColumn\", false, new Date32Array.Builder().AppendRange(Enumerable.Repeat(DateTime.Now, 10)).Build())\r\n    .Build();\r\n\r\nDataFrame.FromArrowRecordBatch(batch);\r\n```\r\n\r\ngives:\r\n```\r\nUnhandled exception. System.NotImplementedException: date32\r\n   at Microsoft.Data.Analysis.DataFrame.AppendDataFrameColumnFromArrowArray(Field field, IArrowArray arrowArray, DataFrame ret, String fieldNamePrefix)\r\n   at Microsoft.Data.Analysis.DataFrame.FromArrowRecordBatch(RecordBatch recordBatch)\r\n   at Program.<Main>$(String[] args)\r\n```","Url":"https://github.com/dotnet/machinelearning/issues/7261","RelatedDescription":"Open issue \"Decode Date32 arrow type in DataFrame\" (#7261)"},{"Id":"2568861973","IsPullRequest":false,"CreatedAt":"2024-10-06T19:51:50","Actor":"vthemelis","Number":"7260","RawContent":null,"Title":"Decode and roundtrip Timestamp fields from Arrow into DataFrame.","State":"open","Body":"**Is your feature request related to a problem? Please describe.**\r\nAt the moment, it looks like it's not possible to read `RecordBatch`es of `Timestamp`s:\r\n\r\n```csharp\r\nusing Apache.Arrow;\r\nusing Microsoft.Data.Analysis;\r\n\r\nvar batch = new RecordBatch.Builder()\r\n    .Append(\"TimestampColumn\", false, new TimestampArray.Builder().AppendRange(Enumerable.Repeat(DateTimeOffset.Now, 10)).Build())\r\n    .Build();\r\n\r\nDataFrame.FromArrowRecordBatch(batch);\r\n```\r\n\r\ngives:\r\n```\r\nUnhandled exception. System.NotImplementedException: timestamp\r\n   at Microsoft.Data.Analysis.DataFrame.AppendDataFrameColumnFromArrowArray(Field field, IArrowArray arrowArray, DataFrame ret, String fieldNamePrefix)\r\n   at Microsoft.Data.Analysis.DataFrame.FromArrowRecordBatch(RecordBatch recordBatch)\r\n   at Program.<Main>$(String[] args)\r\n```\r\n\r\n**Describe the solution you'd like**\r\nThe above should pass and read the `RecordBatch` into a `DateTimeOffset` type.\r\n\r\nTried with:\r\n```bash\r\ndotnet add package Microsoft.Data.Analysis --version 0.21.1\r\n```\r\n\r\n\r\n-----------------------------------------------------\r\nWith the current pre-release version\r\n```bash\r\ndotnet add package Microsoft.Data.Analysis --version 0.22.0-preview.24378.1\r\n```\r\n\r\nthe above passes but doesn't roundtrip:\r\n```csharp\r\nusing Apache.Arrow;\r\nusing Microsoft.Data.Analysis;\r\n\r\nvar batch = new RecordBatch.Builder()\r\n    .Append(\"TimestampColumn\", false, new TimestampArray.Builder().AppendRange(Enumerable.Repeat(DateTimeOffset.Now, 10)).Build())\r\n    .Build();\r\n\r\nvar df = DataFrame.FromArrowRecordBatch(batch);\r\n\r\nvar newBatch = df.ToArrowRecordBatches();\r\n\r\nConsole.WriteLine($\"Original datatype: {batch.Schema.GetFieldByIndex(0).DataType}\");\r\nConsole.WriteLine($\"Final datatype: {newBatch.First().Schema.GetFieldByIndex(0).DataType}\");\r\n```\r\n\r\n```\r\n> dotnet run\r\nOriginal datatype: Apache.Arrow.Types.TimestampType\r\nFinal datatype: Apache.Arrow.Types.Date64Type\r\n```\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7260","RelatedDescription":"Open issue \"Decode and roundtrip Timestamp fields from Arrow into DataFrame.\" (#7260)"},{"Id":"2568746330","IsPullRequest":false,"CreatedAt":"2024-10-06T16:33:38","Actor":"superichmann","Number":"7259","RawContent":null,"Title":"sending no seed to mlcontext does not actually randomize stuff","State":"open","Body":"**System Information (please complete the following information):**\r\n - OS & Version: windows 10\r\n - ML.NET Version: 4.0.0-preview.24271.1\r\n - .NET Version: 8.0.8\r\n\r\n**Describe the bug**\r\ninitializing mlcontext without any seed (`new MLContext()`) and training on the same data does not actually results in different models created by `Regression.Trainers.FastForest()` or `Regression.Trainers.LightGbm()`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. initialize mlcontext without a seed.\r\n2. create a model on data with FastForest.\r\n3. initialize a different mlcontext without a seed.\r\n4. create a model on the same exact data with FastForest.\r\n5. Compare the predictions of both models (in my case, I compared 23645 predictions)\r\n\r\nrepeat the process with lgbm.\r\n\r\n**Expected behavior**\r\nAs I see it, first FastForest predictions should be different then the second FastForest predictions. same in lightgbm.\r\n\r\nEven the slightest change in randomness for the bootstrapped dataset selection should end up in different results.\r\n\r\nIt seems like the FastForest or LightGbm under ml.net are not so random.. :{\r\n\r\n**Further Research** **PLZ READ ME TOO**\r\nI played with LightGbm on python and I was able to introduce randomness into it with feat these params:\t\t`'feature_fraction': 0.2,'seed': rand_num`. removing one of them removes also the randomness in the results, see code:\r\n```\r\nimport lightgbm as lgb\r\nimport pandas as pd\r\nimport numpy as np\r\nnp.random.seed(42)\r\nnum_train_samples = 1000\r\nnum_test_samples = 10\r\nnum_features = 10\r\nX = np.random.rand(num_train_samples + num_test_samples, num_features)\r\ny = np.random.uniform(0, 2, num_train_samples + num_test_samples)\r\ny = y + np.random.normal(0, 0.2, num_train_samples + num_test_samples)\r\nX_train, X_test = X[:num_train_samples], X[num_train_samples:]\r\ny_train, y_test = y[:num_train_samples], y[num_train_samples:]\r\nparams1 = {\r\n    'objective': 'regression',\r\n    'verbose': -1,\r\n    'feature_fraction': 0.2,\r\n    'seed': 42\r\n}\r\nparams2 = {\r\n    'objective': 'regression',\r\n    'verbose': -1,\r\n    'feature_fraction': 0.2,\r\n    'seed': 43\r\n}\r\nmodel1 = lgb.train(params1, lgb.Dataset(X_train, y_train), num_boost_round=1000)  # Increase boosting rounds\r\nmodel2 = lgb.train(params2, lgb.Dataset(X_train, y_train), num_boost_round=1000)\r\ny_pred1 = model1.predict(X_test)\r\ny_pred2 = model2.predict(X_test)\r\nresults = pd.DataFrame({'true_value': y_test, 'model1_pred': y_pred1, 'model2_pred': y_pred2})\r\nprint(results)\r\n\r\n```\r\n**WorkArounds**\r\nA workaround for lightgbm would be to add `FeatureFraction` into the params.\r\nsending `Seed` as a part of `FastForestRegressionTrainer.Options` is a workaround for FastForest.","Url":"https://github.com/dotnet/machinelearning/issues/7259","RelatedDescription":"Open issue \"sending no seed to mlcontext does not actually randomize stuff\" (#7259)"},{"Id":"2568599425","IsPullRequest":false,"CreatedAt":"2024-10-06T11:01:48","Actor":"superichmann","Number":"7258","RawContent":null,"Title":"expose LearningRate","State":"open","Body":"**Is your feature request related to a problem? Please describe.**\r\nno\r\n\r\n**Describe the solution you'd like**\r\nexpose LearningRate on TreeOptions and FastForestRegressionTrainer.Options\r\n\r\n**Describe alternatives you've considered**\r\nmove to python\r\n\r\n**Additional context**\r\nmaybe expose all params of lgbm and ff plz?\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7258","RelatedDescription":"Open issue \"expose LearningRate\" (#7258)"},{"Id":"2551465408","IsPullRequest":true,"CreatedAt":"2024-10-06T07:16:37","Actor":"LittleLittleCloud","Number":"7245","RawContent":null,"Title":"[GenAI] Support Llama 3.2 1B and 3B model","State":"closed","Body":"We are excited to review your PR.\r\n\r\nSo we can do the best job, please check:\r\n\r\n- [x] There's a descriptive title that will make sense to other developers some time from now. \r\n- [x] There's associated issues. All PR's should have issue(s) associated - unless a trivial self-evident change such as fixing a typo. You can use the format `Fixes #nnnn` in your description to cause GitHub to automatically close the issue(s) when your PR is merged.\r\n- [x] Your change description explains what the change does, why you chose your approach, and anything else that reviewers should know.\r\n- [x] You have included any necessary tests in the same PR.\r\n\r\n#7169 ","Url":"https://github.com/dotnet/machinelearning/pull/7245","RelatedDescription":"Closed or merged PR \"[GenAI] Support Llama 3.2 1B and 3B model\" (#7245)"},{"Id":"2568178701","IsPullRequest":false,"CreatedAt":"2024-10-05T15:18:29","Actor":"mehdihadeli","Number":"7257","RawContent":null,"Title":"How To use Phi-3.5-mini tokenizer","State":"open","Body":"Hi,\r\nHow can I create a tokenizer based on [microsoft/Phi-3.5-mini-instruct](https://huggingface.co/microsoft/Phi-3.5-mini-instruct) model?\r\nShould I load [tokenzier.model](https://huggingface.co/microsoft/Phi-3.5-mini-instruct/blob/main/tokenizer.model)?\r\n\r\nI saw similar approach for llama in the [documentation](https://learn.microsoft.com/en-us/dotnet/machine-learning/whats-new/overview#additional-tokenizer-support):\r\n\r\n``` csharp\r\n// Create the Tokenizer.\r\nstring modelUrl = @\"https://huggingface.co/hf-internal-testing/llama-llamaTokenizer/resolve/main/llamaTokenizer.model\";\r\nusing Stream remoteStream = File.OpenRead(modelUrl);\r\nTokenizer llamaTokenizer = Tokenizer.CreateLlama(remoteStream);\r\n\r\n```","Url":"https://github.com/dotnet/machinelearning/issues/7257","RelatedDescription":"Open issue \"How To use Phi-3.5-mini tokenizer\" (#7257)"},{"Id":"2565205062","IsPullRequest":false,"CreatedAt":"2024-10-04T22:05:20","Actor":"ericstj","Number":"7256","RawContent":null,"Title":"Microsoft.ML.Tokenizers.Tests.TiktokenTests.TestTokenizerUsingExternalVocab failing to download gpt2.tiktoken","State":"closed","Body":"### Build\n\nhttps://dev.azure.com/dnceng-public/public/_build/results?buildId=823668\n\n### Build leg reported\n\nMicrosoft.ML.Tokenizers.Tests.TiktokenTests.TestTokenizerUsingExternalVocab\n\n### Pull Request\n\nhttps://github.com/dotnet/machinelearning/pull/7252\n\n### Known issue core information\n\nFill out the known issue JSON section by following the [step by step documentation on how to create a known issue](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssueJsonStepByStep.md#how-to-create-a-known-issue-step-by-step)\r\n\r\n```json\r\n {\r\n    \"ErrorMessage\" : [\"Microsoft.ML.Tokenizers.Tests.TiktokenTests.TestTokenizerUsingExternalVocab\", \"File not found\"],\r\n    \"BuildRetry\": false,\r\n    \"ErrorPattern\": \"\",\r\n    \"ExcludeConsoleLog\": false\r\n }\r\n ```\r\n\r\n @dotnet/dnceng\r\n\r\n<!-- DO NOT DELETE -->\r\n<!-- For internal use only; put release notes here. -->\r\n<!-- For guidance on writing good release notes, please see documentation here: https://dev.azure.com/dnceng/internal/_wiki/wikis/DNCEng%20Services%20Wiki/983/ReleaseNotesGuidance -->\r\n<!-- Additionally, please specify the note category below. -->\r\n### Release Note Category\r\n- [ ] Feature changes/additions \r\n- [ ] Bug fixes\r\n- [x] Internal Infrastructure Improvements\r\n### Release Note Description\r\n\n\n### Additional information about the issue reported\n\nIt looks to me like this file no longer exists:\r\nhttps://github.com/dotnet/machinelearning/blob/be1e428d41b5936903172855f7f30861ca7eb49a/test/Microsoft.ML.Tokenizers.Tests/TitokenTests.cs#L100C136-L100C149\r\n<!-- Known issue validation start -->\r\n ### Known issue validation\r\n**Build: :mag_right:** https://dev.azure.com/dnceng-public/public/_build/results?buildId=823668\r\n**Error message validated:** `[Microsoft.ML.Tokenizers.Tests.TiktokenTests.TestTokenizerUsingExternalVocab File not found`]\r\n**Result validation:** :white_check_mark: Known issue matched with the provided build.\r\n**Validation performed at:** 10/4/2024 12:37:23 AM UTC\r\n<!-- Known issue validation end -->\r\n<!--Known issue error report start -->\r\n\r\n### Report\r\n\r\n|Build|Definition|Test|Pull Request|\r\n|---|---|---|---|\r\n|[823668](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823668)|dotnet/machinelearning|[Microsoft.ML.Tokenizers.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823668&view=ms.vss-test-web.build-test-results-tab&runId=21398774&resultId=101001)|dotnet/machinelearning#7252|\r\n#### Summary\r\n|24-Hour Hit Count|7-Day Hit Count|1-Month Count|\r\n|---|---|---|\r\n|0|1|1|\r\n<!--Known issue error report end -->","Url":"https://github.com/dotnet/machinelearning/issues/7256","RelatedDescription":"Closed issue \"Microsoft.ML.Tokenizers.Tests.TiktokenTests.TestTokenizerUsingExternalVocab failing to download gpt2.tiktoken\" (#7256)"},{"Id":"2553873915","IsPullRequest":true,"CreatedAt":"2024-10-04T21:47:38","Actor":"tarekgh","Number":"7248","RawContent":null,"Title":"Move the Tokenizer's data into separate packages.","State":"closed","Body":"","Url":"https://github.com/dotnet/machinelearning/pull/7248","RelatedDescription":"Closed or merged PR \"Move the Tokenizer's data into separate packages.\" (#7248)"},{"Id":"2562584478","IsPullRequest":true,"CreatedAt":"2024-10-02T20:27:34","Actor":"michaelgsharp","Number":"7254","RawContent":null,"Title":"Load onnx model from Stream of bytes","State":"open","Body":"Fixes #6591 by adding an overload API to allow the ONNX model to be passed in as a Stream of bytes.","Url":"https://github.com/dotnet/machinelearning/pull/7254","RelatedDescription":"Open PR \"Load onnx model from Stream of bytes\" (#7254)"},{"Id":"2553592883","IsPullRequest":true,"CreatedAt":"2024-10-01T17:38:15","Actor":"ericstj","Number":"7247","RawContent":null,"Title":"Enable SDL tools","State":"closed","Body":"I'll schedule an internal build to validate this.\r\n\r\nInternal build https://dev.azure.com/dnceng/internal/_build/results?buildId=2548168&view=results","Url":"https://github.com/dotnet/machinelearning/pull/7247","RelatedDescription":"Closed or merged PR \"Enable SDL tools\" (#7247)"},{"Id":"2559710818","IsPullRequest":true,"CreatedAt":"2024-10-01T17:37:34","Actor":"ericstj","Number":"7252","RawContent":null,"Title":"Add Service Tree ID for .NET Libraries","State":"closed","Body":"This uses the .NET Libraries Service Tree ID - https://microsoftservicetree.com/services/7a9b52f6-7805-416c-9390-343168c0cdb3, @artl93 - can you double check?\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7252","RelatedDescription":"Closed or merged PR \"Add Service Tree ID for .NET Libraries\" (#7252)"},{"Id":"2557281416","IsPullRequest":false,"CreatedAt":"2024-09-30T17:35:55","Actor":"tarekgh","Number":"7251","RawContent":null,"Title":"Microsoft.ML.TorchSharp.Tests.QATests.TestSimpleQA timeout failure","State":"open","Body":"## Build Information\r\nBuild: https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=821016\r\nBuild error leg or test failing: Ubuntu_x64_Net60 / Ubuntu_x64_Net60 Debug_Build / Run Helix Tests\r\nPull request: https://github.com/dotnet/machinelearning/pull/7248\r\n<!-- Error message template  -->\r\n## Error Message\r\n\r\nFill the error message using [step by step known issues guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssueJsonStepByStep.md).\r\n\r\n<!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern for regex matches (single line/no backtracking). Set BuildRetry to `true` to retry builds with this error. Set ExcludeConsoleLog to `true` to skip helix logs analysis. -->\r\n\r\n```json\r\n{\r\n  \"ErrorMessage\": [\"Starting test: Microsoft.ML.TorchSharp.Tests.QATests.TestSimpleQA\", \"Killed\"],\r\n  \"ErrorPattern\": \"\",\r\n  \"BuildRetry\": false,\r\n  \"ExcludeConsoleLog\": false\r\n}\r\n```\r\n\r\n\r\n<!-- Known issue validation start -->\r\n ### Known issue validation\r\n**Build: :mag_right:** https://dev.azure.com/dnceng-public/public/_build/results?buildId=821016\r\n**Error message validated:** `[Starting test: Microsoft.ML.TorchSharp.Tests.QATests.TestSimpleQA Killed`]\r\n**Result validation:** :white_check_mark: Known issue matched with the provided build.\r\n**Validation performed at:** 9/30/2024 7:52:41 PM UTC\r\n<!-- Known issue validation end -->\r\n<!--Known issue error report start -->\r\n\r\n### Report\r\n\r\n|Build|Definition|Test|Pull Request|\r\n|---|---|---|---|\r\n|[830027](https://dev.azure.com/dnceng-public/public/_build/results?buildId=830027)|dotnet/machinelearning|[Microsoft.ML.TorchSharp.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=830027&view=ms.vss-test-web.build-test-results-tab&runId=21590324&resultId=102047)||\r\n|[825226](https://dev.azure.com/dnceng-public/public/_build/results?buildId=825226)|dotnet/machinelearning|[Microsoft.ML.TorchSharp.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=825226&view=ms.vss-test-web.build-test-results-tab&runId=21584976&resultId=102048)|dotnet/machinelearning#7254|\r\n|[823827](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823827)|dotnet/machinelearning|[Microsoft.ML.TorchSharp.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823827&view=ms.vss-test-web.build-test-results-tab&runId=21400698&resultId=102047)|dotnet/machinelearning#7248|\r\n|[823750](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823750)|dotnet/machinelearning|[Microsoft.ML.TorchSharp.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823750&view=ms.vss-test-web.build-test-results-tab&runId=21399800&resultId=102044)||\r\n|[823744](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823744)|dotnet/machinelearning|[Microsoft.ML.TorchSharp.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=823744&view=ms.vss-test-web.build-test-results-tab&runId=21399794&resultId=102044)||\r\n|[822902](https://dev.azure.com/dnceng-public/public/_build/results?buildId=822902)|dotnet/machinelearning|[Microsoft.ML.TorchSharp.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=822902&view=ms.vss-test-web.build-test-results-tab&runId=21373774&resultId=102047)|dotnet/machinelearning#7248|\r\n|[821016](https://dev.azure.com/dnceng-public/public/_build/results?buildId=821016)|dotnet/machinelearning|[Microsoft.ML.TorchSharp.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=821016&view=ms.vss-test-web.build-test-results-tab&runId=21310680&resultId=102047)|dotnet/machinelearning#7248|\r\n#### Summary\r\n|24-Hour Hit Count|7-Day Hit Count|1-Month Count|\r\n|---|---|---|\r\n|0|2|7|\r\n<!--Known issue error report end -->","Url":"https://github.com/dotnet/machinelearning/issues/7251","RelatedDescription":"Open issue \"Microsoft.ML.TorchSharp.Tests.QATests.TestSimpleQA timeout failure\" (#7251)"},{"Id":"2557133640","IsPullRequest":false,"CreatedAt":"2024-09-30T17:00:36","Actor":"tarekgh","Number":"7250","RawContent":null,"Title":"Microsoft.ML.TorchSharp.Tests takes long time to execute on Ubuntu and fail the CI run","State":"closed","Body":"## Build Information\r\nBuild: https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=821016\r\nBuild error leg or test failing: Ubuntu_x64_Net60 / Ubuntu_x64_Net60 Debug_Build / Run Helix Tests\r\nPull request: https://github.com/dotnet/machinelearning/pull/7248\r\n<!-- Error message template  -->\r\n## Error Message\r\n\r\nFill the error message using [step by step known issues guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssueJsonStepByStep.md).\r\n\r\n<!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern for regex matches (single line/no backtracking). Set BuildRetry to `true` to retry builds with this error. Set ExcludeConsoleLog to `true` to skip helix logs analysis. -->\r\n\r\n```json\r\n{\r\n  \"ErrorMessage\": \"Starting test: Microsoft.ML.TorchSharp.Tests.QATests.TestSimpleQA\",\r\n  \"BuildRetry\": false,\r\n  \"ExcludeConsoleLog\": false\r\n}\r\n```\r\n\r\n\r\n<!-- Known issue validation start -->\r\n ### Known issue validation\r\n**Build: :mag_right:** \r\n**Result validation:** :warning: Validation could not be done without an Azure DevOps build URL on the issue. Please add it to the \"**Build:** :mag_right:\" line.\r\n**Validation performed at:** 9/30/2024 4:58:22 PM UTC\r\n<!-- Known issue validation end -->\r\n<!--Known issue error report start -->\r\n\r\n### Report\r\n#### Summary\r\n|24-Hour Hit Count|7-Day Hit Count|1-Month Count|\r\n|---|---|---|\r\n|0|0|0|\r\n<!--Known issue error report end -->","Url":"https://github.com/dotnet/machinelearning/issues/7250","RelatedDescription":"Closed issue \"Microsoft.ML.TorchSharp.Tests takes long time to execute on Ubuntu and fail the CI run\" (#7250)"},{"Id":"2553951619","IsPullRequest":false,"CreatedAt":"2024-09-28T02:02:59","Actor":"YoungYuFlex","Number":"7249","RawContent":null,"Title":"Error inferring columns with AutoML in Blazor WASM","State":"open","Body":"I am trying to use AutoML in Blazor WASM and I am receiving this error message no matter what data source file I am using: \r\n`Unable to split the file provided into multiple, consistent columns. Readable formats include delimited files such as CSV/TSV. Check for a consistent number of columns and proper escaping and quoting.`\r\n\r\nI tried different csv/tsv files and same error everytime. I also tried basically same code and same data file running in a console application and it worked fine.\r\nAnd I also tried downloading the file after uploading it, and examined it in vscode, nothing seemed to be wrong, no issue for linebreaking...\r\n\r\nThis is my code and the error is popping when trying to infercolumns...\r\n```\r\npublic async Task LoadFiles(InputFileChangeEventArgs e)\r\n{\r\n    var file = e.File;\r\n    var fileName = file.Name;\r\n    \r\n    // Saving file\r\n    await using FileStream fs = new(fileName, FileMode.Create);\r\n    await file.OpenReadStream(1024*1024*1024).CopyToAsync(fs);\r\n    \r\n    // Initialize MLContext\r\n    MLContext ctx = new MLContext();\r\n\r\n    // Define data path\r\n    var dataPath = Path.GetFullPath(fileName);\r\n\r\n    // Infer column information\r\n    ColumnInferenceResults columnInference = ctx.Auto().InferColumns(\r\n        dataPath,\r\n        labelColumnIndex: 0,\r\n        hasHeader: true,\r\n        // separatorChar: ',',\r\n        groupColumns: false,\r\n        allowQuoting: true,\r\n        trimWhitespace: true\r\n    );\r\n}\r\n```\r\n\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7249","RelatedDescription":"Open issue \"Error inferring columns with AutoML in Blazor WASM\" (#7249)"},{"Id":"2553275147","IsPullRequest":true,"CreatedAt":"2024-09-27T20:10:31","Actor":"LittleLittleCloud","Number":"7246","RawContent":null,"Title":"[GenAI] pack GenAI core package","State":"closed","Body":"We are excited to review your PR.\r\n\r\nSo we can do the best job, please check:\r\n\r\n- [x] There's a descriptive title that will make sense to other developers some time from now. \r\n- [x] There's associated issues. All PR's should have issue(s) associated - unless a trivial self-evident change such as fixing a typo. You can use the format `Fixes #nnnn` in your description to cause GitHub to automatically close the issue(s) when your PR is merged.\r\n- [x] Your change description explains what the change does, why you chose your approach, and anything else that reviewers should know.\r\n- [x] You have included any necessary tests in the same PR.\r\n\r\n#7169 \r\n","Url":"https://github.com/dotnet/machinelearning/pull/7246","RelatedDescription":"Closed or merged PR \"[GenAI] pack GenAI core package\" (#7246)"},{"Id":"2551002648","IsPullRequest":false,"CreatedAt":"2024-09-26T16:03:45","Actor":"rposener","Number":"7244","RawContent":null,"Title":"Timeseries SrCNN blocking use on ARM64","State":"open","Body":"**Is your feature request related to a problem? Please describe.**\r\nI am developing on a new Surface device (ARM64 chipset) and I'm currently blocked by the lack of support of SrCnn support to use this for anomaly detection in data.\r\n\r\n**Describe the solution you'd like**\r\nI'd love to see this included and added for ARM64 support in version 4.\r\n\r\n**Describe alternatives you've considered**\r\nIf there is a major impediment here, I'd love your recommendations.  I am looking at other statistical analysis as a work-around for my specific use-case.\r\n\r\n**Additional context**\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7244","RelatedDescription":"Open issue \"Timeseries SrCNN blocking use on ARM64\" (#7244)"},{"Id":"2544095428","IsPullRequest":false,"CreatedAt":"2024-09-24T01:56:31","Actor":"chuongmep","Number":"7243","RawContent":null,"Title":"How to Group By with multiple columns? ","State":"open","Body":"**Is your feature request related to a problem? Please describe.**\r\nI want can use `GroupBy `with list input column for dataframe\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\nIt could be good like this and allow return with new dataframe \r\n```\r\nvar groupBy = df.GroupBy(new string[] { \"Area\", \"Level\" });\r\n```\r\nOr  : \r\n```\r\ndf.GroupBy(\"Level\", \"Building Name\").Select(\"Source File\", \"Area\", \"Level\", \"Building Name\");\r\n```\r\nThis is python : \r\n```\r\ndf_report_grouped = df_report.groupby(['Building Name', 'Level'])['Area'].sum().reset_index()\r\n```\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7243","RelatedDescription":"Open issue \"How to Group By with multiple columns? \" (#7243)"},{"Id":"2538660347","IsPullRequest":true,"CreatedAt":"2024-09-20T12:15:12","Actor":"asmirnov82","Number":"7242","RawContent":null,"Title":"Fix dataframe incorrectly parse CSV when renameDuplicatedColumns is true","State":"open","Body":"Fixes #7240\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7242","RelatedDescription":"Open PR \"Fix dataframe incorrectly parse CSV when renameDuplicatedColumns is true\" (#7242)"},{"Id":"2537154328","IsPullRequest":false,"CreatedAt":"2024-09-19T19:01:31","Actor":"luisquintanilla","Number":"7241","RawContent":null,"Title":"Update Microsoft.ML.Tokenizers - o1 models","State":"open","Body":"Add o1 as a tokenizer option in Microsoft.ML.Tokenizers","Url":"https://github.com/dotnet/machinelearning/issues/7241","RelatedDescription":"Open issue \"Update Microsoft.ML.Tokenizers - o1 models\" (#7241)"},{"Id":"2535896486","IsPullRequest":false,"CreatedAt":"2024-09-19T10:12:19","Actor":"tudor-turcu","Number":"7240","RawContent":null,"Title":"DataFrame when parsing a CSV incorrectly detects a column type when renameDuplicatedColumns is true ","State":"open","Body":"**System Information (please complete the following information):**\r\n - OS & Version: Windows 11, Linux \r\n - ML.NET Version: 3.0.1 (Microsoft.Data.Analysis 0.21.1)\r\n - .NET Version: .NET 8.0\r\n\r\n**Describe the bug**\r\nDataFrame.LoadCsv() or LoadCsvFromString() incorrectly detects a column type when renameDuplicatedColumns = true and dataTypes = null or empty.\r\n\r\n**To Reproduce**\r\nCall DataFrame.LoadCsv() or LoadCsvFromString() with renameDuplicatedColumns = true and dataTypes = null or empty,\r\nwith CultureInfo.CurrentCulture = CultureInfo.InvariantCulture; // or en-US\r\nIf a column in the CSV contains on a row a valid date value, \r\nand in a subsequent row appear two or more empty string values, one of which appears in a previous column,\r\nthe column containing a date is not considered as having a date type, but a single/float type.\r\nParsing the date values on that column will fail with an exception.\r\nProbably the same issue appears for boolean columns or other types.\r\nSample CSV:\r\n```\r\n\"Col1\",\"Col2\",\"Col3\",\"Col4\"\r\n\"v1.1\",\"5/7/2017\",\"v3.1\",\"v4.1\"\r\n\"\",\"\",\"v3.2\",\"v4.2\"\r\n```\r\n\r\n**Expected behavior**\r\nThe column type should considered to be Date type, even if it contains a few empty string values.\r\n\r\n**Screenshots, Code, Sample Projects**\r\n\r\n```csharp\r\nusing Microsoft.Data.Analysis;\r\nusing System.Globalization;\r\n\r\nnamespace DataFrameColumnTypeDetectionBug\r\n{\r\n    internal class Program\r\n    {\r\n        static void Main(string[] args)\r\n        {\r\n            CultureInfo.CurrentCulture = CultureInfo.InvariantCulture; // or en-US\r\n\r\n            string csv =\r\n@\"\"\"Col1\"\",\"\"Col2\"\",\"\"Col3\"\",\"\"Col4\"\"\r\n\"\"v1.1\"\",\"\"5/7/2017\"\",\"\"v3.1\"\",\"\"v4.1\"\"\r\n\"\"\"\",\"\"\"\",\"\"v3.2\"\",\"\"v4.2\"\"\r\n\";\r\n\r\n            var dataFrame = DataFrame.LoadCsvFromString(csv, separator: ',', header: true, \r\n                dataTypes: null, // guess the column types\r\n                renameDuplicatedColumns: true, // try to rename the duplicated columns, if any\r\n                cultureInfo: CultureInfo.InvariantCulture);\r\n\r\n            // when renameDuplicatedColumns: true will crash with:\r\n            // System.FormatException: The input string '5/7/2017' was not in a correct format.\r\n            // at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)\r\n            //at System.String.System.IConvertible.ToSingle(IFormatProvider provider)\r\n            //at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)\r\n            //at Microsoft.Data.Analysis.DataFrame.Append(IEnumerable`1 row, Boolean inPlace, CultureInfo cultureInfo)\r\n            //at Microsoft.Data.Analysis.DataFrame.ReadCsvLinesIntoDataFrame(...)\r\n\r\n            // no crash if renameDuplicatedColumns: false\r\n            // or if dataTypes is set (no 'column type guessing')\r\n            // or if CultureInfo.CurrentCulture has other format for DateTime (like dd.mm.yyyy) ==> the column will not be considered as DateTime, but string\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Additional context**\r\nNo crash if renameDuplicatedColumns: false\r\nor if dataTypes is set (no 'column type guessing')\r\nor if CultureInfo.CurrentCulture has other format for DateTime (like dd.mm.yyyy) ==> the column will not be considered as DateTime, but string.\r\n\r\n**Possible root cause:**\r\nThis seems to be a bug in Microosft.Data.Analysis.DataFrame - in ReadCsvLinesIntoDataFrame() function, only if renameDuplicatedColumns param is true, **not only the duplicated column names are renamed, but also 'duplicated' row values are 'renamed'**:\r\nex.: \"345\", \"345.1\", \"345.2\"...\r\nSeveral empty string values become: \"\", \".1\", \".2\", \".3\".\r\nThe code that tries to guess the column types will consider these former empty strings as float/single values under en-US culture, marking the entire column a having a single/float data type, even if no float values really exist on that column.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7240","RelatedDescription":"Open issue \"DataFrame when parsing a CSV incorrectly detects a column type when renameDuplicatedColumns is true \" (#7240)"},{"Id":"2534238807","IsPullRequest":true,"CreatedAt":"2024-09-18T16:56:33","Actor":"LittleLittleCloud","Number":"7239","RawContent":null,"Title":"[GenAI] Add FlashAttention","State":"open","Body":"We are excited to review your PR.\r\n\r\nSo we can do the best job, please check:\r\n\r\n- [x] There's a descriptive title that will make sense to other developers some time from now. \r\n- [x] There's associated issues. All PR's should have issue(s) associated - unless a trivial self-evident change such as fixing a typo. You can use the format `Fixes #nnnn` in your description to cause GitHub to automatically close the issue(s) when your PR is merged.\r\n- [x] Your change description explains what the change does, why you chose your approach, and anything else that reviewers should know.\r\n- [ ] You have included any necessary tests in the same PR.\r\n\r\n#7169 ","Url":"https://github.com/dotnet/machinelearning/pull/7239","RelatedDescription":"Open PR \"[GenAI] Add FlashAttention\" (#7239)"},{"Id":"2529411329","IsPullRequest":true,"CreatedAt":"2024-09-18T16:54:41","Actor":"LittleLittleCloud","Number":"7238","RawContent":null,"Title":"[GenAI] Add FlashAttention","State":"closed","Body":"We are excited to review your PR.\r\n\r\nSo we can do the best job, please check:\r\n\r\n- [x] There's a descriptive title that will make sense to other developers some time from now. \r\n- [x] There's associated issues. All PR's should have issue(s) associated - unless a trivial self-evident change such as fixing a typo. You can use the format `Fixes #nnnn` in your description to cause GitHub to automatically close the issue(s) when your PR is merged.\r\n- [x] Your change description explains what the change does, why you chose your approach, and anything else that reviewers should know.\r\n- [ ] You have included any necessary tests in the same PR.\r\n\r\n#7169 ","Url":"https://github.com/dotnet/machinelearning/pull/7238","RelatedDescription":"Closed or merged PR \"[GenAI] Add FlashAttention\" (#7238)"},{"Id":"2527179376","IsPullRequest":true,"CreatedAt":"2024-09-16T18:53:04","Actor":"LittleLittleCloud","Number":"7237","RawContent":null,"Title":"[GenAI] Enable pack","State":"closed","Body":"We are excited to review your PR.\r\n\r\nSo we can do the best job, please check:\r\n\r\n- [x] There's a descriptive title that will make sense to other developers some time from now. \r\n- [x] There's associated issues. All PR's should have issue(s) associated - unless a trivial self-evident change such as fixing a typo. You can use the format `Fixes #nnnn` in your description to cause GitHub to automatically close the issue(s) when your PR is merged.\r\n- [x] Your change description explains what the change does, why you chose your approach, and anything else that reviewers should know.\r\n- [ ] You have included any necessary tests in the same PR.\r\n\r\n#7169 \r\n","Url":"https://github.com/dotnet/machinelearning/pull/7237","RelatedDescription":"Closed or merged PR \"[GenAI] Enable pack\" (#7237)"}],"ResultType":"GitHubIssue"}},"RunOn":"2024-10-09T03:30:20.1160104Z","RunDurationInMilliseconds":614}