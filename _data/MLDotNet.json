{"Data":{"GitHub":{"Issues":[{"Id":"2196295623","IsPullRequest":false,"CreatedAt":"2024-03-20T18:42:42","Actor":"tarekgh","Number":"7084","RawContent":null,"Title":"The Operation will be canceled. The next steps may not contain expected logs.","State":"closed","Body":"## Build Information\r\nBuild: https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=607853\r\nBuild error leg or test failing: Ubuntu_x64_cross_arm_Net60 / Ubuntu_x64_cross_arm_Net60 Debug_Build\r\nPull request: https://github.com/dotnet/machinelearning/pull/7080\r\n<!-- Error message template  -->\r\n## Error Message\r\n\r\nFill the error message using [step by step known issues guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssues.md#how-to-fill-out-a-known-issue-error-section).\r\n\r\n<!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern for regex matches (single line/no backtracking). Set BuildRetry to `true` to retry builds with this error. Set ExcludeConsoleLog to `true` to skip helix logs analysis. -->\r\n\r\n```json\r\n{\r\n  \"ErrorMessage\": \"The Operation will be canceled. The next steps may not contain expected logs.\",\r\n  \"ErrorPattern\": \"The operation was canceled.\",\r\n  \"BuildRetry\": false,\r\n  \"ExcludeConsoleLog\": false\r\n}\r\n```\r\n\r\n\r\n<!-- Known issue validation start -->\r\n ### Known issue validation\r\n**Build: :mag_right:** https://dev.azure.com/dnceng-public/public/_build/results?buildId=607853\r\n**Error message validated:** `[The operation was canceled.`]\r\n**Result validation:** :white_check_mark: Known issue matched with the provided build.\r\n**Validation performed at:** 3/20/2024 12:02:04 AM UTC\r\n<!-- Known issue validation end -->\r\n<!--Known issue error report start -->\r\n### Report\r\n|Build|Definition|Step Name|Console log|Pull Request|\r\n|---|---|---|---|---|\r\n|[610116](https://dev.azure.com/dnceng-public/public/_build/results?buildId=610116)|dotnet/machinelearning|Build Packages|[Log](https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_apis/build/builds/610116/logs/258)||\r\n|[609307](https://dev.azure.com/dnceng-public/public/_build/results?buildId=609307)|dotnet/machinelearning|Run Helix Tests|[Log](https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_apis/build/builds/609307/logs/330)|dotnet/machinelearning#7078|\r\n|[607853](https://dev.azure.com/dnceng-public/public/_build/results?buildId=607853)|dotnet/machinelearning|Run Helix Tests|[Log](https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_apis/build/builds/607853/logs/440)|dotnet/machinelearning#7080|\r\n#### Summary\r\n|24-Hour Hit Count|7-Day Hit Count|1-Month Count|\r\n|---|---|---|\r\n|3|3|3|\r\n<!--Known issue error report end -->","Url":"https://github.com/dotnet/machinelearning/issues/7084","RelatedDescription":"Closed issue \"The Operation will be canceled. The next steps may not contain expected logs.\" (#7084)"},{"Id":"2198036699","IsPullRequest":false,"CreatedAt":"2024-03-20T16:54:32","Actor":"richlander","Number":"7088","RawContent":null,"Title":"Update `dotnet-buildtools-prereqs-docker` images","State":"open","Body":"We are no longer supporting Ubuntu 18.04 images.\r\n\r\nI tried to update them, but there doesn't seem to be matching images for a higher Ubuntu version.\r\n\r\nhttps://github.com/dotnet/machinelearning/blob/70e191b3fae444f6625fdc001071de1e2bd1080b/.vsts-dotnet-ci.yml#L33-L40\r\n\r\nThe CentOS 8 stream image will soon be EOL. We need to move off of it, too.\r\n\r\nhttps://blog.centos.org/2023/04/end-dates-are-coming-for-centos-stream-8-and-centos-linux-7/\r\n\r\nhttps://github.com/dotnet/machinelearning/blob/70e191b3fae444f6625fdc001071de1e2bd1080b/.vsts-dotnet-ci.yml#L31\r\n\r\nI did update your VM images: https://github.com/dotnet/machinelearning/pull/7087","Url":"https://github.com/dotnet/machinelearning/issues/7088","RelatedDescription":"Open issue \"Update `dotnet-buildtools-prereqs-docker` images\" (#7088)"},{"Id":"2198024105","IsPullRequest":true,"CreatedAt":"2024-03-20T16:48:33","Actor":"richlander","Number":"7087","RawContent":null,"Title":"Update VMs","State":"open","Body":"We are deprecating `Ubuntu.1804.Amd64.Open`.","Url":"https://github.com/dotnet/machinelearning/pull/7087","RelatedDescription":"Open PR \"Update VMs\" (#7087)"},{"Id":"2191014809","IsPullRequest":true,"CreatedAt":"2024-03-20T16:44:28","Actor":"tarekgh","Number":"7078","RawContent":null,"Title":"Introducing Llama Tokenizer","State":"closed","Body":"This change is introducing the Llama tokenizer which is implemented as the SentencePiece Bpe model based on https://github.com/google/sentencepiece.  ","Url":"https://github.com/dotnet/machinelearning/pull/7078","RelatedDescription":"Closed or merged PR \"Introducing Llama Tokenizer\" (#7078)"},{"Id":"2197957331","IsPullRequest":false,"CreatedAt":"2024-03-20T16:18:37","Actor":"piyushdubey","Number":"7086","RawContent":null,"Title":"Add support for Apache.Arrow.Types.BinaryType","State":"open","Body":"**System Information (please complete the following information):**\r\n - Window 11\r\n - Microsoft.Data.Analysis v0.21.1\r\n - .Net Framework 4.7.2\r\n\r\n**Describe the bug**\r\nI am getting the below exception\r\n\r\nUnhandled exception. System.NotImplementedException: `binary`\r\nat Microsoft.Data.Analysis.DataFrame.AppendDataFrameColumnFromArrowArray(Field field, IArrowArray arrowArray, DataFrame ret, String fieldNamePrefix)\r\nat Microsoft.Data.Analysis.DataFrame.FromArrowRecordBatch(RecordBatch recordBatch)\r\nat Program.\r\n\r\n**To Reproduce**\r\nTake a .arrow file with one column of type `Apache.Arrow.Types.BinaryType`\r\nvar dataframe = DataFrame.FromArrowRecordBatch(recordBatch);\r\nIt will throw above exception\r\n\r\n**Expected behavior**\r\nThe record batch should transform to DataFrame with appropriate type to handle `binary`","Url":"https://github.com/dotnet/machinelearning/issues/7086","RelatedDescription":"Open issue \"Add support for Apache.Arrow.Types.BinaryType\" (#7086)"},{"Id":"2197936625","IsPullRequest":false,"CreatedAt":"2024-03-20T16:09:50","Actor":"fwaris","Number":"7085","RawContent":null,"Title":"SweepableEstimator SearchSpace not being fully explored","State":"open","Body":"**System Information (please complete the following information):**\r\n - OS & Version:  Windows 10]\r\n - ML.NET Version: 0.21.1\r\n - .NET Version: .Net 8.0\r\n\r\n**Describe the bug**\r\nThe SearchSpace is not being fully explored for a SweepableEstimator.\r\nI have a SweepableEstimator where the search space is for the 'k' for KMeans number of clusters.\r\nThe range is Min=3, Max=20 and Default = 10. (uniform int).\r\nI am logging the selected k parameter when the SweepableEstimator is called.\r\nThe logs show that k hovers around the default value (i.e. 8,9,10,11). \r\nThe full space is not explored.\r\n\r\nA clear and concise description of what the bug is.\r\nThe script that showcases this problem is here\r\n\r\nhttps://github.com/fwaris/MLNetGEOpt/blob/master/MLNetGEOpt/scripts/custering.fsx\r\n\r\n\r\n**Expected behavior**\r\nThe search space should be explored more fully\r\n\r\n**Screenshots, Code, Sample Projects**\r\nProject: https://github.com/fwaris/MLNetGEOpt\r\n\r\n**Additional context**\r\n## Background\r\nThe referenced [project](https://github.com/fwaris/MLNetGEOpt) is a layer of auto ML above the AutoML (of ML.Net). This higher layer is called 'MLNetGEOpt'.\r\n\r\nAutoML finds optimal parameters given a SweepablePipeline.\r\n\r\nMLNetGEOpt proposes *new SweepablePipelines* for AutoML to optimize. \r\n\r\nIt uses a method called \"Grammatical Evolution\" (GE). The pipelines are constructed according to a given 'grammar'. Each pipeline is a valid 'sentence' constructed from the grammar.\r\n\r\nThe grammar ensures that the pipelines are reasonable. This greatly reduces the search space - as compared to randomly constructed pipelines - say via a Genetic Algorithm.\r\n\r\nNote: I solved for optimal number of clusters by building a grammar that allows for one-of-many SweepableEstimators each tied a particular k.\r\n\r\nHere is an example of the grammar (prefix 'se' stands for SweepableEstimator; 'Alt'=select 1 from available options; 'Opt'=optional term):\r\n```F#\r\nlet g = \r\n    [\r\n        Estimator seBase\r\n        Opt(Estimator (E.Def.seFtrSelCount 3))        \r\n        Alt [\r\n            Alt ([(1,10); (11,20); (21,30); (31,100)] |> List.map(E.Def.seNorm>>Estimator))\r\n            Estimator E.Def.seNormLpNorm\r\n            Estimator E.Def.seNormLogMeanVar\r\n            Estimator E.Def.seNormMeanVar\r\n            Alt([0.1f .. 0.5f .. 4.0f] |> List.pairwise |> List.map(fun (a,b) -> a, b - 0.001f)  |> List.map(E.Def.seGlobalContrast>>Estimator))\r\n            Estimator E.Def.seNormMinMax\r\n            Estimator E.Def.seNormRobustScaling\r\n        ]\r\n        Alt [for i in 3 .. 20 -> Estimator (seCluster i)]  // this works \r\n        //Estimator seClusterWithSS                        // this does not work\r\n    ]\r\n```\r\nFor reference, a specific grammar can be constructed from this simple 'meta-grammar':\r\n```F#\r\ntype Term = \r\n    | Opt of Term \r\n    | Pipeline of (unit -> SweepablePipeline)\r\n    | Estimator of (unit -> SweepableEstimator)\r\n    | Alt of Term list\r\n    | Union of Term list\r\n```\r\n\r\n\r\n\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7085","RelatedDescription":"Open issue \"SweepableEstimator SearchSpace not being fully explored\" (#7085)"},{"Id":"2190998969","IsPullRequest":false,"CreatedAt":"2024-03-20T00:05:05","Actor":"tonybaloney","Number":"7077","RawContent":null,"Title":"Missing Sync equivalent to Microsoft.ML.Tokenizers Tiktoken.CreateByModelName without vocab stream","State":"closed","Body":"The only way to instantiate the Tiktoken tokenizer _without_ a vocab stream is to use the Async method https://github.com/dotnet/machinelearning/blob/main/src/Microsoft.ML.Tokenizers/Model/Tiktoken.cs#L778C9-L782C95\r\n\r\n\r\n```csharp\r\nTask<Tokenizer> CreateByModelNameAsync(\r\n                                                string modelName,\r\n                                                IReadOnlyDictionary<string, int>? extraSpecialTokens = null,\r\n                                                Normalizer? normalizer = null,\r\n                                                CancellationToken cancellationToken = default)\r\n```\r\n\r\nPlease can there be an overload to the Sync `CreateByModelName()` method so that we can instantiate a Tiktoken tokenizer from just a model name without having to call it asynchronously. \r\n\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7077","RelatedDescription":"Closed issue \"Missing Sync equivalent to Microsoft.ML.Tokenizers Tiktoken.CreateByModelName without vocab stream\" (#7077)"},{"Id":"2193578016","IsPullRequest":true,"CreatedAt":"2024-03-20T00:05:04","Actor":"tarekgh","Number":"7080","RawContent":null,"Title":"Add Tiktoken Synchronous Creation Using Model Name","State":"closed","Body":"Fixes https://github.com/dotnet/machinelearning/issues/7077\r\n\r\nThe change:\r\n- Adding a new method `Tiktoken.CreateTokenizerByModelName` allow synchronous creation of the tokenizer using the model name. \r\n- Renaming `Tiktoken.CreateByModelNameAsync` to `Tiktoken.CreateTokenizerByModelNameAsync`. This adjustment is being made because the `Tiktoken` class includes other methods for creating models, not just tokenizers. By adding the word `Tokenizer` to the method responsible for creating a tokenizer, it will provide clarity regarding its functionality.","Url":"https://github.com/dotnet/machinelearning/pull/7080","RelatedDescription":"Closed or merged PR \"Add Tiktoken Synchronous Creation Using Model Name\" (#7080)"},{"Id":"2196250363","IsPullRequest":false,"CreatedAt":"2024-03-19T23:39:15","Actor":"piyushdubey","Number":"7083","RawContent":null,"Title":"Add support for Apache.Arrow.Types.Decimal256","State":"open","Body":"**System Information (please complete the following information):**\r\n - Window 11\r\n - Microsoft.Data.Analysis v0.21.1\r\n - .Net Framework 4.7.2\r\n\r\n**Describe the bug**\r\nI am getting the below exception\r\n\r\nUnhandled exception. System.NotImplementedException: `decimal256`\r\nat Microsoft.Data.Analysis.DataFrame.AppendDataFrameColumnFromArrowArray(Field field, IArrowArray arrowArray, DataFrame ret, String fieldNamePrefix)\r\nat Microsoft.Data.Analysis.DataFrame.FromArrowRecordBatch(RecordBatch recordBatch)\r\nat Program.\r\n\r\n**To Reproduce**\r\nTake a .arrow file with one column of type `Apache.Arrow.Types.Decimal256`\r\nvar dataframe = DataFrame.FromArrowRecordBatch(recordBatch);\r\nIt will throw above exception\r\n\r\n**Expected behavior**\r\nThe record batch should transform to DataFrame with appropriate type to handle `decimal256`","Url":"https://github.com/dotnet/machinelearning/issues/7083","RelatedDescription":"Open issue \"Add support for Apache.Arrow.Types.Decimal256\" (#7083)"},{"Id":"2196227277","IsPullRequest":false,"CreatedAt":"2024-03-19T23:24:54","Actor":"piyushdubey","Number":"7082","RawContent":null,"Title":"Add support for Apache.Arrow.Types.Decimal128Type","State":"open","Body":"**System Information (please complete the following information):**\r\n - Window 11\r\n - Microsoft.Data.Analysis v0.21.1\r\n - .Net Framework 4.7.2\r\n\r\n**Describe the bug**\r\nI am getting the below exception\r\n\r\nUnhandled exception. System.NotImplementedException: `decimal128`\r\nat Microsoft.Data.Analysis.DataFrame.AppendDataFrameColumnFromArrowArray(Field field, IArrowArray arrowArray, DataFrame ret, String fieldNamePrefix)\r\nat Microsoft.Data.Analysis.DataFrame.FromArrowRecordBatch(RecordBatch recordBatch)\r\nat Program.\r\n\r\n**To Reproduce**\r\nTake a .arrow file with one column of type `Apache.Arrow.Types.Decimal128Type`\r\nvar dataframe = DataFrame.FromArrowRecordBatch(recordBatch);\r\nIt will throw above exception\r\n\r\n**Expected behavior**\r\nThe record batch should transform to DataFrame with appropriate type to handle `decimal128`","Url":"https://github.com/dotnet/machinelearning/issues/7082","RelatedDescription":"Open issue \"Add support for Apache.Arrow.Types.Decimal128Type\" (#7082)"},{"Id":"2193690820","IsPullRequest":false,"CreatedAt":"2024-03-18T23:50:37","Actor":"ericstj","Number":"7081","RawContent":null,"Title":"ML.NET Tests should drop net6.0 and run on net8.0 and net9.0","State":"open","Body":"net6.0 will be out of support by the time that ML.NET 4.0 releases.  Rather than testing on `net6.0` and `net8.0` we should test on `net8.0` and `net9.0`\r\n\r\nWhen doing this we can make ML.NET use the arcade version of RemoteExecutor.","Url":"https://github.com/dotnet/machinelearning/issues/7081","RelatedDescription":"Open issue \"ML.NET Tests should drop net6.0 and run on net8.0 and net9.0\" (#7081)"},{"Id":"2189591037","IsPullRequest":true,"CreatedAt":"2024-03-18T15:12:03","Actor":"ericstj","Number":"7076","RawContent":null,"Title":"Reenable log publishing","State":"closed","Body":"Arcade fix is in, this should work now.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7076","RelatedDescription":"Closed or merged PR \"Reenable log publishing\" (#7076)"},{"Id":"2192179510","IsPullRequest":true,"CreatedAt":"2024-03-18T13:16:40","Actor":"dotnet-maestro[bot]","Number":"7079","RawContent":null,"Title":"[main] Update dependencies from dotnet/arcade","State":"open","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c692823c-b896-437f-4f57-08dc434cc8f6)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: c692823c-b896-437f-4f57-08dc434cc8f6\r\n- **Build**: \r\n- **Date Produced**: March 15, 2024 11:16:01 PM UTC\r\n- **Commit**: ace00d8719b8d1fdfd0cc05f71bb9af216338d27\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 9.0.0-beta.24165.3 to 9.0.0-beta.24165.6][1]\r\n  - **Microsoft.DotNet.Build.Tasks.Feed**: [from 9.0.0-beta.24165.3 to 9.0.0-beta.24165.6][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 9.0.0-beta.24165.3 to 9.0.0-beta.24165.6][1]\r\n  - **Microsoft.DotNet.SignTool**: [from 9.0.0-beta.24165.3 to 9.0.0-beta.24165.6][1]\r\n  - **Microsoft.DotNet.SwaggerGenerator.MSBuild**: [from 9.0.0-beta.24165.3 to 9.0.0-beta.24165.6][1]\r\n  - **Microsoft.DotNet.XliffTasks**: [from 9.0.0-beta.24165.3 to 9.0.0-beta.24165.6][1]\r\n  - **Microsoft.DotNet.XUnitExtensions**: [from 9.0.0-beta.24165.3 to 9.0.0-beta.24165.6][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/812d978c30...ace00d8719\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c692823c-b896-437f-4f57-08dc434cc8f6)\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7079","RelatedDescription":"Open PR \"[main] Update dependencies from dotnet/arcade\" (#7079)"},{"Id":"2189458742","IsPullRequest":true,"CreatedAt":"2024-03-15T23:01:04","Actor":"dotnet-maestro[bot]","Number":"7074","RawContent":null,"Title":"[main] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:97926d79-6b8b-4d32-c8db-08d9d479971c)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: 97926d79-6b8b-4d32-c8db-08d9d479971c\r\n- **Build**: \r\n- **Date Produced**: March 15, 2024 3:24:19 PM UTC\r\n- **Commit**: 812d978c303174dc1aa305d7359e79053d7d4971\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.Build.Tasks.Feed**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.SignTool**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.SwaggerGenerator.MSBuild**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.XliffTasks**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.XUnitExtensions**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/f4538b1f8f...812d978c30\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:97926d79-6b8b-4d32-c8db-08d9d479971c)\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7074","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/arcade\" (#7074)"},{"Id":"2189462959","IsPullRequest":true,"CreatedAt":"2024-03-15T22:59:53","Actor":"dotnet-maestro[bot]","Number":"7075","RawContent":null,"Title":"[main] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c692823c-b896-437f-4f57-08dc434cc8f6)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: c692823c-b896-437f-4f57-08dc434cc8f6\r\n- **Build**: \r\n- **Date Produced**: March 15, 2024 3:24:19 PM UTC\r\n- **Commit**: 812d978c303174dc1aa305d7359e79053d7d4971\r\n- **Branch**: refs/heads/main\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.Build.Tasks.Feed**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.SignTool**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.SwaggerGenerator.MSBuild**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.XliffTasks**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n  - **Microsoft.DotNet.XUnitExtensions**: [from 9.0.0-beta.24159.1 to 9.0.0-beta.24165.3][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/f4538b1f8f...812d978c30\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c692823c-b896-437f-4f57-08dc434cc8f6)\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7075","RelatedDescription":"Closed or merged PR \"[main] Update dependencies from dotnet/arcade\" (#7075)"},{"Id":"2186991643","IsPullRequest":true,"CreatedAt":"2024-03-15T20:32:24","Actor":"ericstj","Number":"7070","RawContent":null,"Title":"Update readmes for Tokenizers and Microsoft.ML","State":"closed","Body":"I fixed up the build to have the same convention as runtime (Package.md) and the same format.  Just add a Package.md next to the project.\r\n\r\nI also updated our build triggers so that future PRs that only change docs will not trigger validation builds.","Url":"https://github.com/dotnet/machinelearning/pull/7070","RelatedDescription":"Closed or merged PR \"Update readmes for Tokenizers and Microsoft.ML\" (#7070)"},{"Id":"2189281055","IsPullRequest":true,"CreatedAt":"2024-03-15T18:55:59","Actor":"luisquintanilla","Number":"7073","RawContent":null,"Title":"Adding migration guide for deepdev","State":"open","Body":"This provides guidance on how to migrate to Microsoft.ML.Tokenizers","Url":"https://github.com/dotnet/machinelearning/pull/7073","RelatedDescription":"Open PR \"Adding migration guide for deepdev\" (#7073)"},{"Id":"2188003362","IsPullRequest":false,"CreatedAt":"2024-03-15T08:45:58","Actor":"khteh","Number":"7072","RawContent":null,"Title":"ML.Net deep-learning classification tutorial code doesn't build on Linux platform?","State":"open","Body":"**System Information (please complete the following information):**\r\n - OS & Version: [e.g. Windows 10] Ubuntu 23.10\r\n - ML.NET Version: [e.g. ML.NET v1.5.5] 3.0.1\r\n - .NET Version: [e.g. .NET 5.0] .Net 8\r\n\r\n**Describe the bug**\r\nFollowing this tutorial https://learn.microsoft.com/en-us/dotnet/machine-learning/tutorials/image-classification-api-transfer-learning, VSCode hits the following error:\r\n```\r\nerror NU1301: The local source '/usr/src/ML.Net/DeepLearning_ImageClassification_Binary/C:\\Program Files (x86)\\Microsoft SDKs\\NuGetPackages\\' doesn't exist.\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots, Code, Sample Projects**\r\nIf applicable, add screenshots, code snippets, or sample projects to help explain your problem.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7072","RelatedDescription":"Open issue \"ML.Net deep-learning classification tutorial code doesn't build on Linux platform?\" (#7072)"},{"Id":"2187916093","IsPullRequest":false,"CreatedAt":"2024-03-15T07:48:20","Actor":"khteh","Number":"7071","RawContent":null,"Title":"ML.Net deep-learning classification tutorial code hits InvalidOperationException error","State":"open","Body":"**System Information (please complete the following information):**\r\n - OS & Version: [e.g. Windows 10] Windows 11\r\n - ML.NET Version: [e.g. ML.NET v1.5.5] 3.0.1\r\n - .NET Version: [e.g. .NET 5.0] .Net 8\r\n\r\n**Describe the bug**\r\nFollowing this tutorial https://learn.microsoft.com/en-us/dotnet/machine-learning/tutorials/image-classification-api-transfer-learning,\r\nthe following code snippet:\r\n```\r\nITransformer BuildAndTrainModel(IDataView trainingDataView, ImageClassificationTrainer.Options classifierOptions)\r\n{\r\n    WriteLine($\"Build and train model...\");\r\n    var trainingPipeline = mlContext.MulticlassClassification.Trainers.ImageClassification(classifierOptions)\r\n                                .Append(mlContext.Transforms.Conversion.MapKeyToValue(\"PredictedLabel\"));\r\n    return trainingPipeline.Fit(trainingDataView); <<- Error\r\n}\r\n```\r\nhits a runtime error:\r\n```\r\nSystem.InvalidOperationException\r\n  HResult=0x80131509\r\n  Message=Error downloading resource from 'https://aka.ms/mlnet-resources/meta/resnet_v2_101_299.meta': DownloadFailed with exception One or more errors occurred. (Object synchronization method was called from an unsynchronized block of code.)\\nDownloadFailed with exception One or more errors occurred. (The wait completed due to an abandoned mutex.)\\nDownloadFailed with exception One or more errors occurred. (Object synchronization method was called from an unsynchronized block of code.)\\nDownloadFailed with exception One or more errors occurred. (The wait completed due to an abandoned mutex.)\\nDownloadFailed with exception One or more errors occurred. (The wait completed due to an abandoned mutex.)\\n\r\nMeta file could not be downloaded! Please copy the model file 'resnet_v2_101_299.meta' from 'meta\\resnet_v2_101_299.meta' to 'C:\\Users\\me\\AppData\\Local\\Temp\\MLNET'.\r\n  Source=Microsoft.ML.TensorFlow\r\n  StackTrace:\r\n   at Microsoft.ML.TensorFlow.TensorFlowUtils.DownloadIfNeeded(IHostEnvironment env, String url, String dir, String fileName, Int32 timeout)\r\n   at Microsoft.ML.Vision.ImageClassificationTrainer.LoadTensorFlowSessionFromMetaGraph(IHostEnvironment env, Architecture arch)\r\n   at Microsoft.ML.Vision.ImageClassificationTrainer.InitializeTrainingGraph(IDataView input)\r\n   at Microsoft.ML.Vision.ImageClassificationTrainer.TrainModelCore(TrainContext trainContext)\r\n   at Microsoft.ML.Trainers.TrainerEstimatorBase`2.TrainTransformer(IDataView trainSet, IDataView validationSet, IPredictor initPredictor)\r\n   at Microsoft.ML.Trainers.TrainerEstimatorBase`2.Fit(IDataView input)\r\n   at Microsoft.ML.Data.EstimatorChain`1.Fit(IDataView input)\r\n   at Program.<<Main>$>g__BuildAndTrainModel|0_2(IDataView trainingDataView, Options classifierOptions, <>c__DisplayClass0_0& ) in C:\\Projects\\ML.Net\\DeepLearning_ImageClassification_Binary\\src\\Program.cs:line 83\r\n   at Program.<Main>$(String[] args) in C:\\Projects\\ML.Net\\DeepLearning_ImageClassification_Binary\\src\\Program.cs:line 21\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nRuns successfully\r\n\r\n**Screenshots, Code, Sample Projects**\r\nIf applicable, add screenshots, code snippets, or sample projects to help explain your problem.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/7071","RelatedDescription":"Open issue \"ML.Net deep-learning classification tutorial code hits InvalidOperationException error\" (#7071)"},{"Id":"2182744474","IsPullRequest":true,"CreatedAt":"2024-03-14T17:30:39","Actor":"github-actions[bot]","Number":"7062","RawContent":null,"Title":"[release/3.0] Update package versions in use by ML.NET tests","State":"closed","Body":"Backport of #7055 to release/3.0\r\n\r\n/cc @ericstj\r\n\r\nAddress component governance alerts building release/3.0\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7062","RelatedDescription":"Closed or merged PR \"[release/3.0] Update package versions in use by ML.NET tests\" (#7062)"},{"Id":"2185066771","IsPullRequest":true,"CreatedAt":"2024-03-14T17:28:06","Actor":"github-actions[bot]","Number":"7069","RawContent":null,"Title":"[release/3.0] Testing light gbm bad allocation","State":"closed","Body":"Backport of #6968 to release/3.0\r\n\r\n/cc @ericstj @michaelgsharp\r\n\r\nTest only servicing change.\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7069","RelatedDescription":"Closed or merged PR \"[release/3.0] Testing light gbm bad allocation\" (#7069)"},{"Id":"2182950612","IsPullRequest":true,"CreatedAt":"2024-03-14T13:34:42","Actor":"ericstj","Number":"7063","RawContent":null,"Title":"[release/3.0] pipeline fixes","State":"closed","Body":"Backport pipeline changes to fix 3.0 builds \r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7063","RelatedDescription":"Closed or merged PR \"[release/3.0] pipeline fixes\" (#7063)"},{"Id":"2184695976","IsPullRequest":true,"CreatedAt":"2024-03-14T13:34:03","Actor":"dotnet-maestro[bot]","Number":"7066","RawContent":null,"Title":"[release/3.0] Update dependencies from dotnet/arcade","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:45c6fd49-3a4f-4675-f3da-08dc0c527e17)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: 45c6fd49-3a4f-4675-f3da-08dc0c527e17\r\n- **Build**: \r\n- **Date Produced**: March 11, 2024 11:36:09 PM UTC\r\n- **Commit**: cd10e5d3748676d70ae2b4d9c84f073eeb203cac\r\n- **Branch**: refs/heads/release/8.0\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 8.0.0-beta.24113.2 to 8.0.0-beta.24161.7][1]\r\n  - **Microsoft.DotNet.Build.Tasks.Feed**: [from 8.0.0-beta.24113.2 to 8.0.0-beta.24161.7][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 8.0.0-beta.24113.2 to 8.0.0-beta.24161.7][1]\r\n  - **Microsoft.DotNet.SignTool**: [from 8.0.0-beta.24113.2 to 8.0.0-beta.24161.7][1]\r\n  - **Microsoft.DotNet.SwaggerGenerator.MSBuild**: [from 8.0.0-beta.24113.2 to 8.0.0-beta.24161.7][1]\r\n  - **Microsoft.DotNet.XUnitExtensions**: [from 8.0.0-beta.24113.2 to 8.0.0-beta.24161.7][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/da98edc4c3...cd10e5d374\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:45c6fd49-3a4f-4675-f3da-08dc0c527e17)\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7066","RelatedDescription":"Closed or merged PR \"[release/3.0] Update dependencies from dotnet/arcade\" (#7066)"},{"Id":"2184831944","IsPullRequest":false,"CreatedAt":"2024-03-13T20:28:20","Actor":"ericstj","Number":"7068","RawContent":null,"Title":"ML.NET docs are missing API docs for 3.0.0","State":"open","Body":"See https://learn.microsoft.com/en-us/dotnet/api/microsoft.ml\r\n\r\nThere is no option for 3.0.0 or 4.0.0.\r\n<img width=\"387\" alt=\"image\" src=\"https://github.com/dotnet/machinelearning/assets/8918108/f8faf06b-7146-4970-af2f-caba7cc12d77\">\r\n\r\nWhat part of our process is missing to get these updated @michaelgsharp @luisquintanilla?","Url":"https://github.com/dotnet/machinelearning/issues/7068","RelatedDescription":"Open issue \"ML.NET docs are missing API docs for 3.0.0\" (#7068)"},{"Id":"2183142599","IsPullRequest":true,"CreatedAt":"2024-03-13T19:05:34","Actor":"ericstj","Number":"7064","RawContent":null,"Title":"Add release notes for 4.0-preview1","State":"closed","Body":"Formatted and sorted list of PRs.  I only exclude those which were part of 3.0 or 3.1.\r\n","Url":"https://github.com/dotnet/machinelearning/pull/7064","RelatedDescription":"Closed or merged PR \"Add release notes for 4.0-preview1\" (#7064)"},{"Id":"2184702809","IsPullRequest":false,"CreatedAt":"2024-03-13T19:04:24","Actor":"ericstj","Number":"7067","RawContent":null,"Title":"AutoML tests writing test output outside of a test which causes test process to fail with no failing test cases","State":"open","Body":"## Build Information\r\nBuild: https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=601237\r\nBuild error leg or test failing: Microsoft.ML.AutoML.Tests.WorkItemExecution\r\nPull request: https://github.com/dotnet/machinelearning/pull/7064\r\n<!-- Error message template  -->\r\n## Error Message\r\n\r\nFill the error message using [step by step known issues guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssues.md#how-to-fill-out-a-known-issue-error-section).\r\n\r\n<!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern for regex matches (single line/no backtracking). Set BuildRetry to `true` to retry builds with this error. Set ExcludeConsoleLog to `true` to skip helix logs analysis. -->\r\n\r\n```json\r\n{\r\n  \"ErrorMessage\": [\"System.InvalidOperationException: There is no currently active test.\", \"at Microsoft.ML.AutoML.CancellationTokenStopTrainingManager\"],\r\n  \"ErrorPattern\": \"\",\r\n  \"BuildRetry\": false,\r\n  \"ExcludeConsoleLog\": false\r\n}\r\n```\r\n\r\nSample log: https://helixre107v0xdeko0k025g8.blob.core.windows.net/dotnet-machinelearning-refs-pull-7064-merge-fb45c2e048d6480197/Microsoft.ML.AutoML.Tests/1/console.02bc281b.log?helixlogtype=result\r\n```\r\nUnhandled exception: System.AggregateException: One or more errors occurred. ---> System.InvalidOperationException: There is no currently active test.\r\n   at Xunit.Sdk.TestOutputHelper.GuardInitialized() in /_/src/xunit.execution/Sdk/Frameworks/TestOutputHelper.cs:line 52\r\n   at Xunit.Sdk.TestOutputHelper.QueueTestOutput(String output) in /_/src/xunit.execution/Sdk/Frameworks/TestOutputHelper.cs:line 63\r\n   at Microsoft.ML.AutoML.Test.AutoMLExperimentTests.<AutoMLExperiment_finish_training_when_time_is_up_Async>b__5_0(Object o, LoggingEventArgs e) in D:\\a\\_work\\1\\s\\test\\Microsoft.ML.AutoML.Tests\\AutoMLExperimentTests.cs:line 159\r\n   at Microsoft.ML.MLContext.ProcessMessage(IMessageSource source, ChannelMessage message) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\MLContext.cs:line 162\r\n   at Microsoft.ML.Runtime.HostEnvironmentBase`1.Dispatcher`1.DispatchCore(IMessageSource sender, TMessage message) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Environment\\HostEnvironmentBase.cs:line 313\r\n   at Microsoft.ML.Runtime.HostEnvironmentBase`1.ChannelBase.Info(MessageSensitivity sensitivity, String msg) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Environment\\HostEnvironmentBase.cs:line 256\r\n   at Microsoft.ML.Runtime.HostExtensions.Info(IChannel ch, String fmt) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Data\\IHostEnvironment.cs:line 314\r\n   at Microsoft.ML.AutoML.CancellationTokenStopTrainingManager.<.ctor>b__5_0() in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.AutoML\\AutoMLExperiment\\IStopTrainingManager.cs:line 36\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.CancellationCallbackInfo.ExecuteCallback()\r\n   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)\r\n   --- End of inner exception stack trace ---\r\n   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)\r\n   at System.Threading.CancellationTokenSource.NotifyCancellation(Boolean throwOnFirstException)\r\n   at System.Threading.CancellationTokenSource.TimerCallbackLogic(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.TimerQueueTimer.CallCallback()\r\n   at System.Threading.TimerQueueTimer.Fire()\r\n   at System.Threading.TimerQueue.FireNextTimers()\r\n---> (Inner Exception #0) System.InvalidOperationException: There is no currently active test.\r\n   at Xunit.Sdk.TestOutputHelper.GuardInitialized() in /_/src/xunit.execution/Sdk/Frameworks/TestOutputHelper.cs:line 52\r\n   at Xunit.Sdk.TestOutputHelper.QueueTestOutput(String output) in /_/src/xunit.execution/Sdk/Frameworks/TestOutputHelper.cs:line 63\r\n   at Microsoft.ML.AutoML.Test.AutoMLExperimentTests.<AutoMLExperiment_finish_training_when_time_is_up_Async>b__5_0(Object o, LoggingEventArgs e) in D:\\a\\_work\\1\\s\\test\\Microsoft.ML.AutoML.Tests\\AutoMLExperimentTests.cs:line 159\r\n   at Microsoft.ML.MLContext.ProcessMessage(IMessageSource source, ChannelMessage message) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\MLContext.cs:line 162\r\n   at Microsoft.ML.Runtime.HostEnvironmentBase`1.Dispatcher`1.DispatchCore(IMessageSource sender, TMessage message) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Environment\\HostEnvironmentBase.cs:line 313\r\n   at Microsoft.ML.Runtime.HostEnvironmentBase`1.ChannelBase.Info(MessageSensitivity sensitivity, String msg) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Environment\\HostEnvironmentBase.cs:line 256\r\n   at Microsoft.ML.Runtime.HostExtensions.Info(IChannel ch, String fmt) in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Data\\IHostEnvironment.cs:line 314\r\n   at Microsoft.ML.AutoML.CancellationTokenStopTrainingManager.<.ctor>b__5_0() in D:\\a\\_work\\1\\s\\src\\Microsoft.ML.AutoML\\AutoMLExperiment\\IStopTrainingManager.cs:line 36\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.CancellationCallbackInfo.ExecuteCallback()\r\n   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)<---\r\n```\r\n<!-- Known issue validation start -->\r\n ### Known issue validation\r\n**Build: :mag_right:** https://dev.azure.com/dnceng-public/public/_build/results?buildId=601237\r\n**Error message validated:** `[System.InvalidOperationException: There is no currently active test. at Microsoft.ML.AutoML.CancellationTokenStopTrainingManager`]\r\n**Result validation:** :white_check_mark: Known issue matched with the provided build.\r\n**Validation performed at:** 3/13/2024 7:06:40 PM UTC\r\n<!-- Known issue validation end -->\r\n<!--Known issue error report start -->\r\n### Report\r\n\r\n|Build|Definition|Test|Pull Request|\r\n|---|---|---|---|\r\n|[610550](https://dev.azure.com/dnceng-public/public/_build/results?buildId=610550)|dotnet/machinelearning|[Microsoft.ML.AutoML.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=610550&view=ms.vss-test-web.build-test-results-tab&runId=14903164&resultId=101767)|dotnet/machinelearning#7087|\r\n|[607251](https://dev.azure.com/dnceng-public/public/_build/results?buildId=607251)|dotnet/machinelearning|[Microsoft.ML.AutoML.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=607251&view=ms.vss-test-web.build-test-results-tab&runId=14804412&resultId=101766)|dotnet/machinelearning#7078|\r\n|[601237](https://dev.azure.com/dnceng-public/public/_build/results?buildId=601237)|dotnet/machinelearning|[Microsoft.ML.AutoML.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=601237&view=ms.vss-test-web.build-test-results-tab&runId=14589240&resultId=101449)|dotnet/machinelearning#7064|\r\n#### Summary\r\n|24-Hour Hit Count|7-Day Hit Count|1-Month Count|\r\n|---|---|---|\r\n|1|2|3|\r\n<!--Known issue error report end -->","Url":"https://github.com/dotnet/machinelearning/issues/7067","RelatedDescription":"Open issue \"AutoML tests writing test output outside of a test which causes test process to fail with no failing test cases\" (#7067)"},{"Id":"2183152589","IsPullRequest":false,"CreatedAt":"2024-03-13T05:33:26","Actor":"ericstj","Number":"7065","RawContent":null,"Title":"HttpClient.Timeout in Microsoft.ML.Tokenizers.Tests","State":"open","Body":"## Build Information\r\nBuild: https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=601020\r\nBuild error leg or test failing: Microsoft.ML.Tokenizers.Tests.EnglishRobertaTests.TokenizationTest\r\nPull request: https://github.com/dotnet/machinelearning/pull/7063\r\n<!-- Error message template  -->\r\n## Error Message\r\n\r\nFill the error message using [step by step known issues guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssues.md#how-to-fill-out-a-known-issue-error-section).\r\n\r\n<!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern for regex matches (single line/no backtracking). Set BuildRetry to `true` to retry builds with this error. Set ExcludeConsoleLog to `true` to skip helix logs analysis. -->\r\n\r\n```json\r\n{\r\n  \"ErrorMessage\": [\"The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.\", \"at Microsoft.ML.Tokenizers.Tests.EnglishRobertaTests.TokenizationTest\"],\r\n  \"ErrorPattern\": \"\",\r\n  \"BuildRetry\": false,\r\n  \"ExcludeConsoleLog\": true\r\n}\r\n```\r\n\r\nFailure log:\r\n```\r\n[m[31;1m    Microsoft.ML.Tokenizers.Tests.EnglishRobertaTests.TokenizationTest [FAIL]\r\n[m[37m      System.Threading.Tasks.TaskCanceledException : The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.\r\n[m[37m      ---- System.TimeoutException : A task was canceled.\r\n[m[37m      -------- System.Threading.Tasks.TaskCanceledException : A task was canceled.\r\n[m[30;1m      Stack Trace:\r\n[m[37m           at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)\r\n[m[37m           at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n[m[37m        /Users/runner/work/1/s/test/Microsoft.ML.Tokenizers.Tests/Utils.cs(19,0): at Microsoft.ML.Tokenizers.Tests.Utils.DownloadFile(String url, String fileName)\r\n[m[37m        /Users/runner/work/1/s/test/Microsoft.ML.Tokenizers.Tests/EnglishRobertaTests.cs(93,0): at Microsoft.ML.Tokenizers.Tests.EnglishRobertaTests.TokenizationTest()\r\n[m[37m           at System.Threading.Tasks.Task.<>c.<ThrowAsync>b__128_0(Object state)\r\n[m[37m        ----- Inner Stack Trace -----\r\n[m[37m        \r\n[m[37m        ----- Inner Stack Trace -----\r\n[m[37m           at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)\r\n[m[37m           at System.Net.Http.HttpConnectionPool.GetHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n[m[37m           at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n[m[37m           at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n[m[37m           at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n```\r\n\r\n<!-- Known issue validation start -->\r\n ### Known issue validation\r\n**Build: :mag_right:** https://dev.azure.com/dnceng-public/public/_build/results?buildId=601020\r\n**Error message validated:** `[The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing. at Microsoft.ML.Tokenizers.Tests.EnglishRobertaTests.TokenizationTest`]\r\n**Result validation:** :x: Known issue did not match with the provided build.\r\n**Validation performed at:** 3/13/2024 5:34:21 AM UTC\r\n<!-- Known issue validation end -->\r\n<!--Known issue error report start -->\r\n### Report\r\n#### Summary\r\n|24-Hour Hit Count|7-Day Hit Count|1-Month Count|\r\n|---|---|---|\r\n|0|0|0|\r\n<!--Known issue error report end -->","Url":"https://github.com/dotnet/machinelearning/issues/7065","RelatedDescription":"Open issue \"HttpClient.Timeout in Microsoft.ML.Tokenizers.Tests\" (#7065)"},{"Id":"2182263874","IsPullRequest":false,"CreatedAt":"2024-03-12T17:24:34","Actor":"ericstj","Number":"7061","RawContent":null,"Title":"libomp dependency is fragile","State":"open","Body":"I'm aware a few issues with our libomp dependency:\r\n1. We have to build libomp from source on x64 mac.  We also have accompanying requirements https://github.com/dotnet/machinelearning/blob/main/docs/building/unix-instructions.md#macos\r\n2. We install the libomp package on M1, and that requires custom steps which occasionally break: https://github.com/dotnet/machinelearning/commit/59973fc2572532ecbcac35ac59fb8d1164cc4f8f\r\n3. The version of libomp that we bind to might be different than the one used by our dependencies - which causes runtime issues/warnings like:  https://github.com/dotnet/machinelearning/issues/5569.  @michaelgsharp I think you mentioned this can also occur on linux.\r\n\r\nAs much as possible we should try to have a \"portable\" dependency here where we can build / link against something that works in the most places and allows the platform/OS to choose the right version and all our components load that version - insofar as that's possible.  We don't have such fragility for other platform dependencies.","Url":"https://github.com/dotnet/machinelearning/issues/7061","RelatedDescription":"Open issue \"libomp dependency is fragile\" (#7061)"},{"Id":"2182021270","IsPullRequest":false,"CreatedAt":"2024-03-12T15:55:17","Actor":"ericstj","Number":"7060","RawContent":null,"Title":"Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.TestEstimatorMulticlassNaiveBayesTrainer failed with assert","State":"open","Body":"## Build Information\r\nBuild: https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=599035\r\nBuild error leg or test failing: Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.TestEstimatorMulticlassNaiveBayesTrainer\r\nPull request: https://github.com/dotnet/machinelearning/pull/7058\r\n<!-- Error message template  -->\r\n## Error Message\r\n\r\nFill the error message using [step by step known issues guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssues.md#how-to-fill-out-a-known-issue-error-section).\r\n\r\n<!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern for regex matches (single line/no backtracking). Set BuildRetry to `true` to retry builds with this error. Set ExcludeConsoleLog to `true` to skip helix logs analysis. -->\r\n\r\n```json\r\n{\r\n  \"ErrorMessage\": [\"Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.TestEstimatorMulticlassNaiveBayesTrainer\", \"Assert failed: batch.Total:128 while _total + 1:0.\"],\r\n  \"ErrorPattern\": \"\",\r\n  \"BuildRetry\": false,\r\n  \"ExcludeConsoleLog\": true\r\n}\r\n```\r\n\r\nFailure detail:\r\n```\r\nStarting test: Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.FixedPlattCalibratorEstimator\r\n    Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.TestEstimatorMulticlassNaiveBayesTrainer [FAIL]\r\n      Assert failed: batch.Total:128 while _total + 1:0.\r\n      Stack Trace:\r\n        D:\\a\\_work\\1\\s\\test\\Microsoft.ML.TestFramework\\GlobalBase.cs(80,0): at Microsoft.ML.Internal.Internallearn.Test.GlobalBase.AssertHandler(String msg, IExceptionContext ectx)\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Utilities\\Contracts.cs(781,0): at Microsoft.ML.Runtime.Contracts.DbgFailCore(String msg, IExceptionContext ctx)\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Utilities\\Contracts.cs(794,0): at Microsoft.ML.Runtime.Contracts.DbgFail(String msg)\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Utilities\\Contracts.cs(852,0): at Microsoft.ML.Runtime.Contracts.Assert(Boolean f, String msg)\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\DataLoadSave\\Text\\TextLoaderCursor.cs(829,0): at Microsoft.ML.Data.TextLoader.Cursor.ParseParallel(ParallelState state)+MoveNext()\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\DataLoadSave\\Text\\TextLoaderCursor.cs(291,0): at Microsoft.ML.Data.TextLoader.Cursor.MoveNextCore()\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Core\\Data\\RootCursorBase.cs(65,0): at Microsoft.ML.Data.RootCursorBase.MoveNext()\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\Transforms\\ValueToKeyMappingTransformer.cs(617,0): at Microsoft.ML.Transforms.ValueToKeyMappingTransformer.Train(IHostEnvironment env, IChannel ch, ColInfo[] infos, IDataView keyData, ColumnOptionsBase[] columns, IDataView trainingData, Boolean autoConvert)\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\Transforms\\ValueToKeyMappingTransformer.cs(257,0): at Microsoft.ML.Transforms.ValueToKeyMappingTransformer..ctor(IHostEnvironment env, IDataView input, ColumnOptionsBase[] columns, IDataView keyData, Boolean autoConvert)\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\Transforms\\ValueToKeyMappingEstimator.cs(172,0): at Microsoft.ML.Transforms.ValueToKeyMappingEstimator.Fit(IDataView input)\r\n        D:\\a\\_work\\1\\s\\src\\Microsoft.ML.Data\\DataLoadSave\\EstimatorChain.cs(68,0): at Microsoft.ML.Data.EstimatorChain`1.Fit(IDataView input)\r\n        D:\\a\\_work\\1\\s\\test\\Microsoft.ML.TestFramework\\DataPipe\\TestDataPipeBase.cs(80,0): at Microsoft.ML.RunTests.TestDataPipeBase.TestEstimatorCore(IEstimator`1 estimator, IDataView validFitInput, IDataView validTransformInput, IDataView invalidInput, IDataView validForFitNotValidForTransformInput, Boolean shouldDispose)\r\n        D:\\a\\_work\\1\\s\\test\\Microsoft.ML.Tests\\TrainerEstimators\\TrainerEstimators.cs(156,0): at Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.TestEstimatorMulticlassNaiveBayesTrainer()\r\n      Output:\r\n        Test TestEstimatorMulticlassNaiveBayesTrainer: aborted: passed\r\n```\r\n\r\nThis is triggering this assert:\r\nhttps://github.com/dotnet/machinelearning/blob/f6ddd9b7dbb4bf500ded577195ddd1320c0e8761/src/Microsoft.ML.Data/DataLoadSave/Text/TextLoaderCursor.cs#L829\r\n\r\nCould this be another concurrency issue?\r\n\r\n\r\n<!-- Known issue validation start -->\r\n ### Known issue validation\r\n**Build: :mag_right:** https://dev.azure.com/dnceng-public/public/_build/results?buildId=599035\r\n**Error message validated:** `[Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.TestEstimatorMulticlassNaiveBayesTrainer Assert failed: batch.Total:128 while _total + 1:0.`]\r\n**Result validation:** :x: Known issue did not match with the provided build.\r\n**Validation performed at:** 3/12/2024 3:57:12 PM UTC\r\n<!-- Known issue validation end -->\r\n<!--Known issue error report start -->\r\n### Report\r\n#### Summary\r\n|24-Hour Hit Count|7-Day Hit Count|1-Month Count|\r\n|---|---|---|\r\n|0|0|0|\r\n<!--Known issue error report end -->","Url":"https://github.com/dotnet/machinelearning/issues/7060","RelatedDescription":"Open issue \"Microsoft.ML.Tests.TrainerEstimators.TrainerEstimators.TestEstimatorMulticlassNaiveBayesTrainer failed with assert\" (#7060)"},{"Id":"2181708793","IsPullRequest":false,"CreatedAt":"2024-03-12T14:04:27","Actor":"ericstj","Number":"7059","RawContent":null,"Title":"Investigte alternate API / Packaging for Tokenizer data streams","State":"open","Body":"The TikToken tokenizers require data to load.  Currently we download this from the internet, but also provide an API for callers to specify the stream.  We could also provide an API that does not require the stream but loads from an embedded resource.  We might also consider other formats which may be smaller in size or faster to load.\r\n\r\nThe sizes of the files aren't unreasonable to just embed in a binary, or the package itself:\r\n```\r\n1,681,126 cl100k_base.tiktoken\r\n  835,554 gpt2.tiktoken\r\n  836,186 p50k_base.tiktoken\r\n  835,554 r50k_base.tiktoken\r\n```\r\n\r\nIncluding all of them in the base library would bloat the library somewhat, and may not be linker friendly.  Potential alternatives that might be more linker friendly: granular assemblies for each resource, build targets to opt into embedding a resource, source generator that detects usage and injects the resource, etc.  \r\n\r\nWe could consider similar approaches for other tokenizer configuration.","Url":"https://github.com/dotnet/machinelearning/issues/7059","RelatedDescription":"Open issue \"Investigte alternate API / Packaging for Tokenizer data streams\" (#7059)"}],"ResultType":"GitHubIssue"}},"RunOn":"2024-03-21T03:30:16.912495Z","RunDurationInMilliseconds":505}