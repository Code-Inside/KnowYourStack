{"Data":{"GitHub":{"Issues":[{"Id":"741839600","IsPullRequest":false,"CreatedAt":"2020-11-12T18:47:42","Actor":"masgh021","Number":"5484","RawContent":null,"Title":"improve accuracy in object detection","State":"open","Body":"I have a digit detection model in custom vision and it is detecting digit Very good at cloud https://www.customvision.ai/.\r\nAfter i export it local (onnx) and i checked with ml.net\r\nour accuracy decrease and it does not recognize object . in most images .\r\nnote : my objects are small , character size like ocr,\r\nplease help me.","Url":"https://github.com/dotnet/machinelearning/issues/5484","RelatedDescription":"Open issue \"improve accuracy in object detection\" (#5484)"},{"Id":"740531627","IsPullRequest":false,"CreatedAt":"2020-11-11T18:18:50","Actor":"xsoheilalizadeh","Number":"5483","RawContent":null,"Title":"How to use neural network in ML.NET?","State":"closed","Body":"Is there any concept in ML.NET to imply the NN?\r\n\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5483","RelatedDescription":"Closed issue \"How to use neural network in ML.NET?\" (#5483)"},{"Id":"735179198","IsPullRequest":true,"CreatedAt":"2020-11-10T23:04:36","Actor":"justinormont","Number":"5471","RawContent":null,"Title":"MaxModels exit criteria for AutoML unit test","State":"closed","Body":"Update to https://github.com/dotnet/machinelearning/pull/5163.\r\n\r\nUses the internal [`maxModels`](https://github.com/dotnet/machinelearning/blob/e50c4d20012e0d62852f404ae443afca7dad043e/src/Microsoft.ML.AutoML/API/ExperimentSettings.cs#L60) parameter instead of `MaxExperimentTimeInSeconds` for the exit criteria of AutoML. \r\n\r\nThis is to increase the test stability in case the test is run on a slower machine.","Url":"https://github.com/dotnet/machinelearning/pull/5471","RelatedDescription":"Closed or merged PR \"MaxModels exit criteria for AutoML unit test\" (#5471)"},{"Id":"730164397","IsPullRequest":false,"CreatedAt":"2020-11-10T21:40:52","Actor":"iluveu28","Number":"5459","RawContent":null,"Title":"Make TextLoader infer column information from a CSV file header","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**: Windows 10\r\n- **.NET Version (eg., dotnet --info)**: 3.1\r\n\r\n### Issue\r\n\r\nI couldn't find the channel to submit a request so I apologise if this isnt the right place.\r\n\r\nI have a web portal that customers upload csv files to train and predict using multiclass-classification algo. However, ML.NET requires a concrete class for the Input Model with properties hard coded to the columns of the csv. \r\n\r\nCould you enhance the LoadFromText method so that it can accept an argument for the label header name and then just read the features from the headers of the rest of the csv file without having to create a class? This way nothing is hard coded and it can work with any csv file that my customers upload.\r\n\r\n### Source code / logs\r\n\r\nPlease paste or attach the code or logs or traces that would be helpful to diagnose the issue you are reporting.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5459","RelatedDescription":"Closed issue \"Make TextLoader infer column information from a CSV file header\" (#5459)"},{"Id":"739544273","IsPullRequest":true,"CreatedAt":"2020-11-10T17:38:57","Actor":"mstfbl","Number":"5482","RawContent":null,"Title":"Fixing failing Arcade Windows Builds","State":"closed","Body":"Fixed the `%20` space error causing Arcade Windows builds to fail, added conditional space variable to be `' '` in Linux/MacOS and `'%20'` on Windows.","Url":"https://github.com/dotnet/machinelearning/pull/5482","RelatedDescription":"Closed or merged PR \"Fixing failing Arcade Windows Builds\" (#5482)"},{"Id":"736795562","IsPullRequest":false,"CreatedAt":"2020-11-09T18:40:55","Actor":"jigarhshah17","Number":"5476","RawContent":null,"Title":"Use runtime /dynamic created class object in prediction engine.","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**:\r\nwindows 7\r\n- **.NET Version (eg., dotnet --info)**: \r\n>  .NET 4.6.1 ML.NET 1.5.2\r\n### Issue\r\n\r\n- **What did you do?**\r\nUse runtime /dynamic created class object in prediction engine.\r\n\r\nI want to predict different value, so I have created 25+ model\r\nUsing those models, I predict different values.\r\nBut each time I need to create class object with data and pass it to prediction engine to predict data \r\nSo, every time I need to change in code. So, I take approach to create class object on run time/ Dynamic with data and pass it to prediction engine but it will generate exception. Colum name not found in schema\r\n\r\n\r\n- **What happened?**\r\n- **What did you expect?**\r\n\r\n### Source code / logs\r\n\r\nPlease paste or attach the code or logs or traces that would be helpful to diagnose the issue you are reporting.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5476","RelatedDescription":"Closed issue \"Use runtime /dynamic created class object in prediction engine.\" (#5476)"},{"Id":"738884655","IsPullRequest":false,"CreatedAt":"2020-11-09T07:12:23","Actor":"cgyqu","Number":"5481","RawContent":null,"Title":"TimeSeries forecasting not work well ","State":"open","Body":"I use the following data format for time series forecasting.The data is on the half-hour dimension,and the forecasted column is `NextTimeCount`. \r\n\r\nUse data from the past 24 hours or more to predict the next hour data.\r\nNo matter how adjust the `windowSize` paramter, there is no good result.\r\n```\r\nYear,Time,RealCount,DropCount,TurnOnRate,ServiceRate,ProductRate,UsageRate,ShareRate,AHT,RealManCount,NextTimeCount,PreTimeCount,Month,Day,TotalCount,DayOfWeek\r\n2020,0,130,4,0.97,0.96,0.72,0.96,0.75,3.97,26,116,0,9,1,134,2\r\n2020,30,115,1,0.99,0.98,0.76,0.97,0.78,4.7,26,96,134,9,1,116,2\r\n2020,60,84,12,0.86,0.85,0.7,0.95,0.74,3.83,15,61,116,9,1,96,2\r\n2020,90,61,0,1,1,0.67,0.94,0.71,4.34,15,57,96,9,1,61,2\r\n2020,120,53,4,0.92,0.92,0.81,0.96,0.85,4.63,10,54,61,9,1,57,2\r\n```\r\nEven the predictions in the [example](https://github.com/dotnet/machinelearning-samples/tree/master/samples/csharp/end-to-end-apps/Forecasting-Sales)  are not very accurate,The prediction number is only half of regression model.\r\n![image](https://user-images.githubusercontent.com/6649024/98509295-eb6d0d80-229b-11eb-9931-b6a6df3d0483.png)\r\n\r\nAny suggestion?","Url":"https://github.com/dotnet/machinelearning/issues/5481","RelatedDescription":"Open issue \"TimeSeries forecasting not work well \" (#5481)"},{"Id":"738440404","IsPullRequest":false,"CreatedAt":"2020-11-08T10:58:54","Actor":"halcwb","Number":"5480","RawContent":null,"Title":"Suddenly unable to load DLL 'CpuMathNative' on F#","State":"open","Body":"### System information\r\n\r\n.NET Core SDK (reflecting any global.json):\r\n Version:   3.1.401\r\n Commit:    5b6f5e5005\r\n\r\nRuntime Environment:\r\n OS Name:     Windows\r\n OS Version:  10.0.19041\r\n OS Platform: Windows\r\n RID:         win10-x64\r\n Base Path:   C:\\Program Files\\dotnet\\sdk\\3.1.401\\\r\n\r\nHost (useful for support):\r\n  Version: 3.1.7\r\n  Commit:  fcfdef8d6b\r\n\r\n.NET Core SDKs installed:\r\n  2.1.801 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.802 [C:\\Program Files\\dotnet\\sdk]\r\n  2.2.401 [C:\\Program Files\\dotnet\\sdk]\r\n  2.2.402 [C:\\Program Files\\dotnet\\sdk]\r\n  3.1.102 [C:\\Program Files\\dotnet\\sdk]\r\n  3.1.401 [C:\\Program Files\\dotnet\\sdk]\r\n\r\n - Microsoft.ML 1.5.2\r\n - Microsoft.ML.FastTree 1.5.2\r\n - Microsoft.ML.Mkl.Components 1.5.2\r\n - Newtonsoft.Json 12.0.3\r\n - System.Threading.Channels 4.7.1\r\n - System.Memory 4.5.4\r\n - System.CodeDom 4.7.0\r\n - System.Reflection.Emit.Lightweight 4.7.0\r\n - Microsoft.ML.CpuMath 1.5.2\r\n - Microsoft.ML.DataView 1.5.2\r\n - Microsoft.ML.Mkl.Redist 1.5.2\r\n - System.Collections.Immutable 1.7.1\r\n - System.Reflection.Emit.ILGeneration 4.7.0\r\n - System.Threading.Tasks.Extensions 4.5.4\r\n - System.Runtime.CompilerServices.Unsafe 4.7.1\r\n - System.Buffers 4.5.1\r\n - System.Numerics.Vectors 4.5.0\r\n\r\n### Issue\r\n\r\n- **What did you do?**\r\nI tried to run a trainer `context.BinaryClassification.Trainers.SdcaLogisticRegression`. \r\n- **What happened?**\r\nWith the exact same code, on the exact same machine without any changes, first it ran without problems, then, suddenly I get:\r\n\r\n> Unable to load DLL 'CpuMathNative' or one of its dependencies\r\n\r\nI am absolutely sure that before I was able to use that trainer. \r\nI am absolutely sure that I did this using netstanderd2.0\r\nI also tried setting to netcoreapp3.1 and net72, with the same error.\r\n\r\nI DID NOT EVEN RESTART BUT THIS HAPPENED WHILE WORKING!!\r\n\r\nThis is weird???\r\n\r\n- **What did you expect?**\r\n\r\nTo be able to continue to run the same code on the same machine.\r\n\r\n### Source code / logs\r\n\r\n**Note** The below code DID RUN \r\n\r\n```fsharp\r\nopen Microsoft.ML\r\nopen Microsoft.ML.Data\r\n\r\nlet printDataMetrics (trainData : Data seq) (testData : Data seq) =\r\n    printfn \"*       Metrics for train and test data      \" \r\n    printfn \"*-----------------------------------------------------------\"\r\n    printfn \"*       Model trained with %i records\" (trainData |> Seq.length)\r\n    printfn \"*       Containing %i deaths\" (trainData |> Seq.filter (fun d -> d.Death) |> Seq.length)\r\n    printfn \"*       Model tested with %i records\" (testData |> Seq.length)\r\n    printfn \"*       Containing %i deaths\" (testData |> Seq.filter (fun d -> d.Death) |> Seq.length)\r\n    printfn \"\"\r\n    \r\n\r\nlet printCalibratedMetrics (metrics : CalibratedBinaryClassificationMetrics) =\r\n    printfn \"*       Metrics for binary classification model      \" \r\n    printfn \"*-----------------------------------------------------------\"\r\n    printfn \"*       Accuracy: %.3f\" metrics.Accuracy\r\n    printfn \"*       Area Under Roc Curve: %.3f\" metrics.AreaUnderRocCurve\r\n    printfn \"*       Area Under PrecisionRecall Curve: %.3f\" metrics.AreaUnderPrecisionRecallCurve\r\n    printfn \"*       F1 Score: %.3f\" metrics.F1Score\r\n    printfn \"*       LogLoss: %.3f\" metrics.LogLoss\r\n    printfn \"*       LogLoss Reduction: %.3f\" metrics.LogLossReduction\r\n    printfn \"*       Positive Precision: %.3f\" metrics.PositivePrecision\r\n    printfn \"*       Positive Recall: %.3f\" metrics.PositiveRecall\r\n    printfn \"*       Negative Precision: %.3f\" metrics.NegativePrecision\r\n    printfn \"*       Negative Recall: %.3f\" metrics.NegativeRecall\r\n\r\nlet printNonCalibratedMetrics (metrics : BinaryClassificationMetrics) =\r\n    \r\n    printfn \"*       Metrics for binary classification model      \" \r\n    printfn \"*-----------------------------------------------------------\"\r\n    printfn \"*       Accuracy: %.3f\" metrics.Accuracy\r\n    printfn \"*       Area Under Roc Curve: %.3f\" metrics.AreaUnderRocCurve\r\n    printfn \"*       Area Under PrecisionRecall Curve: %.3f\" metrics.AreaUnderPrecisionRecallCurve\r\n    printfn \"*       F1 Score: %.3f\" metrics.F1Score\r\n    printfn \"*       Positive Precision: %.3f\" metrics.PositivePrecision\r\n    printfn \"*       Positive Recall: %.3f\" metrics.PositiveRecall\r\n    printfn \"*       Negative Precision: %.3f\" metrics.NegativePrecision\r\n    printfn \"*       Negative Recall: %.3f\" metrics.NegativeRecall\r\n\r\n// Calculate the model using the training data,\r\n// and test data for the metrics. Include the features\r\n// (Data column names) that has to be included in the model.\r\nlet calculate trainData testData features =\r\n    let context = MLContext()\r\n\r\n    let trainView = context.Data.LoadFromEnumerable trainData\r\n    let testView = context.Data.LoadFromEnumerable testData\r\n    \r\n    let pipeline =\r\n        let features = features |> Seq.toArray\r\n        EstimatorChain()\r\n            .Append(context.Transforms.Concatenate(\"Features\", features))\r\n            .Append(context.BinaryClassification.Trainers.SdcaLogisticRegression(\"Death\", \"Features\"))\r\n\r\n    let trained = pipeline.Fit(trainView)\r\n\r\n    let predicted = trained.Transform(testView)\r\n\r\n    let metrics = \r\n        //context.BinaryClassification.EvaluateNonCalibrated(data=predicted, labelColumnName=\"Death\", scoreColumnName=\"Score\")\r\n        context.BinaryClassification.Evaluate(data=predicted, labelColumnName=\"Death\", scoreColumnName=\"Score\")\r\n\r\n\r\n    printDataMetrics trainData testData\r\n    metrics\r\n    |> printCalibratedMetrics\r\n\r\n```","Url":"https://github.com/dotnet/machinelearning/issues/5480","RelatedDescription":"Open issue \"Suddenly unable to load DLL 'CpuMathNative' on F#\" (#5480)"},{"Id":"738139020","IsPullRequest":true,"CreatedAt":"2020-11-07T02:36:18","Actor":"mstfbl","Number":"5479","RawContent":null,"Title":"Added Linux & Mac changes for Arcade","State":"closed","Body":"This PR contains changes for Linux and Mac Arcade integrations, as well as Arcade benchmark/ performance testing changes.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5479","RelatedDescription":"Closed or merged PR \"Added Linux & Mac changes for Arcade\" (#5479)"},{"Id":"738136480","IsPullRequest":true,"CreatedAt":"2020-11-07T02:20:47","Actor":"mstfbl","Number":"5478","RawContent":null,"Title":"Linux & Mac changes for Arcade","State":"closed","Body":"This PR contains changes for Linux and Mac Arcade integrations, as well as Arcade benchmark/ performance testing changes.","Url":"https://github.com/dotnet/machinelearning/pull/5478","RelatedDescription":"Closed or merged PR \"Linux & Mac changes for Arcade\" (#5478)"},{"Id":"738114834","IsPullRequest":true,"CreatedAt":"2020-11-07T00:36:01","Actor":"michaelgsharp","Number":"5477","RawContent":null,"Title":"Windows CI working","State":"closed","Body":"Windows CI working. Mac and Linux will come later.","Url":"https://github.com/dotnet/machinelearning/pull/5477","RelatedDescription":"Closed or merged PR \"Windows CI working\" (#5477)"},{"Id":"736405475","IsPullRequest":true,"CreatedAt":"2020-11-06T19:01:18","Actor":"michaelgsharp","Number":"5475","RawContent":null,"Title":"Added test key.","State":"closed","Body":"Added back in the test key to fix the extension issue.","Url":"https://github.com/dotnet/machinelearning/pull/5475","RelatedDescription":"Closed or merged PR \"Added test key.\" (#5475)"},{"Id":"732842412","IsPullRequest":true,"CreatedAt":"2020-11-05T00:16:04","Actor":"frank-dong-ms","Number":"5468","RawContent":null,"Title":"fix issue 5020, allow ML.NET to load tf model with primitive input and output column","State":"closed","Body":"Fix issue 5020, enable tensorflow transformer take primitive type as input column.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5468","RelatedDescription":"Closed or merged PR \"fix issue 5020, allow ML.NET to load tf model with primitive input and output column\" (#5468)"},{"Id":"736350973","IsPullRequest":true,"CreatedAt":"2020-11-04T18:58:52","Actor":"Lynx1820","Number":"5474","RawContent":null,"Title":"Fix for #5469","State":"open","Body":"This PR fixes #5469. The issue is coming from the assumption that `ImageResizer` creates a separate `Bitmap`, but when image is already the target dimension `ImageResizer` actually simply returns the source image. Other image methods are likely to dispose of the source image. For example, in this test a getter method get's called twice, and on the second call the source image gets disposed, causing the error. \r\n\r\nA transformer should only be responsible of disposing the objects it creates. One attempt to solve this issue was to keep track of the last Bitmap created to ensure we don't dispose of an object that was not created within  `ImageResizer.` However, the issue encountered with this approach is that the object created by another transformer may be deleted if that transform gets called again. This happens because the source buffers get reused, so image transforms will dispose the previous source image object when they get called again.  \r\n\r\n\r\nhttps://github.com/dotnet/machinelearning/blob/master/src/Microsoft.ML.ImageAnalytics/ImageLoader.cs#L238","Url":"https://github.com/dotnet/machinelearning/pull/5474","RelatedDescription":"Open PR \"Fix for #5469\" (#5474)"},{"Id":"735932441","IsPullRequest":false,"CreatedAt":"2020-11-04T17:38:26","Actor":"fuomag9","Number":"5473","RawContent":null,"Title":"Is it possible to convert a ml.net model (.zip) to ONNX or tensorflow model?","State":"closed","Body":"### System information\r\n\r\n- **Win 10 10.0.19041**:\r\n- **.NET Version 3.1.402**: \r\n\r\n### Issue\r\n\r\nIs it possible to convert a ml.net model (.zip) to ONNX or tensorflow model? I've found various APIs but they were either removed or I didn't know how to make them work.\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5473","RelatedDescription":"Closed issue \"Is it possible to convert a ml.net model (.zip) to ONNX or tensorflow model?\" (#5473)"},{"Id":"735708463","IsPullRequest":true,"CreatedAt":"2020-11-03T23:45:11","Actor":"mstfbl","Number":"5472","RawContent":null,"Title":"Arcade CI Testing","State":"open","Body":"Arcade CI Testing Draft PR","Url":"https://github.com/dotnet/machinelearning/pull/5472","RelatedDescription":"Open PR \"Arcade CI Testing\" (#5472)"},{"Id":"731603007","IsPullRequest":true,"CreatedAt":"2020-11-03T21:16:16","Actor":"michaelgsharp","Number":"5464","RawContent":null,"Title":"The `-test` command for windows. Nuget packages","State":"closed","Body":"The `-test` command works for windows. CI doesn't work yet as the CI pipeline hasn't been updated. Neither does nightly.\r\n\r\nNuget packages can now be created. Symbols packages are not working yet.","Url":"https://github.com/dotnet/machinelearning/pull/5464","RelatedDescription":"Closed or merged PR \"The `-test` command for windows. Nuget packages\" (#5464)"},{"Id":"733837804","IsPullRequest":false,"CreatedAt":"2020-11-03T18:56:51","Actor":"liugaocn","Number":"5470","RawContent":null,"Title":"No multinomial logistic regression algorithm","State":"closed","Body":"I didn't find multinomial logistic regression algorithm. Is it with a different name?\r\n\r\nMultinomial logistic regression is used to predict probabilities for more than two classes.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/issues/5470","RelatedDescription":"Closed issue \"No multinomial logistic regression algorithm\" (#5470)"},{"Id":"728773405","IsPullRequest":false,"CreatedAt":"2020-11-02T21:10:20","Actor":"deiruch","Number":"5456","RawContent":null,"Title":"Doc: Example for LoadRawImageBytes does not contain a call to LoadRawImageBytes","State":"closed","Body":"\r\nThe example shown in the documentation of the LoadRawImageBytes method does not contain a single reference to this method. I think an example calling this method would be more helpful.\r\n\r\n\r\n---\r\n#### Document Details\r\n\r\n⚠ *Do not edit this section. It is required for docs.microsoft.com ➟ GitHub issue linking.*\r\n\r\n* ID: 935b3cba-8385-d7b1-0d1c-92ce1e5b6bef\r\n* Version Independent ID: f4c01ba9-1f3e-03fa-48ea-1a62a13e11b4\r\n* Content: [ImageEstimatorsCatalog.LoadRawImageBytes(TransformsCatalog, String, String, String) Method (Microsoft.ML)](https://docs.microsoft.com/en-us/dotnet/api/microsoft.ml.imageestimatorscatalog.loadrawimagebytes?view=ml-dotnet)\r\n* Content Source: [dotnet/xml/Microsoft.ML/ImageEstimatorsCatalog.xml](https://github.com/dotnet/ml-api-docs/blob/live/dotnet/xml/Microsoft.ML/ImageEstimatorsCatalog.xml)\r\n* Product: **dotnet-ml-api**\r\n* GitHub Login: @natke\r\n* Microsoft Alias: **nakersha**","Url":"https://github.com/dotnet/machinelearning/issues/5456","RelatedDescription":"Closed issue \"Doc: Example for LoadRawImageBytes does not contain a call to LoadRawImageBytes\" (#5456)"},{"Id":"730729894","IsPullRequest":true,"CreatedAt":"2020-11-02T19:29:53","Actor":"Lynx1820","Number":"5460","RawContent":null,"Title":"Changing LoadRawImages Sample","State":"closed","Body":"To resolve issue #5456\r\n\r\nSince the image is raw, what other info should I print to make this sample more useful? ","Url":"https://github.com/dotnet/machinelearning/pull/5460","RelatedDescription":"Closed or merged PR \"Changing LoadRawImages Sample\" (#5460)"},{"Id":"731400231","IsPullRequest":false,"CreatedAt":"2020-11-02T18:55:54","Actor":"PMGruber","Number":"5463","RawContent":null,"Title":"How to read all data from output shapes of a node?","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**:\r\nWindows 10\r\n- **.NET Version**: \r\n.net Core 3.1\r\n- **ML.NET Version**:\r\nML.NET 1.5.2 \r\n- **Further packages**:\r\nSciSharp.TensorFlow.Redist 2.3.1\r\n\r\n### Issue\r\n\r\n- **What did you do?**\r\nWith my ML.NET code I load an existing TensorFlow Model for object detection and run it. It's an own pretrained model and there is no further training in my code. The execution of the model works fine. The model provides several result information: coordinates, confidences, class ids, number of found objects\r\n- **What happened?**\r\nWhen I try to read data after inference I only get coordinates.\r\n- **What did you expect?**\r\nGetting all data of node.\r\n\r\n### Source code / logs\r\nThe special thing about the model is the shape of output node. In all examples I saw so far, it was always e.g. a list of floats. In this specific model the shape are several lists containing the data.\r\n\r\nWhen I have a look at the output node of the model with Netron it looks like this\r\n![image](https://user-images.githubusercontent.com/8576966/97433888-7ce49300-191e-11eb-9500-207614a7130d.png)\r\n\r\nMy colleagues, consuming the model with python, just call it with something like\r\n`coords, confidence, class_ids,  nums  = model( input_image)`\r\nand receive the results. \r\n\r\nSo far I defined my result class as\r\n```C#\r\npublic class ImagePrediction\r\n{\r\n    [ColumnName(\"StatefulPartitionedCall\")]\r\n    public float[] Coordinates;\r\n}\r\n```\r\nso it makes sense that only the first list is available as result.\r\n\r\nUnfortunately I have no idea what I have do change to get all provided information in ML.NET\r\n\r\nRest of execution code is quite the same like classification sample with a TensorFlow model.\r\n\r\nI uploaded model and code to a repository. Since I am not allowed to make the model public, it is a private repo. Please let me know when someone wants to have a deeper look in code/model.\r\n\r\nI appreciate any ideas what I can try or even if it is possible/supported at all.\r\n\r\nThanks and regards","Url":"https://github.com/dotnet/machinelearning/issues/5463","RelatedDescription":"Closed issue \"How to read all data from output shapes of a node?\" (#5463)"},{"Id":"731805648","IsPullRequest":false,"CreatedAt":"2020-11-02T18:30:22","Actor":"devedse","Number":"5466","RawContent":null,"Title":"Trying to implement YoloV4 in ML.NET but running into some trouble (I'm quite new to all of this)","State":"closed","Body":"### System information\r\n\r\n- **OS version/distro**: Windows 10 20H2\r\n- **.NET Version (eg., dotnet --info)**: 3.1.9\r\n\r\n### Introduction\r\n\r\nI'm currently trying to use the YoloV4 model inside ML.NET but whenever I try to put an image through the model I get very strange results from the model. (It mainly finds backpacks, handbags, some apples and some other unexpected results). The image I'm using:\r\n![dog](https://user-images.githubusercontent.com/2350015/97497833-66185d80-196b-11eb-8c96-ce7ed676cbd6.jpg)\r\n\r\nI created a repository to reproduce my issue as well:\r\nhttps://github.com/devedse/DeveMLNetTest\r\n\r\nDisclaimer: I'm quite new to all of this :smile:\r\n\r\n### Steps I've taken\r\n\r\nI first wanted to obtain a pre-trained model which I was sure worked so I did the following steps:\r\n1. Cloned: https://github.com/Tianxiaomo/pytorch-YOLOv4\r\n1. Installed requirements + pytorch + cuda etc.\r\n1. Downloaded the Yolov4_epoch1.pth model and put it in `checkpoints\\Yolov4_epoch1.pth`\r\n1. Ran `demo_pytorch2onnx.py` with debug enabled.\r\n\r\nWhen you do this you can step through the code where the output from the model is parsed (this shows the labels for all boxes with a confidence higher then 0.6):\r\n![image](https://user-images.githubusercontent.com/2350015/97498111-e212a580-196b-11eb-83b3-013f905eec5e.png)\r\n\r\nWhen we look up these labels, we can see that (all +1 since it's a 0-index array):\r\n```\r\n1: bicycle\r\n8: truck\r\n16: dog\r\n```\r\n\r\nSo the results in Python seem to be correct. This python script first converts the model to an ONNX model and then uses that model to do the inference.\r\n\r\nWhen I now start using the model inside C# though and try to parse through the results in exactly the same way I find completely different results:\r\n![image](https://user-images.githubusercontent.com/2350015/97498763-0622b680-196d-11eb-91b9-bb02374e7e39.png)\r\n\r\nCould it be that the model is somehow creating garbage data?\r\n\r\nAnyway, here's the code that I'm \r\n\r\nMLContext:\r\n```\r\nvar pipeline = mlContext.Transforms.LoadImages(outputColumnName: \"image\", imageFolder: \"\", inputColumnName: nameof(ImageNetData.ImagePath))\r\n                .Append(mlContext.Transforms.ResizeImages(outputColumnName: \"image\", imageWidth: ImageNetSettings.imageWidth, imageHeight: ImageNetSettings.imageHeight, inputColumnName: \"image\"))\r\n                .Append(mlContext.Transforms.ExtractPixels(outputColumnName: \"input\", inputColumnName: \"image\"))\r\n                .Append(mlContext.Transforms.ApplyOnnxModel(\r\n                    modelFile: modelLocation,\r\n                    outputColumnNames: new[] { \"boxes\", \"confs\" },\r\n                    inputColumnNames: new[] { \"input\" }\r\n                    ));\r\n```\r\n\r\nCode to parse model output:\r\n```\r\npublic IList<YoloBoundingBox> ParseOutputs(float[] boxes, float[] confs, float threshold = .6F)\r\n{\r\n\tvar boxesUnflattened = new List<BoundingBoxDimensions>();\r\n\tfor (int i = 0; i < boxes.Length; i += 4)\r\n\t{\r\n\t\tboxesUnflattened.Add(new BoundingBoxDimensions()\r\n\t\t{\r\n\t\t\tX = boxes[i],\r\n\t\t\tY = boxes[i + 1],\r\n\t\t\tWidth = boxes[i + 2] - boxes[i],\r\n\t\t\tHeight = boxes[i + 3] - boxes[i + 1],\r\n\t\t\tOriginalStuff = boxes.Skip(i).Take(4).ToArray()\r\n\t\t});\r\n\t}\r\n\r\n\tvar confsUnflattened = new List<float[]>();\r\n\tfor (int i = 0; i < confs.Length; i += 80)\r\n\t{\r\n\t\tconfsUnflattened.Add(confs.Skip(i).Take(80).ToArray());\r\n\t}\r\n\r\n\tvar maxConfidencePerBox = confsUnflattened.Select(t => t.Select((n, i) => (Number: n, Index: i)).Max()).ToList();\r\n\tvar boxesNumbered = boxesUnflattened.Select((b, i) => (Box: b, Index: i)).ToList();\r\n\r\n\tvar boxesIndexWhichHaveHighConfidence = maxConfidencePerBox.Where(t => t.Number > threshold).ToList();\r\n\tvar allBoxesThemselvesWithHighConfidence = boxesIndexWhichHaveHighConfidence.Join(boxesNumbered, t => t.Index, t => t.Index, (l, r) => (Box: r, Conf: l)).ToList();\r\n\r\n\r\n\tConsole.WriteLine(\"I would expect a bike, dog and car here\");\r\n\tConsole.WriteLine(\"Instead we got:\");\r\n\r\n\tforeach (var b in allBoxesThemselvesWithHighConfidence)\r\n\t{\r\n\t\tvar startString = $\"{b.Conf.Number}: {labels[b.Conf.Index]}\";\r\n\t\tConsole.WriteLine($\"{startString.PadRight(30, ' ')}({string.Join(\",\", b.Box.Box.OriginalStuff)})\");\r\n\t}\r\n\r\n\tthrow new InvalidOperationException(\"Everything below this doesn't work anyway\");\r\n```\r\n\r\nCan someone give me some hints / ideas on why I could be running into this issue?\r\n\r\nAlso feel free to clone the repo and press F5. It should simply build / run.\r\nhttps://github.com/devedse/DeveMLNetTest","Url":"https://github.com/dotnet/machinelearning/issues/5466","RelatedDescription":"Closed issue \"Trying to implement YoloV4 in ML.NET but running into some trouble (I'm quite new to all of this)\" (#5466)"},{"Id":"731667035","IsPullRequest":false,"CreatedAt":"2020-10-30T23:14:05","Actor":"pavel-rev","Number":"5465","RawContent":null,"Title":"Bayesian Optimization with Gaussian Processes","State":"closed","Body":"Are there any implementations of aforementioned methods with \"same process space\" interface to C# by Microsoft or Microsoft sponsored project or similar? Basically I am interested in anything solid/more or less ready to be used \"out of the box\". Tree-based regression under the hood will also work.","Url":"https://github.com/dotnet/machinelearning/issues/5465","RelatedDescription":"Closed issue \"Bayesian Optimization with Gaussian Processes\" (#5465)"},{"Id":"731089609","IsPullRequest":true,"CreatedAt":"2020-10-30T20:09:44","Actor":"antoniovs1029","Number":"5462","RawContent":null,"Title":"Add AutoML culture issue test","State":"closed","Body":"Follow up of #5163 \r\n\r\nHere I add the changes on PR #5163 and a test to actually show that the changes worked correctly. The plan is to merge that other PR and then add this PR for the test.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5462","RelatedDescription":"Closed or merged PR \"Add AutoML culture issue test\" (#5462)"},{"Id":"728633113","IsPullRequest":true,"CreatedAt":"2020-10-30T18:02:44","Actor":"frank-dong-ms","Number":"5455","RawContent":null,"Title":"handle exception during GetNextPipeline for AutoML","State":"closed","Body":"fix part of issue found from #5428 \r\n\r\nhandle exception during GetNextPipeline for AutoML experiment to avoid exception crash the whole AutoML pipeline.\r\n\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5455","RelatedDescription":"Closed or merged PR \"handle exception during GetNextPipeline for AutoML\" (#5455)"},{"Id":"733080581","IsPullRequest":false,"CreatedAt":"2020-10-30T11:00:23","Actor":"BobLd","Number":"5469","RawContent":null,"Title":"ResizeImages() raise System.ArgumentException when resizing image already at correct size","State":"open","Body":"### System information\r\n\r\n- **OS version/distro**: Windows 10, 10.0.19041\r\n- **.NET Version (eg., dotnet --info)**:  .NET Core 3.1.403\r\n\r\n### Issue\r\n\r\n- **What did you do?**\r\nDoing inference on an image, with `ResizeImages()` part of the pipeline. The processed image is already at the correct size (1300x1300, i.e. no resizing needed). Also occurs with different pipeline/images when image already at `ResizeImages()` output size.\r\n\r\n- **What happened?**\r\nProgram raised an exception: `System.ArgumentException: 'Parameter is not valid.'`\r\n(No exception for other images, and for same image with a different size).\r\n\r\n- **What did you expect?**\r\nNo exception.\r\n\r\n### Source code / logs\r\n```csharp\r\n// Define scoring pipeline\r\nvar pipeline = mlContext.Transforms.ResizeImages(inputColumnName: \"bitmap\", outputColumnName: \"image\",\r\n                                             imageWidth: 1300, imageHeight: 1300,\r\n                                             resizing: ResizingKind.IsoPad)\r\n                            .Append(mlContext.Transforms.ExtractPixels(outputColumnName: \"image\", scaleImage: 1f / 255f))\r\n                            .Append(mlContext.Transforms.ApplyOnnxModel(inputColumnNames: new[] { \"image\" },\r\n                                                                        outputColumnNames: new[] { \"boxes\", \"labels\", \"scores\", \"masks\" },\r\n                                                                        modelFile: modelLocation));\r\n// Fit on empty list to obtain input data schema\r\nvar model = pipeline.Fit(mlContext.Data.LoadFromEnumerable(new List<InputBitmapData>()));\r\n\r\n// Create prediction engine\r\nvar predictionEngine = mlContext.Model.CreatePredictionEngine<InputBitmapData, OutputPrediction>(model);\r\n\r\nusing (var bitmap = new Bitmap(Image.FromFile(imagePath)))\r\n{\r\n      var prediction = predictionEngine.Predict(new InputBitmapData() { Image = bitmap }); // <- error raised\r\n}\r\n\r\n```\r\n\r\n```\r\nSystem.ArgumentException\r\n  HResult=0x80070057\r\n  Message=Parameter is not valid.\r\n  Source=System.Drawing.Common\r\n  StackTrace:\r\n   at System.Drawing.Image.get_Height()\r\n   at Microsoft.ML.Transforms.Image.ImageResizingTransformer.Mapper.<>c__DisplayClass3_0.<MakeGetter>b__1(Bitmap& dst)\r\n   at Microsoft.ML.Transforms.Image.ImagePixelExtractingTransformer.Mapper.<>c__DisplayClass5_0`1.<GetGetterCore>b__1(VBuffer`1& dst)\r\n   at Microsoft.ML.Transforms.Onnx.OnnxTransformer.Mapper.NamedOnnxValueGetterVec`1.GetNamedOnnxValue()\r\n   at Microsoft.ML.Transforms.Onnx.OnnxTransformer.Mapper.UpdateCacheIfNeeded(Int64 position, INamedOnnxValueGetter[] srcNamedOnnxValueGetters, String[] activeOutputColNames, OnnxRuntimeOutputCacher outputCache)\r\n   at Microsoft.ML.Transforms.Onnx.OnnxTransformer.Mapper.<>c__DisplayClass12_0`1.<MakeTensorGetter>b__0(VBuffer`1& dst)\r\n   at Microsoft.ML.Data.TypedCursorable`1.TypedRowBase.<>c__DisplayClass8_0`1.<CreateDirectVBufferSetter>b__0(TRow row)\r\n   at Microsoft.ML.Data.TypedCursorable`1.TypedRowBase.FillValues(TRow row)\r\n   at Microsoft.ML.Data.TypedCursorable`1.RowImplementation.FillValues(TRow row)\r\n   at Microsoft.ML.PredictionEngineBase`2.FillValues(TDst prediction)\r\n   at Microsoft.ML.PredictionEngine`2.Predict(TSrc example, TDst& prediction)\r\n   at Microsoft.ML.PredictionEngineBase`2.Predict(TSrc example)\r\n```\r\n\r\nGuess: the problem might come from here:\r\nhttps://github.com/dotnet/machinelearning/blob/a9ab7fc530ba9a2a519aaca70862ee67f42bf712/src/Microsoft.ML.ImageAnalytics/ImageResizer.cs#L301-L305","Url":"https://github.com/dotnet/machinelearning/issues/5469","RelatedDescription":"Open issue \"ResizeImages() raise System.ArgumentException when resizing image already at correct size\" (#5469)"},{"Id":"729845023","IsPullRequest":false,"CreatedAt":"2020-10-30T02:12:56","Actor":"karanjakhar","Number":"5458","RawContent":null,"Title":"Error while loading yolov4 model ","State":"closed","Body":"![Screenshot from 2020-10-27 00-56-53](https://user-images.githubusercontent.com/29913676/97219090-84594e80-17ef-11eb-923e-7e9dfda0d3f7.png)\r\nI am new to this. I have experience with Python but with this, I have no idea. Please help. What is this error indicating?","Url":"https://github.com/dotnet/machinelearning/issues/5458","RelatedDescription":"Closed issue \"Error while loading yolov4 model \" (#5458)"},{"Id":"731822738","IsPullRequest":true,"CreatedAt":"2020-10-29T04:10:28","Actor":"mstfbl","Number":"5467","RawContent":null,"Title":"Fixed MacOS daily & nightly builds due to Homebrew bug","State":"closed","Body":"Similar to Issue #5457, the nightly ML.NET MacOS builds are failing due to the `openssl` package that is due to be removed from the MacOS images and an outdated standard Homebrew installation on CI's MacOS images, as discussed in the original MacOS-Homebrew GitHub [issue](https://github.com/actions/virtual-environments/issues/1811). This PR adds the fix for this issue.\r\n\r\nIt is said [in this comment](https://github.com/actions/virtual-environments/issues/1811#issuecomment-717348403) that the fix for this issue will be deployed in a few days, until which the changes in this PR will remain on main.","Url":"https://github.com/dotnet/machinelearning/pull/5467","RelatedDescription":"Closed or merged PR \"Fixed MacOS daily & nightly builds due to Homebrew bug\" (#5467)"},{"Id":"731013105","IsPullRequest":true,"CreatedAt":"2020-10-28T01:58:08","Actor":"mstfbl","Number":"5461","RawContent":null,"Title":"Debugging Arcade MacOS","State":"open","Body":"Debugging Arcade MacOS runs to see run results on CI, and to see potential differences between local vs CI runs.\r\n","Url":"https://github.com/dotnet/machinelearning/pull/5461","RelatedDescription":"Open PR \"Debugging Arcade MacOS\" (#5461)"},{"Id":"729300422","IsPullRequest":true,"CreatedAt":"2020-10-26T17:34:36","Actor":"mstfbl","Number":"5457","RawContent":null,"Title":"Fixed MacOS CI Pipeline builds","State":"closed","Body":"This PR adds build workarounds for the recently-failing MacOS builds. As discussed in the main MacOS-Homebrew GitHub [issue](https://github.com/actions/virtual-environments/issues/1811), the `openssl` package that is due to be removed from the MacOS images and an outdated standard Homebrew installation on CI's MacOS images were causing the builds to fail.","Url":"https://github.com/dotnet/machinelearning/pull/5457","RelatedDescription":"Closed or merged PR \"Fixed MacOS CI Pipeline builds\" (#5457)"}],"ResultType":"GitHubIssue"}},"RunOn":"2020-11-13T05:30:37.1327816Z","RunDurationInMilliseconds":704}