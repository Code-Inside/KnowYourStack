{"Data":{"GitHub":{"Issues":[{"Id":"708252482","IsPullRequest":false,"CreatedAt":"2020-09-25T02:02:50","Actor":"AdamYoblick","Number":"3998","RawContent":null,"Title":"Update intellisense package","State":"closed","Body":"Intellisense package needs to be updated for winforms and wpf. Doing winforms first, then will work with the wpf team.","Url":"https://github.com/dotnet/winforms/issues/3998","RelatedDescription":"Closed issue \"Update intellisense package\" (#3998)"},{"Id":"708455160","IsPullRequest":true,"CreatedAt":"2020-09-25T01:52:53","Actor":"AdamYoblick","Number":"4004","RawContent":null,"Title":"use new intellisense blob, change package composition logic (#3999)","State":"closed","Body":"Cherry pick https://github.com/dotnet/winforms/commit/4bdf29eef947200c946ca7f295b47fe829bed41f from master\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/4004)","Url":"https://github.com/dotnet/winforms/pull/4004","RelatedDescription":"Closed or merged PR \"use new intellisense blob, change package composition logic (#3999)\" (#4004)"},{"Id":"707790077","IsPullRequest":true,"CreatedAt":"2020-09-25T01:04:39","Actor":"JeremyKuhne","Number":"3994","RawContent":null,"Title":"Add regression test for ToolStrip","State":"closed","Body":"Adds basic clipping support to the EMF validation system and a validation test for the background rendering of ToolStrip.\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3994)","Url":"https://github.com/dotnet/winforms/pull/3994","RelatedDescription":"Closed or merged PR \"Add regression test for ToolStrip\" (#3994)"},{"Id":"708523113","IsPullRequest":true,"CreatedAt":"2020-09-25T00:32:30","Actor":"JeremyKuhne","Number":"4005","RawContent":null,"Title":"Adding more diagnostics around device contexts","State":"closed","Body":"- Add debug HDC validation in DeviceContextHdcScope\r\n- Remove TextRenderer tests that gave back invalid HDCs (dangerous)\r\n- Add some of the CLR HRESULT defines\r\n- Add other validation around HDC places we're seeing failures in CI\r\n- Check for platform in tests that depend on it as in VS they always run (condition isn't honored)\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/4005)","Url":"https://github.com/dotnet/winforms/pull/4005","RelatedDescription":"Closed or merged PR \"Adding more diagnostics around device contexts\" (#4005)"},{"Id":"708525963","IsPullRequest":true,"CreatedAt":"2020-09-25T00:05:33","Actor":"dotnet-maestro[bot]","Number":"4006","RawContent":null,"Title":"[release/5.0-rc2] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: c5389e69-a40e-47fd-afe1-08d849eee71f\r\n- **Build**: 20200924.8\r\n- **Date Produced**: 9/24/2020 10:38 PM\r\n- **Commit**: e9ac240eaa36fa0b324ff4432e45d1fbc1e5b290\r\n- **Branch**: refs/heads/release/5.0-rc2\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **System.Configuration.ConfigurationManager**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.CodeDom**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.App**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.Targets**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.Win32.Registry**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Security.Cryptography.Xml**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Security.Permissions**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Security.Principal.Windows**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Text.Encodings.Web**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Security.Cryptography.Cng**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Text.Json**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Windows.Extensions**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Threading.AccessControl**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Security.AccessControl**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Diagnostics.EventLog**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.DirectoryServices**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Drawing.Common**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.IO.Packaging**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.Resources.Extensions**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 5.0.0-rc.2.20474.5 to 5.0.0-rc.2.20474.8][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/16ad84f...e9ac240\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/4006)","Url":"https://github.com/dotnet/winforms/pull/4006","RelatedDescription":"Closed or merged PR \"[release/5.0-rc2] Update dependencies from dotnet/runtime\" (#4006)"},{"Id":"708262622","IsPullRequest":true,"CreatedAt":"2020-09-24T20:26:35","Actor":"AdamYoblick","Number":"3999","RawContent":null,"Title":"use new intellisense blob, change package composition logic","State":"closed","Body":"Fixes #3998\r\n\r\nThere are two main changes going on in this PR:\r\n\r\n1. Consume the new dotnet-api-docs_net5.0 blob, which has already been uploaded to Azure storage\r\n2. Make our package ALWAYS use the xml from this blob instead of our locally generated xml.\r\n   - If we build a non-facade assembly, and the blob does NOT contain xml for this assembly, this is an error\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3999)","Url":"https://github.com/dotnet/winforms/pull/3999","RelatedDescription":"Closed or merged PR \"use new intellisense blob, change package composition logic\" (#3999)"},{"Id":"708402587","IsPullRequest":true,"CreatedAt":"2020-09-24T18:57:34","Actor":"kpreisser","Number":"4003","RawContent":null,"Title":"Use function pointers for native TaskDialog and Enum*Windows callbacks","State":"open","Body":"## Proposed changes\r\n\r\n- Use function pointers instead of delegates in the `TaskDialog` and `EnumWindows`/`EnumThreadWindows`/`EnumChildWindows` callbacks, to reduce interop overhead and simplify the code.\r\n\r\nFor native callbacks that allow to pass user-defined reference data, we can use function pointers of static methods in order to simplify the code and improve performance, as described in [Improvements in native code interop in .NET 5.0](https://devblogs.microsoft.com/dotnet/improvements-in-native-code-interop-in-net-5-0/):\r\n> The most obvious change is that the allocation of a delegate is no longer needed. By requiring that the function only have blittable arguments, the runtime does not need to do any marshalling, so the only requirement for entering the function is a GC transition to cooperative mode. The restriction of not allowing the function to be called from managed code means that the JIT-ed function itself can do the GC transition. The function pointer for Callback above actually points directly to the JIT-ed function. The extra error-prone code for keeping the delegate alive is no longer needed either.\r\n\r\nThe callbacks for `Enum*Windows()` were already changed to static methods with #2639 (using a `GCHandle` to pass the actual instance as `IntPtr`), so we can also use a function pointer for them.\r\n\r\nHowever, in my testing with `EnumWindows` (that calls the callback about 200 times) I did not observe any noticable difference in performance before/after switching to function pointers.\r\n\r\n**Note:** The code which creates the function pointer currently contains two additional casts as the compiler doesn't yet seem to be able to determine the unmanaged calling convention (stdcall on Windows) of the static method specified with the `UnmanagedCallersOnlyAttribute`:\r\n```cs\r\n    // TODO: Remove casts once the compiler correctly detects the [UnmanagedCallersOnly]\r\n    // attribute and this line no longer compiles.\r\n    return EnumWindows((delegate* unmanaged<IntPtr, IntPtr, BOOL>)(delegate*<IntPtr, IntPtr, BOOL>)&HandleEnumWindowsNativeCallback, (IntPtr)gcHandle);\r\n```\r\n\r\nBecause of these casts, once the compiler is updated and correctly determines the calling convention, it could happen that the code starts to fail to compile until these additional casts are removed. Maybe wait until this is fixed in the compiler before merging this.\r\n\r\n\r\n<!-- We are in TELL-MODE the following section must be completed -->\r\n\r\n## Customer Impact\r\n\r\n- None\r\n\r\n## Regression? \r\n\r\n-  No\r\n\r\n## Risk\r\n\r\n-\r\n\r\n## Test methodology <!-- How did you ensure quality? -->\r\n\r\n- Calling the native functions where a callback is passsed to (`TaskDialogIndirect`, `EnumWindows`, `EnumThreadWindows`, `EnumChildWindows`) using `x86` and `x64` architectures and verified that the callbacks are called correctly.\r\n\r\n<!-- end TELL-MODE -->\r\n\r\n\r\n\r\n## Test environment(s) <!-- Remove any that don't apply -->\r\n\r\n- <!-- use `dotnet --info` -->\r\n\r\n.NET SDK (reflecting any global.json):\r\n Version:   6.0.100-alpha.1.20472.11\r\n Commit:    e55929c5a5\r\n\r\nRuntime Environment:\r\n OS Name:     Windows\r\n OS Version:  10.0.18363\r\n OS Platform: Windows\r\n RID:         win10-x64\r\n Base Path:   C:\\Program Files\\dotnet\\sdk\\6.0.100-alpha.1.20472.11\\\r\n\r\nHost (useful for support):\r\n  Version: 6.0.0-alpha.1.20468.7\r\n  Commit:  a820ca1c4f\r\n\r\n.NET SDKs installed:\r\n  5.0.100-rc.1.20452.10 [C:\\Program Files\\dotnet\\sdk]\r\n  6.0.100-alpha.1.20472.11 [C:\\Program Files\\dotnet\\sdk]\r\n<!-- Mention language, UI scaling, or anything else that might be relevant -->\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/4003)","Url":"https://github.com/dotnet/winforms/pull/4003","RelatedDescription":"Open PR \"Use function pointers for native TaskDialog and Enum*Windows callbacks\" (#4003)"},{"Id":"708385352","IsPullRequest":true,"CreatedAt":"2020-09-24T18:53:20","Actor":"dotnet-maestro[bot]","Number":"4002","RawContent":null,"Title":"[release/5.0-rc2] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: c5389e69-a40e-47fd-afe1-08d849eee71f\r\n- **Build**: 20200924.5\r\n- **Date Produced**: 9/24/2020 5:51 PM\r\n- **Commit**: 16ad84f77ed8e936e554fafbe452cf59246c93ea\r\n- **Branch**: refs/heads/release/5.0-rc2\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.CodeDom**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.Win32.Registry**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.App**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.Targets**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Security.Cryptography.Cng**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Security.Cryptography.Xml**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Security.Permissions**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Security.Principal.Windows**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Security.AccessControl**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Text.Encodings.Web**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Threading.AccessControl**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Windows.Extensions**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Text.Json**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Resources.Extensions**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Diagnostics.EventLog**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.DirectoryServices**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Drawing.Common**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.IO.Packaging**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 5.0.0-rc.2.20473.9 to 5.0.0-rc.2.20474.5][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/4676471...16ad84f\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/4002)","Url":"https://github.com/dotnet/winforms/pull/4002","RelatedDescription":"Closed or merged PR \"[release/5.0-rc2] Update dependencies from dotnet/runtime\" (#4002)"},{"Id":"707769966","IsPullRequest":true,"CreatedAt":"2020-09-24T18:16:14","Actor":"JeremyKuhne","Number":"3993","RawContent":null,"Title":"Apply clipping and translation transforms correctly (#3990)","State":"closed","Body":"#### Port of #3990 fix for #3975\r\n\r\nLogic was off for some of the cases where we set up an `HDC` for drawing and we weren't applying clipping or translation transforms when we needed to. For the `ToolStrip` this causes the background of the parent to fill over the `ToolStrip` background.\r\n\r\nThis has implications for most rendering where a clip or transform is applied.\r\n\r\nAdd tests for the `HDC` handling struct to validate application of `Graphics` properties.\r\n\r\nFixes #3975\r\n\r\n\r\n## Proposed changes\r\n\r\n- Fix logic in `DeviceContextHDCScope`\r\n- Add tests for property application\r\n\r\n## Customer Impact\r\n\r\n- Background color isn't visible in Toolstrip (possibly other internal controls, testing hasn't surfaced any others yet)\r\n- Customer or control vendor's controls that utilize clipping or origin transforms may not render correctly if they utilize ControlPaint or base class rendering\r\n\r\n## Regression? \r\n\r\n- Yes\r\n\r\n## Risk\r\n\r\n- Low\r\n\r\n## Screenshots\r\n\r\n### Before\r\n\r\nVisual styles enabled and disabled; Professional and ManagerRenderMode RenderMode\r\n![image](https://user-images.githubusercontent.com/8184940/94067041-25448c00-fda2-11ea-8a8a-67cb7b96170b.png)\r\n\r\n\r\n### After\r\n\r\nVisual styles enabled and disabled; Professional and ManagerRenderMode RenderMode\r\n![image](https://user-images.githubusercontent.com/8184940/94068165-afd9bb00-fda3-11ea-9a11-130b60d6c58b.png)\r\n\r\n\r\n`RenderMode.System` (not the default) was validated to be unimpacted by this change.\r\n\r\n## Test methodology <!-- How did you ensure quality? -->\r\n\r\n- Manually validated screen shots for various permutations\r\n- Wrote regression tests for HDC/Graphics property application\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3993)","Url":"https://github.com/dotnet/winforms/pull/3993","RelatedDescription":"Closed or merged PR \"Apply clipping and translation transforms correctly (#3990)\" (#3993)"},{"Id":"708305220","IsPullRequest":false,"CreatedAt":"2020-09-24T16:18:54","Actor":"hughbe","Number":"4001","RawContent":null,"Title":"ListViewGroupCollection.Add can cause corruption adding a group already added to another ListView","State":"open","Body":"* .NET Core Version: \r\nMaster\r\n\r\n* Have you experienced this same bug with .NET Framework?: \r\nYes\r\n\r\n**Problem description:**\r\n\r\n- Add a `ListViewGroup` to `listView1.Groups`\r\n- Add the same `ListViewGroup` to `listView2.Groups`\r\n\r\nSee below test: it is very odd that `group.ListView == otherListView` but both `otherListView.Groups` and  `listView.Groups` contain `group`\r\n\r\n```cs\r\n[WinFormsFact]\r\npublic void ListViewGroupCollection_Addd_AlreadyInOtherCollection_GetReturnsExpected()\r\n{\r\n    using var listView = new ListView();\r\n    ListViewGroupCollection collection = listView.Groups;\r\n\r\n    using var otherListView = new ListView();\r\n    ListViewGroupCollection otherCollection = otherListView.Groups;\r\n\r\n    var group = new ListViewGroup();\r\n    otherCollection.Add(group);\r\n\r\n    // The group appears to belong to two list views.\r\n    collection.Add(group);\r\n    Assert.Same(group, collection[0]);\r\n    Assert.Same(listView, group.ListView);\r\n    Assert.Equal(group, Assert.Single(collection));\r\n    Assert.Equal(group, Assert.Single(otherCollection));\r\n}\r\n```\r\n\r\n**Expected behavior:**\r\nWhich one? I don't really know!\r\n- We throw an `ArgumentException` or `InvalidOperationException` when adding/inserting/setting?\r\n- Do nothing if `group.ListView != null` (nop) and return `-1`\r\n- Remove group from the other ListViewGroupCollection?\r\n\r\nI presume the bug also exists for `Item.Set` and `Insert`\r\n\r\nNote: implementation of `ListViewGroupCollection.Add`:\r\n```cs\r\npublic int Add(ListViewGroup group)\r\n{\r\n    if (group is null)\r\n    {\r\n        throw new ArgumentNullException(nameof(group));\r\n    }\r\n\r\n    if (Contains(group))\r\n    {\r\n        return -1;\r\n    }\r\n\r\n    CheckListViewItems(group);\r\n    group.ListView = _listView;\r\n    int index = List.Add(group);\r\n    if (_listView.IsHandleCreated)\r\n    {\r\n        _listView.InsertGroupInListView(List.Count, group);\r\n        MoveGroupItems(group);\r\n    }\r\n\r\n    return index;\r\n}\r\n```\r\n\r\n**Minimal repro:**\r\nSee above","Url":"https://github.com/dotnet/winforms/issues/4001","RelatedDescription":"Open issue \"ListViewGroupCollection.Add can cause corruption adding a group already added to another ListView\" (#4001)"},{"Id":"708298289","IsPullRequest":true,"CreatedAt":"2020-09-24T16:08:49","Actor":"hughbe","Number":"4000","RawContent":null,"Title":"[WIP] Add ListViewGroup items to ListView when adding group","State":"open","Body":"Fixes https://github.com/dotnet/winforms/issues/3987\r\n\r\nWIP as I need to do more testing and check some things\r\n\r\n## Proposed changes\r\n\r\n- Add ListViewGroup items to ListView when adding group\r\n\r\n## Customer Impact\r\n\r\n- Items that were in the ListViewGroup but not added to the ListView were not added, but now they are\r\n\r\n## Regression? \r\n\r\n- No\r\n\r\n## Risk\r\n\r\n- Performance? People relying on the incorrect behaviour\r\n\r\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/4000)","Url":"https://github.com/dotnet/winforms/pull/4000","RelatedDescription":"Open PR \"[WIP] Add ListViewGroup items to ListView when adding group\" (#4000)"},{"Id":"708122985","IsPullRequest":true,"CreatedAt":"2020-09-24T12:50:16","Actor":"dotnet-maestro[bot]","Number":"3997","RawContent":null,"Title":"[master] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:be4b0f38-c1d5-43ab-c5d9-08d76fa9c820)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: be4b0f38-c1d5-43ab-c5d9-08d76fa9c820\r\n- **Build**: 20200923.13\r\n- **Date Produced**: 9/24/2020 11:06 AM\r\n- **Commit**: 886cadea8633ef93cc202a102b9b46ec2ba231d4\r\n- **Branch**: refs/heads/master\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.CodeDom**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Diagnostics.EventLog**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.DirectoryServices**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.App**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.Targets**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.Win32.Registry**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Drawing.Common**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Threading.AccessControl**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Windows.Extensions**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Text.Json**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Text.Encodings.Web**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.IO.Packaging**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Resources.Extensions**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Security.AccessControl**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Security.Cryptography.Cng**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Security.Cryptography.Xml**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Security.Permissions**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n  - **System.Security.Principal.Windows**: [from 6.0.0-alpha.1.20472.9 to 6.0.0-alpha.1.20473.13][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/0a69f02...886cade\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:be4b0f38-c1d5-43ab-c5d9-08d76fa9c820)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3997)","Url":"https://github.com/dotnet/winforms/pull/3997","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/runtime\" (#3997)"},{"Id":"708111684","IsPullRequest":true,"CreatedAt":"2020-09-24T12:02:12","Actor":"dotnet-maestro[bot]","Number":"3996","RawContent":null,"Title":"[master] Update dependencies from dotnet/arcade","State":"open","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:4d0c844d-0758-4fc5-c1ad-08d6354da8a8)\r\n## From https://github.com/dotnet/arcade\r\n- **Subscription**: 4d0c844d-0758-4fc5-c1ad-08d6354da8a8\r\n- **Build**: 20200922.36\r\n- **Date Produced**: 9/23/2020 12:49 AM\r\n- **Commit**: 06ad7cf82dbf56b3facf8a7d3a00944f5116663d\r\n- **Branch**: refs/heads/master\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **Microsoft.DotNet.GenFacades**: [from 5.0.0-beta.20471.1 to 5.0.0-beta.20472.36][1]\r\n  - **Microsoft.DotNet.XUnitExtensions**: [from 5.0.0-beta.20471.1 to 5.0.0-beta.20472.36][1]\r\n  - **Microsoft.DotNet.Arcade.Sdk**: [from 5.0.0-beta.20471.1 to 5.0.0-beta.20472.36][1]\r\n  - **Microsoft.DotNet.Helix.Sdk**: [from 5.0.0-beta.20471.1 to 5.0.0-beta.20472.36][1]\r\n  - **Microsoft.DotNet.RemoteExecutor**: [from 5.0.0-beta.20471.1 to 5.0.0-beta.20472.36][1]\r\n\r\n[1]: https://github.com/dotnet/arcade/compare/0365488...06ad7cf\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:4d0c844d-0758-4fc5-c1ad-08d6354da8a8)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3996)","Url":"https://github.com/dotnet/winforms/pull/3996","RelatedDescription":"Open PR \"[master] Update dependencies from dotnet/arcade\" (#3996)"},{"Id":"707025334","IsPullRequest":true,"CreatedAt":"2020-09-24T06:47:21","Actor":"RussKie","Number":"3981","RawContent":null,"Title":"Revert 3224","State":"closed","Body":"<!-- Please read CONTRIBUTING.md before submitting a pull request -->\r\n\r\nFixes #\r\n\r\n\r\n## Proposed changes\r\n\r\n- \r\n- \r\n- \r\n\r\n<!-- We are in TELL-MODE the following section must be completed -->\r\n\r\n## Customer Impact\r\n\r\n- \r\n- \r\n\r\n## Regression? \r\n\r\n- Yes / No\r\n\r\n## Risk\r\n\r\n-\r\n\r\n<!-- end TELL-MODE -->\r\n\r\n\r\n## Screenshots <!-- Remove this section if PR does not change UI -->\r\n\r\n### Before\r\n\r\n<!-- TODO -->\r\n\r\n### After\r\n\r\n<!-- TODO -->\r\n\r\n\r\n## Test methodology <!-- How did you ensure quality? -->\r\n\r\n- \r\n- \r\n- \r\n\r\n## Accessibility testing  <!-- Remove this section if PR does not change UI -->\r\n\r\n<!--\r\n     Microsoft prioritizes making our products accessible. \r\n     WinForms has a key role in allowing developers to create accessible apps. \r\n     \r\n     When submitting a change which impacts UI in any way, including adding new UI or\r\n     modifying existing controls the developer needs to run the Accessibility Insights\r\n     tool (https://accessibilityinsights.io/) and verify that there are no changes or\r\n     regressions. \r\n     \r\n     The developer should run the Fast Pass over the impacted control(s) and provide\r\n     a snapshot of the passing results along with before/after snapshots of the UI.\r\n     More info: (https://accessibilityinsights.io/docs/en/web/getstarted/fastpass)\r\n  -->\r\n\r\n\r\n \r\n\r\n## Test environment(s) <!-- Remove any that don't apply -->\r\n\r\n- <!-- use `dotnet --info` -->\r\n\r\n\r\n<!-- Mention language, UI scaling, or anything else that might be relevant -->\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3981)","Url":"https://github.com/dotnet/winforms/pull/3981","RelatedDescription":"Closed or merged PR \"Revert 3224\" (#3981)"},{"Id":"707792485","IsPullRequest":true,"CreatedAt":"2020-09-24T06:39:45","Actor":"dotnet-maestro[bot]","Number":"3995","RawContent":null,"Title":"[release/5.0-rc2] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: c5389e69-a40e-47fd-afe1-08d849eee71f\r\n- **Build**: 20200923.9\r\n- **Date Produced**: 9/24/2020 1:30 AM\r\n- **Commit**: 467647115ce628504762ee3555d4439ae2da6582\r\n- **Branch**: refs/heads/release/5.0-rc2\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.CodeDom**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.Win32.Registry**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.App**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.Targets**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Security.Cryptography.Cng**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Security.Cryptography.Xml**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Security.Permissions**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Security.Principal.Windows**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Security.AccessControl**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Text.Encodings.Web**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Threading.AccessControl**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Windows.Extensions**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Text.Json**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Resources.Extensions**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Diagnostics.EventLog**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.DirectoryServices**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Drawing.Common**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.IO.Packaging**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 5.0.0-rc.2.20473.5 to 5.0.0-rc.2.20473.9][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/fd75c08...4676471\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3995)","Url":"https://github.com/dotnet/winforms/pull/3995","RelatedDescription":"Closed or merged PR \"[release/5.0-rc2] Update dependencies from dotnet/runtime\" (#3995)"},{"Id":"707678097","IsPullRequest":true,"CreatedAt":"2020-09-24T00:38:34","Actor":"JeremyKuhne","Number":"3990","RawContent":null,"Title":"Apply clipping and translation transforms correctly","State":"closed","Body":"Logic was off for some of the cases where we set up an `HDC` for drawing and we weren't applying clipping or translation transforms when we needed to. For the `ToolStrip` this causes the background of the parent to fill over the `ToolStrip` background.\r\n\r\nThis has implications for most rendering where a clip or transform is applied.\r\n\r\nAdd tests for the `HDC` handling struct to validate application of `Graphics` properties.\r\n\r\nFixes #3975\r\n\r\n\r\n## Proposed changes\r\n\r\n- Fix logic in `DeviceContextHDCScope`\r\n- Add tests for property application\r\n\r\n## Customer Impact\r\n\r\n- Background color isn't visible in Toolstrip (possibly other internal controls, testing hasn't surfaced any others yet)\r\n- Customer or control vendor's controls that utilize clipping or origin transforms may not render correctly if they utilize ControlPaint or base class rendering\r\n\r\n## Regression? \r\n\r\n- Yes\r\n\r\n## Risk\r\n\r\n- Low\r\n\r\n## Screenshots\r\n\r\n### Before\r\n\r\nVisual styles enabled and disabled; Professional and ManagerRenderMode RenderMode\r\n![image](https://user-images.githubusercontent.com/8184940/94067041-25448c00-fda2-11ea-8a8a-67cb7b96170b.png)\r\n\r\n\r\n### After\r\n\r\nVisual styles enabled and disabled; Professional and ManagerRenderMode RenderMode\r\n![image](https://user-images.githubusercontent.com/8184940/94068165-afd9bb00-fda3-11ea-9a11-130b60d6c58b.png)\r\n\r\n\r\n`RenderMode.System` (not the default) was validated to be unimpacted by this change.\r\n\r\n## Test methodology <!-- How did you ensure quality? -->\r\n\r\n- Manually validated screen shots for various permutations\r\n- Wrote regression tests for HDC/Graphics property application\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3990)","Url":"https://github.com/dotnet/winforms/pull/3990","RelatedDescription":"Closed or merged PR \"Apply clipping and translation transforms correctly\" (#3990)"},{"Id":"707753350","IsPullRequest":false,"CreatedAt":"2020-09-23T23:54:05","Actor":"JeremyKuhne","Number":"3992","RawContent":null,"Title":"TrackBarAccessibilityObject_Value_Set_GetReturnsExpected failing in CI","State":"open","Body":"\r\n\r\nhttps://dev.azure.com/dnceng/public/_build/results?buildId=828192&view=ms.vss-test-web.build-test-results-tab&runId=26395620&resultId=105201&paneView=debug\r\n\r\n```\r\nSystem.Windows.Forms.Tests.AccessibleObjects.TrackBarAccessibleObjectTests.TrackBarAccessibilityObject_Value_Set_GetReturnsExpected(value: \\\"100\\\", expected: 10, expectedValueString: \\\"100\\\", createControl: True)\r\n\r\nError message\r\nAssert.Equal() Failure\\r\\nExpected: 100\\r\\nActual:   (null)\r\n\r\n\r\nStack trace\r\n   at System.Windows.Forms.Tests.AccessibleObjects.TrackBarAccessibleObjectTests.TrackBarAccessibilityObject_Value_Set_GetReturnsExpected(String value, Int32 expected, String expectedValueString, Boolean createControl) in /_/src/System.Windows.Forms/tests/UnitTests/AccessibleObjects/TrackBarAccessibleObjectTests.cs:line 86\r\n```","Url":"https://github.com/dotnet/winforms/issues/3992","RelatedDescription":"Open issue \"TrackBarAccessibilityObject_Value_Set_GetReturnsExpected failing in CI\" (#3992)"},{"Id":"707703163","IsPullRequest":true,"CreatedAt":"2020-09-23T22:39:30","Actor":"dotnet-maestro[bot]","Number":"3991","RawContent":null,"Title":"[release/5.0-rc2] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: c5389e69-a40e-47fd-afe1-08d849eee71f\r\n- **Build**: 20200923.5\r\n- **Date Produced**: 9/23/2020 9:26 PM\r\n- **Commit**: fd75c08e74bd4a349ed6dca742e4a33f3a617a11\r\n- **Branch**: refs/heads/release/5.0-rc2\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.CodeDom**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.Win32.Registry**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.App**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.Targets**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Security.Cryptography.Cng**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Security.Cryptography.Xml**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Security.Permissions**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Security.Principal.Windows**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Security.AccessControl**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Text.Encodings.Web**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Threading.AccessControl**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Windows.Extensions**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Text.Json**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Resources.Extensions**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Diagnostics.EventLog**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.DirectoryServices**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Drawing.Common**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.IO.Packaging**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 5.0.0-rc.2.20472.7 to 5.0.0-rc.2.20473.5][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/3146953...fd75c08\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3991)","Url":"https://github.com/dotnet/winforms/pull/3991","RelatedDescription":"Closed or merged PR \"[release/5.0-rc2] Update dependencies from dotnet/runtime\" (#3991)"},{"Id":"707559053","IsPullRequest":false,"CreatedAt":"2020-09-23T17:45:27","Actor":"ViktorHofer","Number":"3989","RawContent":null,"Title":"Winforms is still using netcoreapp5.0 instead of net5.0 as the TargetFramework","State":"open","Body":"We embed the TargetFramework value in the assembly's metadata as part of the `TargetFrameworkAttribute`. I noticed that both winforms and wpf are still using netcoreapp5.0 as the tfm which got replaced by net5.0.\r\n\r\nDo we know who reads that attribute and if we need to fix this before we ship?\r\n\r\ncc @RussKie @JeremyKuhne @Tanya-Solyanik @ericstj ","Url":"https://github.com/dotnet/winforms/issues/3989","RelatedDescription":"Open issue \"Winforms is still using netcoreapp5.0 instead of net5.0 as the TargetFramework\" (#3989)"},{"Id":"707546664","IsPullRequest":true,"CreatedAt":"2020-09-23T17:24:43","Actor":"mmitche","Number":"3988","RawContent":null,"Title":"[release/3.1] Remove CPD on dependency coming from core-setup","State":"open","Body":"Both the CPD parent and the dependency are coming from core-setup, so this is invalid on strict-coherency.\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3988)","Url":"https://github.com/dotnet/winforms/pull/3988","RelatedDescription":"Open PR \"[release/3.1] Remove CPD on dependency coming from core-setup\" (#3988)"},{"Id":"707422249","IsPullRequest":false,"CreatedAt":"2020-09-23T14:35:06","Actor":"SergeySmirnov-Akvelon","Number":"3987","RawContent":null,"Title":"The element added to the group is not displayed in the ListView after adding of group","State":"open","Body":"<!-- Read https://github.com/dotnet/winforms/blob/master/docs/issue-guide.md -->\r\n\r\n* .NET Core Version: **5.0.100-rc.1.20420.14**\r\n\r\n* Have you experienced this same bug with .NET Framework?: **Yes**, tested in net472, netcoreapp3.1\r\n\r\n**Repro steps:**\r\n1. Create application with ListView.\r\n2. Create ListViewGroup\r\n3. Add ListViewItem to ListViewGroup\r\n4. Add ListViewGroup to ListView.\r\n5. Or use attached project [WindowsFormsApp3.zip](https://github.com/dotnet/winforms/files/5271938/WindowsFormsApp3.zip)\r\n\r\n**Actual:**\r\n`ListViewItem` is not displayed in `ListView` because `ListItemView.ListView = null`.  I think ListView should be set for item when we add group with this item to ListView.\r\n\r\nAs a result `ListViewItem.AccesibleObject` may either throw `InvalidOperationException`, when attempting to access an item which added to a group, but have not link to the listview (2), or have a stable/incorrect reference to the listview when its group is removed from the listview (3)\r\n\r\n**Expected:**\r\n1. `ListViewItem` is displayed in ListView, if added to a group which is then added to a listview.\r\n2. `ListViewItem` has a reference to the listview, when a group is added to the listview\r\n2. `ListViewItem` has a reference to the listview removed, when a group is removed from the listview\r\n\r\n\r\n**Notes:**\r\n\r\n ```\r\n    var group = new ListViewGroup(\"Test group\");\r\n\r\n    // this item is not shown in the listview, and doens't have reference to listview\r\n    // i.e. item1.ListView = null\r\n    ListViewItem item1 = new ListViewItem(\"You don't see me\");\r\n    group.Items.Add(item1);\r\n    listView2.Groups.Add(group);\r\n\r\n    // this items is shown in the listview, item2.ListView <-- listView2\r\n    ListViewItem item2 = new ListViewItem(\"You see me\", group);\r\n    listView2.Items.Add(item2);\r\n```\r\n","Url":"https://github.com/dotnet/winforms/issues/3987","RelatedDescription":"Open issue \"The element added to the group is not displayed in the ListView after adding of group\" (#3987)"},{"Id":"707307323","IsPullRequest":true,"CreatedAt":"2020-09-23T12:42:29","Actor":"dotnet-maestro[bot]","Number":"3986","RawContent":null,"Title":"[master] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:be4b0f38-c1d5-43ab-c5d9-08d76fa9c820)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: be4b0f38-c1d5-43ab-c5d9-08d76fa9c820\r\n- **Build**: 20200922.9\r\n- **Date Produced**: 9/23/2020 6:09 AM\r\n- **Commit**: 0a69f0262ee762252d2636b49b82c6030c386046\r\n- **Branch**: refs/heads/master\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.CodeDom**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Diagnostics.EventLog**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.DirectoryServices**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.App**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.Targets**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.Win32.Registry**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Drawing.Common**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Text.Json**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Threading.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Windows.Extensions**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Text.Encodings.Web**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.IO.Packaging**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Resources.Extensions**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Security.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Security.Cryptography.Cng**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Security.Cryptography.Xml**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Security.Permissions**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n  - **System.Security.Principal.Windows**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.9][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/a820ca1...0a69f02\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:be4b0f38-c1d5-43ab-c5d9-08d76fa9c820)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3986)","Url":"https://github.com/dotnet/winforms/pull/3986","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/runtime\" (#3986)"},{"Id":"706739080","IsPullRequest":true,"CreatedAt":"2020-09-23T07:54:06","Actor":"dotnet-maestro[bot]","Number":"3980","RawContent":null,"Title":"[release/5.0-rc2] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: c5389e69-a40e-47fd-afe1-08d849eee71f\r\n- **Build**: 20200922.7\r\n- **Date Produced**: 9/23/2020 3:08 AM\r\n- **Commit**: 3146953047a3f88987d7fb36e3aa4bcd81c73f6c\r\n- **Branch**: refs/heads/release/5.0-rc2\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.CodeDom**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.Win32.Registry**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.App**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.Targets**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Security.Cryptography.Cng**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Security.Cryptography.Xml**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Security.Permissions**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Security.Principal.Windows**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Security.AccessControl**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Text.Encodings.Web**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Threading.AccessControl**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Windows.Extensions**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Text.Json**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Resources.Extensions**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Diagnostics.EventLog**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.DirectoryServices**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Drawing.Common**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.IO.Packaging**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 5.0.0-rc.2.20472.3 to 5.0.0-rc.2.20472.7][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/27fd1ca...3146953\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3980)\r\n","Url":"https://github.com/dotnet/winforms/pull/3980","RelatedDescription":"Closed or merged PR \"[release/5.0-rc2] Update dependencies from dotnet/runtime\" (#3980)"},{"Id":"707097249","IsPullRequest":false,"CreatedAt":"2020-09-23T06:50:37","Actor":"DmitryGaravsky","Number":"3984","RawContent":null,"Title":"The WM_WINDOWPOSCHANGING message is changed dramatically when HighDpiMode.PerMonitorV2 is enabled for the application","State":"open","Body":"## Description\r\nProcessing of the [WM_WINDOWPOSCHANGING ](https://docs.microsoft.com/en-us/windows/win32/winmsg/wm-windowposchanging) message is changed dramatically when the HighDpiMode.PerMonitorV2 option is enabled for the application.\r\nIn this mode, the [WINDOWPOS](https://docs.microsoft.com/en-us/windows/win32/api/winuser/ns-winuser-windowpos) structure, which contains information about the window's new size and position, **does not include the difference accumulated as a result of sequential moving**.\r\n\r\nThis is an important breaking change for us because it breaks the \"sticky windows\" implementations.\r\n\r\n## Configuration\r\nOS Version: Microsoft Windows [Version 10.0.18362.535]\r\n.Net Framework Version: Microsoft (R) .NET CLR Version Tool Version 4.8.3928.0\r\n.Net Core Version: SDK Version: 5.0.100-rc.1.20452.10\r\n\r\n## Regression?\r\nNo, we have reproduced this issue both under .Net Framework and under .Net Core.\r\n\r\n## Reproduction information\r\nHere is a simple code snippet that demonstrates the issue:\r\n\r\n```cs\r\nusing System.Windows.Forms;\r\n\r\nnamespace WindowsFormsApp1 {\r\n    public class StickyForm : Form {\r\n        public StickyForm() {\r\n            Application.SetHighDpiMode(HighDpiMode.PerMonitorV2); // Comment out this line to compare\r\n            StartPosition = FormStartPosition.Manual;\r\n            Location = new Point(100, 100);\r\n            Size = new Size(500, 250);\r\n        }\r\n        const int SnapGridSize = 50;\r\n        const int WM_WINDOWPOSCHANGING = 0x0046;\r\n        const int SWP_NOMOVE = 0x002;\r\n        [System.Security.SecuritySafeCritical]\r\n        protected override void WndProc(ref Message msg) {\r\n            if(msg.Msg == WM_WINDOWPOSCHANGING) {\r\n                WINDOWPOS pos = (WINDOWPOS)Marshal.PtrToStructure(msg.LParam, typeof(WINDOWPOS));\r\n                Rectangle bounds = Bounds, requestedBounds = new Rectangle(pos.x, pos.y, pos.cx, pos.cy);\r\n                Debug.WriteLine(requestedBounds.ToString() + \" \" + bounds.ToString());\r\n                if(Math.Abs(requestedBounds.X - bounds.X) < SnapGridSize &&\r\n                    Math.Abs(requestedBounds.Y - bounds.Y) < SnapGridSize) {\r\n                    // do not change the location until the next grid cell reached\r\n                    pos.flags |= SWP_NOMOVE;\r\n                    Marshal.StructureToPtr(pos, msg.LParam, false);\r\n                    msg.Result = IntPtr.Zero;\r\n                }\r\n            }\r\n            base.WndProc(ref msg);\r\n        }\r\n    }\r\n    [StructLayout(LayoutKind.Sequential)]\r\n    public struct WINDOWPOS {\r\n        public IntPtr hWndInsertAfter, hWnd;\r\n        public int x, y, cx, cy;\r\n        public uint flags;\r\n    }\r\n}\r\n```\r\nTry to drag the window caption by the mouse. You can see that it is impossible to move the window at all.\r\nComment out the SetHighDpiMode call and then try again - the window is moving while snapping to a grid, as expected.\r\n\r\nThis is how debug-output looks like **when the HighDpiMode.PerMonitorV2 option is enabled**:\r\n```\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n```\r\n\r\nThis is how debug-output looks like **without** the HighDpiMode.PerMonitorV2 option enabled:\r\n```\r\n{X=101,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=102,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=103,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=104,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=105,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=106,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=107,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=108,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n{X=110,Y=100,Width=500,Height=250} {X=100,Y=100,Width=500,Height=250}\r\n```\r\n","Url":"https://github.com/dotnet/winforms/issues/3984","RelatedDescription":"Open issue \"The WM_WINDOWPOSCHANGING message is changed dramatically when HighDpiMode.PerMonitorV2 is enabled for the application\" (#3984)"},{"Id":"707096571","IsPullRequest":false,"CreatedAt":"2020-09-23T06:49:27","Actor":"RussKie","Number":"3983","RawContent":null,"Title":"Review use of `CA1838` warning - Avoid 'StringBuilder' parameters for P/Invokes","State":"open","Body":"To update the underlying SDK/toolsets to 5.0-RC1 we had to suppress `A1838 // Avoid 'StringBuilder' parameters for P/Invokes` in https://github.com/dotnet/winforms/pull/3959/commits/9dfaaa152b889f2040f646697dfb31c77d7058e8.\r\n\r\nhttps://github.com/dotnet/winforms/search?q=CA1838\r\n\r\nThe suppression needs to be reviewed, and corrected.","Url":"https://github.com/dotnet/winforms/issues/3983","RelatedDescription":"Open issue \"Review use of `CA1838` warning - Avoid 'StringBuilder' parameters for P/Invokes\" (#3983)"},{"Id":"707095522","IsPullRequest":false,"CreatedAt":"2020-09-23T06:47:38","Actor":"RussKie","Number":"3982","RawContent":null,"Title":"Review use of `CA1837` warning - Use 'Environment.ProcessId'","State":"open","Body":"To update the underlying SDK/toolsets to 5.0-RC1 we had to suppress `CA1837 // Use 'Environment.ProcessId'` in https://github.com/dotnet/winforms/pull/3959/commits/9dfaaa152b889f2040f646697dfb31c77d7058e8.\r\n\r\nhttps://github.com/dotnet/winforms/blob/ec688d7d10409fe3566e8eebaa066b962f38d9cb/src/System.Windows.Forms/src/System/Windows/Forms/ListViewItem.ListViewSubItem.ListViewSubItemAccessibleObject.cs#L115-L117\r\n\r\nThe suppression needs to be reviewed, and corrected.","Url":"https://github.com/dotnet/winforms/issues/3982","RelatedDescription":"Open issue \"Review use of `CA1837` warning - Use 'Environment.ProcessId'\" (#3982)"},{"Id":"706564485","IsPullRequest":true,"CreatedAt":"2020-09-22T21:57:25","Actor":"dotnet-maestro[bot]","Number":"3977","RawContent":null,"Title":"[master] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:be4b0f38-c1d5-43ab-c5d9-08d76fa9c820)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: be4b0f38-c1d5-43ab-c5d9-08d76fa9c820\r\n- **Build**: 20200922.2\r\n- **Date Produced**: 9/22/2020 1:18 PM\r\n- **Commit**: c48127daec460692ee18f7ae7552bcc3f7fa8499\r\n- **Branch**: refs/heads/master\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.CodeDom**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Diagnostics.EventLog**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.DirectoryServices**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.App**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.Targets**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.Win32.Registry**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Drawing.Common**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Text.Json**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Threading.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Windows.Extensions**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Text.Encodings.Web**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.IO.Packaging**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Resources.Extensions**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Security.AccessControl**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Security.Cryptography.Cng**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Security.Cryptography.Xml**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Security.Permissions**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n  - **System.Security.Principal.Windows**: [from 6.0.0-alpha.1.20468.7 to 6.0.0-alpha.1.20472.2][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/a820ca1...c48127d\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:be4b0f38-c1d5-43ab-c5d9-08d76fa9c820)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3977)","Url":"https://github.com/dotnet/winforms/pull/3977","RelatedDescription":"Closed or merged PR \"[master] Update dependencies from dotnet/runtime\" (#3977)"},{"Id":"706606524","IsPullRequest":true,"CreatedAt":"2020-09-22T21:20:20","Actor":"dotnet-maestro[bot]","Number":"3978","RawContent":null,"Title":"[release/5.0-rc2] Update dependencies from dotnet/runtime","State":"closed","Body":"This pull request updates the following dependencies\r\n\r\n[marker]: <> (Begin:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n## From https://github.com/dotnet/runtime\r\n- **Subscription**: c5389e69-a40e-47fd-afe1-08d849eee71f\r\n- **Build**: 20200922.3\r\n- **Date Produced**: 9/22/2020 5:59 PM\r\n- **Commit**: 27fd1ca99f4322dcc89e2b91f72c4f1b9ee2994b\r\n- **Branch**: refs/heads/release/5.0-rc2\r\n\r\n[DependencyUpdate]: <> (Begin)\r\n\r\n- **Updates**:\r\n  - **runtime.win-x86.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.CodeDom**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Configuration.ConfigurationManager**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Diagnostics.EventLog**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Diagnostics.PerformanceCounter**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.DirectoryServices**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Drawing.Common**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **runtime.win-x64.Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NET.Sdk.IL**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.App**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.App.Runtime.win-x64**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.ILAsm**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.ILDAsm**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.Platforms**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.Targets**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.Win32.Registry**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.Win32.Registry.AccessControl**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.Win32.SystemEvents**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.App.Internal**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **Microsoft.NETCore.App.Ref**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.IO.Packaging**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.IO.FileSystem.AccessControl**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Windows.Extensions**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Threading.AccessControl**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Text.Json**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Text.Encodings.Web**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.IO.Pipes.AccessControl**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Reflection.MetadataLoadContext**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Resources.Extensions**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Security.AccessControl**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Security.Cryptography.Cng**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Security.Cryptography.Pkcs**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Security.Cryptography.ProtectedData**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Security.Cryptography.Xml**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Security.Permissions**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n  - **System.Security.Principal.Windows**: [from 5.0.0-rc.2.20471.13 to 5.0.0-rc.2.20472.3][1]\r\n\r\n[1]: https://github.com/dotnet/runtime/compare/c4c1366...27fd1ca\r\n\r\n[DependencyUpdate]: <> (End)\r\n\r\n\r\n[marker]: <> (End:c5389e69-a40e-47fd-afe1-08d849eee71f)\r\n\r\n\n\n###### Microsoft Reviewers: [Open in CodeFlow](http://wpcp.azurewebsites.net/CodeFlowProtocolProxy2.php?pullrequest=https://github.com/dotnet/winforms/pull/3978)","Url":"https://github.com/dotnet/winforms/pull/3978","RelatedDescription":"Closed or merged PR \"[release/5.0-rc2] Update dependencies from dotnet/runtime\" (#3978)"},{"Id":"706695000","IsPullRequest":false,"CreatedAt":"2020-09-22T21:09:02","Actor":"weltkante","Number":"3979","RawContent":null,"Title":"Cursor cannot load all supported file formats","State":"open","Body":"**.NET Core Version:**\r\nall .NET Core and Desktop Framework\r\n\r\n**Have you experienced this same bug with .NET Framework?:**\r\nYes\r\n\r\n**Problem description:**\r\n\r\nLoading a cursor making use of alpha transparency by filename or stream does not work correctly when done through WinForms and produces a black cursor image (possibly the cursor mask instead of the actual cursor?)\r\n\r\n![grafik](https://user-images.githubusercontent.com/5845814/93937070-6fd4f280-fd27-11ea-8994-54a41823e603.png)\r\n\r\nWinForms is [using `IPicture` interop](https://source.dot.net/#System.Windows.Forms/System/Windows/Forms/Cursor.cs,4a07b3923561f20f) to load cursors instead of the win32 cursor API and its unclear if OLE simply doesn't support alpha transparency, or if WinForms is doing something wrong in the interop.\r\n\r\n**Expected behavior:**\r\n\r\nThe rendering should match the builtin hand cursor Windows uses (since in fact its the same file). You can also work around the bug by doing manual interop and calling [LoadCursorFromFile](https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-loadcursorfromfilew). For streams this requires saving the stream to a file first, though.\r\n\r\n![grafik](https://user-images.githubusercontent.com/5845814/93937047-62b80380-fd27-11ea-8ed9-3693fe220bdc.png)\r\n\r\n**Minimal repro:**\r\n\r\nAdd a button and set the cursor to a file containing alpha transparency, for example the hand cursor distributed with Windows.\r\n\r\n`button1.Cursor = new Cursor(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Windows), \"Cursors\\\\aero_link.cur\"));`\r\n","Url":"https://github.com/dotnet/winforms/issues/3979","RelatedDescription":"Open issue \"Cursor cannot load all supported file formats\" (#3979)"},{"Id":"707203849","IsPullRequest":false,"CreatedAt":"2020-09-21T01:24:49","Actor":"vdanche","Number":"3985","RawContent":null,"Title":"With NET 5 RC2 SDK installed, \"net5.0-windows\" instead of \"net5.0\" should be displayed for winforms/wpf help description in CLI.","State":"open","Body":"**Repro steps:**\r\n1.Install NET 5 RC2 build(5.0.100-rc.2.20466.4).\r\n2. In CLI, run \"dotnet new winforms --help\" or \"dotnet new wpf --help\".\r\n3. Check the help contents displaying.\r\n\r\n**Expected Result:**\r\n\"net5.0\" should be displayed as \"net5.0-windows\"\r\n\r\n**Actual Result:**\r\nStill display as \"net5.0\"\r\n![image](https://user-images.githubusercontent.com/65637796/93433959-15d4c700-f8fa-11ea-9b46-de6792f0a95e.png)","Url":"https://github.com/dotnet/winforms/issues/3985","RelatedDescription":"Open issue \"With NET 5 RC2 SDK installed, \"net5.0-windows\" instead of \"net5.0\" should be displayed for winforms/wpf help description in CLI.\" (#3985)"}],"ResultType":"GitHubIssue"}},"RunOn":"2020-09-25T05:30:49.9086086Z","RunDurationInMilliseconds":610}